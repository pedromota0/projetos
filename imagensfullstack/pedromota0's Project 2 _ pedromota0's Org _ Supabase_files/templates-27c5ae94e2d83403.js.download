!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="02a477f8-8cd7-487d-a6fc-00e7d5860187",e._sentryDebugIdIdentifier="sentry-dbid-02a477f8-8cd7-487d-a6fc-00e7d5860187")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5969],{97395:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/sql/templates",function(){return r(98294)}])},22479:function(e,t,r){"use strict";r.d(t,{f:function(){return i}});var s=r(97458),n=r(49584),a=r(9085);let i=e=>(0,s.jsx)(n.Zb,{className:"grow bg-surface-100 p-3 transition-colors hover:bg-surface-200 border border-light hover:border-default cursor-pointer",onClick:e.onClick,"data-sentry-element":"Card","data-sentry-component":"ActionCard","data-sentry-source-file":"ActionCard.tsx",children:(0,s.jsxs)("div",{className:"relative flex items-start gap-3",children:[e.isBeta&&(0,s.jsx)(a.C,{className:"absolute -right-5 -top-5 bg-surface-300 bg-opacity-100 text-xs text-foreground",children:"Coming soon"}),(0,s.jsx)("div",{className:"rounded-full ".concat(e.bgColor," w-8 h-8 flex items-center justify-center flex-shrink-0"),children:e.icon}),(0,s.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,s.jsx)("h3",{className:"text-sm text-foreground mb-0",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-foreground-light",children:e.description})]})]})})},98294:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return T}});var s=r(97458),n=r(64369),a=r(48426),i=r(52983),l=r(85741),o=r(40540),d=r(50663),c=r.n(d),u=r(34549),f=r(65483),m=r(26910),p=r(59185),x=r(22479),h=r(67803),g=r(66092),y=r(97167),b=r(46382),v=r(26199),j=r(87440),N=r(39305),w=r(28453),C=r(69184),_=()=>{let e=(0,a.useRouter)(),{ref:t}=(0,f.UO)(),r=(0,y.l)(),{profile:n}=(0,v.Un)(),{project:i}=(0,p.d2)(),[l]=c()(m.o,{type:"template"}),d=(0,j.B0)(),_=(0,g.Xo)(o.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null==n?void 0:n.id},subject:{id:null==n?void 0:n.id}}),{mutate:k}=(0,h.a)(),S=async(r,s)=>{if(!t)return console.error("Project ref is required");if(!i)return console.error("Project is required");if(!n)return console.error("Profile is required");if(!_)return(0,u.Am)("Your queries will not be saved as you do not have sufficient permissions");try{let a=(0,C.wI)({id:(0,b.k$)(),name:s,sql:r,owner_id:null==n?void 0:n.id,project_id:null==i?void 0:i.id});d.addSnippet({projectRef:t,snippet:a}),d.addNeedsSaving(a.id),e.push("/project/".concat(t,"/sql/").concat(a.id))}catch(e){u.Am.error("Failed to create new query: ".concat(e.message))}};return(0,s.jsx)("div",{className:"block h-full space-y-8 overflow-y-auto p-6 px-10 bg-dash-sidebar dark:bg-surface-100","data-sentry-component":"SQLTemplates","data-sentry-source-file":"SQLTemplates.tsx",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-foreground mb-1 text-xl",children:"Scripts"}),(0,s.jsx)("p",{className:"text-foreground-light text-sm",children:"Quick scripts to run on your database."}),(0,s.jsxs)("p",{className:"text-foreground-light text-sm",children:["Click on any script to fill the query box, modify the script, then click",(0,s.jsx)("span",{className:"text-code",children:"Run"}),"."]})]}),(0,s.jsx)("div",{className:"grid gap-4 sm:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 ",children:l.map((e,n)=>(0,s.jsx)(x.f,{title:e.title,description:e.description,bgColor:"bg-alternative border",icon:(0,s.jsx)(N.KK,{className:(0,w.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5}),onClick:()=>{var s;S(e.sql,e.title),k({action:"sql_editor_template_clicked",properties:{templateName:e.title},groups:{project:null!=t?t:"Unknown",organization:null!==(s=null==r?void 0:r.slug)&&void 0!==s?s:"Unknown"}})}},"action-card-".concat(n)))})]})})},k=r(30578),S=r(22740),R=r(41872),q=r(82209),E=r(62422);let F=()=>{let e=(0,a.useRouter)(),{ref:t}=(0,n.useParams)(),r=(0,l.Ff)();return(0,i.useEffect)(()=>{if(r){if(!e.isReady)return;let r=(0,E.s7)("sql",{id:"templates"});(0,E.gG)(t,{id:r,type:"sql",label:"Templates",metadata:{sqlId:"templates",name:"templates"}})}},[e.isReady,r,t]),(0,s.jsx)(_,{"data-sentry-element":"SQLTemplates","data-sentry-component":"SqlTemplates","data-sentry-source-file":"templates.tsx"})};F.getLayout=e=>(0,s.jsx)(k.Z,{children:(0,s.jsx)(S.t,{productMenu:(0,s.jsx)(q.d,{}),product:"SQL Editor",children:(0,s.jsx)(R.Z,{children:e})})});var T=F},8209:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(97458),n=r(52983),a=r(81604),i=r(91416);function l(e,t){if(!t.error)return delete e[t.key],e;if(t)return{...e,[t.key]:t.error};throw Error()}function o(e){let{validate:t,...r}=e,[o,d]=(0,n.useReducer)(l,null),c=(0,a.TA)({validateOnBlur:!0,...r,validationSchema:r.validationSchema,initialValues:r.initialValues,onSubmit:r.onSubmit,validate:t||function(){return o}});return(0,s.jsx)("form",{id:r.id,name:r.name,onSubmit:c.handleSubmit,className:r.className,style:r.style,method:"POST","data-sentry-component":"Form","data-sentry-source-file":"Form.tsx",children:(0,s.jsx)(i.o,{values:c.values,errors:c.errors,formContextOnChange:c.handleChange,handleBlur:c.handleBlur,touched:c.touched,fieldLevelValidation:function(e,t){d({key:e,error:t})},"data-sentry-element":"FormContextProvider","data-sentry-source-file":"Form.tsx",children:r.children({errors:c.errors,touched:c.touched,isSubmitting:c.isSubmitting,isValidating:c.isValidating,submitCount:c.submitCount,initialValues:c.initialValues,values:c.values,handleReset:c.handleReset,resetForm:c.resetForm,setFieldValue:c.setFieldValue})})})}},49584:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},Zb:function(){return i},aY:function(){return d},eW:function(){return c},ll:function(){return o}});var s=r(97458),n=r(52983),a=r(28453);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-surface-100 text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 py-4 px-6 border-b",r),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("text-xs font-mono uppercase",r),...n})});o.displayName="CardTitle",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-foreground-muted",r),...n})}).displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("py-4 px-6 border-b last:border-none",r),...n})});d.displayName="CardContent";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)(" flex items-center py-4 px-6",r),...n})});c.displayName="CardFooter"}},function(e){e.O(0,[6665,3856,6664,588,7037,4605,950,292,2433,7639,3662,436,5582,2585,3356,2269,2019,4637,3545,1604,3382,3610,3829,578,28,7788,1212,9774,2888,179],function(){return e(e.s=97395)}),_N_E=e.O()}]);