!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8d9ee70e-4a0c-4c7a-b1c7-7f77a4ba4e0d",e._sentryDebugIdIdentifier="sentry-dbid-8d9ee70e-4a0c-4c7a-b1c7-7f77a4ba4e0d")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6796],{48318:function(e,n,t){var a=t(84546),s=t(45436),r=t(99105),l=t(29233),i=t(31525),c=t(77026);e.exports=function(e,n,t,o){var d=-1,u=s,m=!0,x=e.length,h=[],f=n.length;if(!x)return h;t&&(n=l(n,i(t))),o?(u=r,m=!1):n.length>=200&&(u=c,m=!1,n=new a(n));e:for(;++d<x;){var p=e[d],g=null==t?p:t(p);if(p=o||0!==p?p:0,m&&g==g){for(var y=f;y--;)if(n[y]===g)continue e;h.push(p)}else u(n,g,o)||h.push(p)}return h}},40916:function(e,n,t){var a=t(54466),s=t(55589);e.exports=function(e,n,t,r){return null==e?[]:(s(n)||(n=null==n?[]:[n]),s(t=r?void 0:t)||(t=null==t?[]:[t]),a(e,n,t))}},92238:function(e,n,t){var a=t(48318),s=t(29735),r=t(18268),l=s(function(e,n){return r(e)?a(e,n):[]});e.exports=l},99931:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/database/indexes",function(){return t(68492)}])},4785:function(e,n,t){"use strict";t.d(n,{Q:function(){return i}});var a=t(97458),s=t(2669),r=t(9085),l=t(2791),i=e=>{let{page:n,menu:t}=e;return(0,a.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,a.jsx)(s.ZP,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:t.map((e,i)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"my-6 space-y-8",children:(0,a.jsxs)("div",{className:"mx-3",children:[(0,a.jsx)(s.ZP.Group,{title:e.title?(0,a.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,a.jsx)("span",{children:e.title}),e.isPreview&&(0,a.jsx)(r.C,{variant:"warning",children:"Not production ready"})]}):null}),(0,a.jsx)("div",{children:e.items.map(e=>{let t=e.pages?e.pages.includes(null!=n?n:""):n===e.key;return(0,a.jsx)(l.Z,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:t,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),i!==t.length-1&&(0,a.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},40654:function(e,n,t){"use strict";t.d(n,{H:function(){return o}});var a=t(28894),s=t(68503),r=t(36618),l=t(45524),i=t(29784);async function c(e,n){let{projectRef:t,connectionString:a}=e;if(!t)throw Error("projectRef is required");let r=new Headers;a&&r.set("x-connection-encrypted",a);let{data:l,error:i}=await (0,s.U2)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":a},path:{ref:t}},headers:r,signal:n});return i&&(0,s.S3)(i),l}let o=function(e){let{projectRef:n,connectionString:t}=e,{enabled:s=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(0,l.Vm)(),u=(null==d?void 0:d.status)===i.S.ACTIVE_HEALTHY;return(0,a.a)(r.o.list(n),e=>{let{signal:a}=e;return c({projectRef:n,connectionString:t},a)},{enabled:s&&void 0!==n&&u,...o})}},38477:function(e,n,t){"use strict";t.d(n,{LW:function(){return u},bn:function(){return f}});var a=t(36457),s=t(64618),r=t(34549),l=t(15538),i=t.n(l),c=t(66822),o=t(97595),d=t(44865);let u="pgmq_public",m=i()("\ncreate schema if not exists ".concat(u,";\ngrant usage on schema ").concat(u," to postgres, anon, authenticated, service_role;\n\ncreate or replace function ").concat(u,".pop(\n    queue_name text\n)\n  returns setof pgmq.message_record\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.pop(\n        queue_name := queue_name\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".pop(queue_name text) is 'Retrieves and locks the next message from the specified queue.';\n\n\ncreate or replace function ").concat(u,".send(\n    queue_name text,\n    message jsonb,\n    sleep_seconds integer default 0  -- renamed from 'delay'\n)\n  returns setof bigint\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.send(\n        queue_name := queue_name,\n        msg := message,\n        delay := sleep_seconds\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".send(queue_name text, message jsonb, sleep_seconds integer) is 'Sends a message to the specified queue, optionally delaying its availability by a number of seconds.';\n\n\ncreate or replace function ").concat(u,".send_batch(\n    queue_name text,\n    messages jsonb[],\n    sleep_seconds integer default 0  -- renamed from 'delay'\n)\n  returns setof bigint\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.send_batch(\n        queue_name := queue_name,\n        msgs := messages,\n        delay := sleep_seconds\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".send_batch(queue_name text, messages jsonb[], sleep_seconds integer) is 'Sends a batch of messages to the specified queue, optionally delaying their availability by a number of seconds.';\n\n\ncreate or replace function ").concat(u,".archive(\n    queue_name text,\n    message_id bigint\n)\n  returns boolean\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return\n    pgmq.archive(\n        queue_name := queue_name,\n        msg_id := message_id\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".archive(queue_name text, message_id bigint) is 'Archives a message by moving it from the queue to a permanent archive.';\n\n\ncreate or replace function ").concat(u,".delete(\n    queue_name text,\n    message_id bigint\n)\n  returns boolean\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return\n    pgmq.delete(\n        queue_name := queue_name,\n        msg_id := message_id\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".delete(queue_name text, message_id bigint) is 'Permanently deletes a message from the specified queue.';\n\ncreate or replace function ").concat(u,".read(\n    queue_name text,\n    sleep_seconds integer,\n    n integer\n)\n  returns setof pgmq.message_record\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.read(\n        queue_name := queue_name,\n        vt := sleep_seconds,\n        qty := n\n    );\nend;\n$$;\n\ncomment on function ").concat(u,'.read(queue_name text, sleep_seconds integer, n integer) is \'Reads up to "n" messages from the specified queue with an optional "sleep_seconds" (visibility timeout).\';\n\n-- Grant execute permissions on wrapper functions to roles\ngrant execute on function ').concat(u,".pop(text) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.pop(text) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".send(text, jsonb, integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.send(text, jsonb, integer) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".send_batch(text, jsonb[], integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.send_batch(text, jsonb[], integer) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".archive(text, bigint) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.archive(text, bigint) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".delete(text, bigint) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.delete(text, bigint) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".read(text, integer, integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.read(text, integer, integer) to postgres, service_role, anon, authenticated;\n\n-- For the service role, we want full access\n-- Grant permissions on existing tables\ngrant all privileges on all tables in schema pgmq to postgres, service_role;\n\n-- Ensure service_role has permissions on future tables\nalter default privileges in schema pgmq grant all privileges on tables to postgres, service_role;\n\ngrant usage on schema pgmq to postgres, anon, authenticated, service_role;\n\n\n/*\n  Grant access to sequences to API roles by default. Existing table permissions\n  continue to enforce insert restrictions. This is necessary to accommodate the\n  on-backup hook that rebuild queue table primary keys to avoid a pg_dump segfault.\n  This can be removed once logical backups are completely retired.\n*/\ngrant usage, select, update\non all sequences in schema pgmq\nto anon, authenticated, service_role;\n\nalter default privileges in schema pgmq\ngrant usage, select, update\non sequences\nto anon, authenticated, service_role;\n")),x=i()("\n  drop function if exists \n    ".concat(u,".pop(queue_name text),\n    ").concat(u,".send(queue_name text, message jsonb, sleep_seconds integer),\n    ").concat(u,".send_batch(queue_name text, message jsonb[], sleep_seconds integer),\n    ").concat(u,".archive(queue_name text, message_id bigint),\n    ").concat(u,".delete(queue_name text, message_id bigint),\n    ").concat(u,".read(queue_name text, sleep integer, n integer)\n  ;\n\n  -- Revoke execute permissions on inner pgmq functions to roles (inverse of enabling)\n  do $$\n  begin\n      if exists (select 1 from pg_namespace where nspname = 'pgmq') then\n          -- Revoke privileges on the schema itself\n          revoke all on schema pgmq from anon, authenticated, service_role;\n          \n          -- Revoke default privileges for future objects\n          alter default privileges in schema pgmq revoke all on tables from anon, authenticated, service_role;\n          alter default privileges in schema pgmq revoke all on sequences from anon, authenticated, service_role;\n          alter default privileges in schema pgmq revoke all on functions from anon, authenticated, service_role;\n      end if;\n  end $$;\n\n  drop schema if exists ").concat(u,";\n"));async function h(e){let{projectRef:n,connectionString:t,enable:a}=e,{result:s}=await (0,c.R)({projectRef:n,connectionString:t,sql:a?m:x,queryKey:["toggle-queues-exposure"]});return s}let f=function(){let{onSuccess:e,onError:n,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,a.NL)();return(0,s.D)(e=>h(e),{async onSuccess(n,t,a){let{projectRef:s}=t;await l.invalidateQueries(o.a.exposePostgrestStatus(s)),l.invalidateQueries(d.A.schemas(s)),await (null==e?void 0:e(n,t,a))},async onError(e,t,a){void 0===n?r.Am.error("Failed to toggle queue exposure via PostgREST: ".concat(e.message)):n(e,t,a)},...t})}},97595:function(e,n,t){"use strict";t.d(n,{a:function(){return a}});let a={create:()=>["queues","create"],delete:e=>["queues",e,"delete"],purge:e=>["queues",e,"purge"],getMessagesInfinite:(e,n,t)=>["projects",e,"queue-messages",n,t].filter(Boolean),list:e=>["projects",e,"queues"],metrics:(e,n)=>["projects",e,"queue-metrics",n],exposePostgrestStatus:e=>["projects",e,"queue-expose-status"]}},42271:function(e,n,t){"use strict";t.d(n,{Kz:function(){return c}});var a=t(28894),s=t(66822),r=t(44865);let l=e=>{let{table:n,schema:t}=e,a=[];n&&a.push("tablename = '".concat(n,"'")),t&&a.push("schemaname = '".concat(t,"'"));let s=a.length>0?"WHERE ".concat(a.join(" AND ")):"";return"\n  \n  SELECT\n    tbl.schemaname,\n    tbl.tablename,\n    tbl.quoted_name,\n    tbl.is_table,\n    json_agg(a) as columns\n  FROM\n    (\n      SELECT\n        n.nspname as schemaname,\n        c.relname as tablename,\n        (quote_ident(n.nspname) || '.' || quote_ident(c.relname)) as quoted_name,\n        true as is_table\n      FROM\n        pg_catalog.pg_class c\n        JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\n      WHERE\n        c.relkind = 'r'\n        AND n.nspname not in ('information_schema', 'pg_catalog', 'pg_toast')\n        AND n.nspname not like 'pg_temp_%'\n        AND n.nspname not like 'pg_toast_temp_%'\n        AND has_schema_privilege(n.oid, 'USAGE') = true\n        AND has_table_privilege(quote_ident(n.nspname) || '.' || quote_ident(c.relname), 'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER') = true\n      union all\n      SELECT\n        n.nspname as schemaname,\n        c.relname as tablename,\n        (quote_ident(n.nspname) || '.' || quote_ident(c.relname)) as quoted_name,\n        false as is_table\n      FROM\n        pg_catalog.pg_class c\n        JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\n      WHERE\n        c.relkind in ('v', 'm')\n        AND n.nspname not in ('information_schema', 'pg_catalog', 'pg_toast')\n        AND n.nspname not like 'pg_temp_%'\n        AND n.nspname not like 'pg_toast_temp_%'\n        AND has_schema_privilege(n.oid, 'USAGE') = true\n        AND has_table_privilege(quote_ident(n.nspname) || '.' || quote_ident(c.relname), 'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER') = true\n    ) as tbl\n    LEFT JOIN (\n      SELECT\n        attrelid,\n        attname,\n        format_type(atttypid, atttypmod) as data_type,\n        attnum,\n        attisdropped\n      FROM\n        pg_attribute\n    ) as a ON (\n      a.attrelid = tbl.quoted_name::regclass\n      AND a.attnum > 0\n      AND NOT a.attisdropped\n      AND has_column_privilege(tbl.quoted_name, a.attname, 'SELECT, INSERT, UPDATE, REFERENCES')\n    )\n  ".concat(s,"\n  GROUP BY schemaname, tablename, quoted_name, is_table;\n").trim()};async function i(e,n){let{projectRef:t,connectionString:a,table:r,schema:i}=e,c=l({table:r,schema:i}),{result:o}=await (0,s.R)({projectRef:t,connectionString:a,sql:c,queryKey:["table-columns",i,r]},n);return o}let c=function(e){let{projectRef:n,connectionString:t,schema:s,table:l}=e,{enabled:c=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.a)(r.A.tableColumns(n,s,l),e=>{let{signal:a}=e;return i({projectRef:n,connectionString:t,schema:s,table:l},a)},{enabled:c&&void 0!==n,...o})}},9258:function(e,n,t){"use strict";t.d(n,{B:function(){return c}});var a=t(23839),s=t(52983),r=t(65483),l=t(29784);let i=e=>(0,a.v1)("schema",a.Oi.withDefault(e)),c=()=>{let{ref:e}=(0,r.UO)(),n=e&&e.length>0&&window.localStorage.getItem(l.dA.LAST_SELECTED_SCHEMA(e))||"public",[t,a]=i((0,s.useMemo)(()=>n,[e]));return(0,s.useEffect)(()=>{e&&e.length>0&&window.localStorage.setItem(l.dA.LAST_SELECTED_SCHEMA(e),t)},[t,e]),{selectedSchema:t,setSelectedSchema:a}}},79133:function(e,n,t){"use strict";t.d(n,{T:function(){return s},s:function(){return a}});let a=["auth","cron","extensions","information_schema","net","pgsodium","pgsodium_masks","pgbouncer","pgtle","realtime","storage","supabase_functions","supabase_migrations","vault","graphql","graphql_public",t(38477).LW],s=a.filter(e=>"extensions"!==e)},16795:function(e,n,t){"use strict";t.d(n,{b:function(){return d}});var a=t(97458),s=t(52983),r=t(80397),l=t(97380),i=t(19570),c=t(79133),o=t(18178);let d=e=>{let{visible:n,onClose:t}=e;return(0,a.jsx)(r.Z,{size:"medium",visible:n,header:"Schemas managed by Supabase",customFooter:(0,a.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,a.jsx)(l.z,{type:"default",onClick:()=>t(),children:"Understood"})}),onCancel:()=>t(),"data-sentry-element":"Modal","data-sentry-component":"ProtectedSchemaModal","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:(0,a.jsxs)(r.Z.Content,{className:"space-y-2","data-sentry-element":"unknown","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,a.jsx)("p",{className:"text-sm",children:"The following schemas are managed by Supabase and are currently protected from write access through the dashboard."}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:c.s.map(e=>(0,a.jsx)("code",{className:"text-xs",children:e},e))}),(0,a.jsx)("p",{className:"text-sm !mt-4",children:"These schemas are critical to the functionality of your Supabase project and hence we highly recommend not altering them."}),(0,a.jsx)("p",{className:"text-sm",children:"You can, however, still interact with those schemas through the SQL Editor although we advise you only do so if you know what you are doing."})]})})};n.Z=e=>{let{schema:n,entity:t}=e,[r,c]=(0,s.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.bZ,{"data-sentry-element":"Alert_Shadcn_","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,a.jsx)(o.Z,{strokeWidth:2,"data-sentry-element":"AlertCircle","data-sentry-source-file":"ProtectedSchemaWarning.tsx"}),(0,a.jsxs)(i.Cd,{"data-sentry-element":"AlertTitle_Shadcn_","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:["Currently viewing ",t," from a protected schema"]}),(0,a.jsxs)(i.X,{"data-sentry-element":"AlertDescription_Shadcn_","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,a.jsxs)("p",{className:"mb-2",children:["The ",(0,a.jsx)("code",{className:"text-xs",children:n})," schema is managed by Supabase and is read-only through the dashboard."]}),(0,a.jsx)(l.z,{type:"default",size:"tiny",onClick:()=>c(!0),"data-sentry-element":"Button","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:"Learn more"})]})]}),(0,a.jsx)(d,{visible:r,onClose:()=>c(!1),"data-sentry-element":"ProtectedSchemaModal","data-sentry-source-file":"ProtectedSchemaWarning.tsx"})]})}},30530:function(e,n,t){"use strict";var a=t(97458),s=t(48426),r=t(85741),l=t(4785),i=t(40654),c=t(11584),o=t(45524),d=t(90013),u=t(67788),m=t(20883);let x=()=>{let e=(0,o.Vm)(),n=(0,s.useRouter)().pathname.split("/")[4],{data:t}=(0,i.H)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),{data:d}=(0,c.F)({projectRef:null==e?void 0:e.ref}),u=void 0!==(null!=t?t:[]).find(e=>"pg_net"===e.name),x=(null==d?void 0:d.selected_addons.find(e=>"pitr"===e.type))!==void 0,h=(0,r.ar)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(l.Q,{page:n,menu:(0,m.i)(e,{pgNetExtensionExists:u,pitrEnabled:x,columnLevelPrivileges:h}),"data-sentry-element":"ProductMenu","data-sentry-source-file":"DatabaseLayout.tsx"})})};n.Z=(0,d.Q)(e=>{let{children:n}=e;return(0,a.jsx)(u.Z,{product:"Database",productMenu:(0,a.jsx)(x,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"DatabaseLayout","data-sentry-source-file":"DatabaseLayout.tsx",children:n})})},43391:function(e,n,t){"use strict";t.d(n,{CG:function(){return b},FW:function(){return u},I7:function(){return x},Lc:function(){return g},RN:function(){return f},Wv:function(){return j},_S:function(){return c},g$:function(){return p},gW:function(){return _},jX:function(){return m},q7:function(){return d},qw:function(){return h},s_:function(){return i},tM:function(){return y},tU:function(){return o},ur:function(){return v},y:function(){return l}});var a=t(97458),s=t(52983),r=t(28453);let l="mx-auto w-full max-w-[1200px]",i="px-4 @lg:px-6 @xl:px-12 @2xl:px-20 @3xl:px-24",c=(0,s.forwardRef)((e,n)=>{let{className:t,bottomPadding:s,size:l="default",...c}=e;return(0,a.jsx)("div",{ref:n,...c,className:(0,r.cn)("mx-auto w-full",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[l],i,s&&"pb-16",t)})}),o=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("header",{...s,ref:n,className:(0,r.cn)("w-full","flex-col gap-3 py-6",t)})}),d=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("h1",{ref:n,...s,className:(0,r.cn)("text-2xl",t)})}),u=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("p",{ref:n,...s,className:(0,r.cn)("text-sm text-foreground-light",t)})}),m=(0,s.forwardRef)((e,n)=>{let{className:t,isFullWidth:s,topPadding:l,...i}=e;return(0,a.jsx)("div",{ref:n,...i,className:(0,r.cn)("flex flex-col first:pt-12 py-6",s?"w-full":"gap-3 lg:grid md:grid-cols-12",t)})}),x=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,r.cn)("w-full h-px bg-border",t)})}),h=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("h3",{ref:n,...s,className:(0,r.cn)("text-foreground text-xl",t)})}),f=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("p",{ref:n,...s,className:(0,r.cn)("text-sm text-foreground-light",t)})}),p=(0,s.forwardRef)((e,n)=>{let{className:t,children:s,title:l,...i}=e;return(0,a.jsxs)("div",{ref:n,...i,className:(0,r.cn)("col-span-4 xl:col-span-5 prose text-sm",t),children:[l&&(0,a.jsx)("h2",{children:l}),s]})}),g=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,r.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",t)})}),y=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,r.cn)("flex flex-col gap-3 items-center",t)})}),j=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,r.cn)("flex w-full items-center",t)})}),v=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,r.cn)("flex flex-row gap-3",t)})}),b=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,r.cn)("flex flex-col gap-3","min-w-[420px]",t)})}),_=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,r.cn)(l,i,"my-8 flex flex-col gap-8",t)})});o.displayName="ScaffoldHeader",d.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",c.displayName="ScaffoldContainer",x.displayName="ScaffoldDivider",m.displayName="ScaffoldSection",b.displayName="ScaffoldColumn",p.displayName="ScaffoldSectionDetail",g.displayName="ScaffoldSectionContent",y.displayName="ScaffoldFilterAndContent",j.displayName="ScaffoldActionsContainer",v.displayName="ScaffoldActionsGroup",_.displayName="ScaffoldContainerLegacy",h.displayName="ScaffoldSectionTitle",f.displayName="ScaffoldSectionDescription"},32073:function(e,n,t){"use strict";t.d(n,{p:function(){return l}});var a=t(97458),s=t(28453),r=t(44658);let l=e=>{let{title:n,description:t,docsUrl:l,actions:i,className:c}=e;return(0,a.jsxs)("div",{className:(0,s.cn)("w-full mb-6 flex flex-col sm:flex-row md:items-center justify-between gap-4 ".concat(c)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"text-foreground text-xl prose",children:n}),t&&(0,a.jsx)("div",{className:"prose text-sm max-w-full",children:t})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row md:items-center gap-x-2",children:[void 0!==l&&(0,a.jsx)(r.G,{href:l}),i]})]})}},2791:function(e,n,t){"use strict";var a=t(97458),s=t(94497),r=t.n(s),l=t(2669),i=t(9085),c=t(97380);n.Z=e=>{let{name:n="",isActive:t,isExternal:s,icon:o,rightIcon:d,url:u="",target:m="_self",onClick:x,textClassName:h="",hoverText:f="",label:p}=e,g=(0,a.jsx)(l.ZP.Item,{icon:o,rounded:!0,active:t,onClick:x,children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,a.jsxs)("div",{title:f||("string"==typeof n?n:""),className:"flex items-center gap-2 truncate w-full "+h,children:[(0,a.jsxs)("span",{className:"truncate",children:[n," "]}),void 0!==p&&(0,a.jsx)(i.C,{variant:"warning",className:"py-0 px-1.5 capitalize",children:p})]}),d&&(0,a.jsx)("div",{children:d})]})});return u?s?(0,a.jsx)(c.z,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:o,children:(0,a.jsx)(r(),{href:u,target:"_blank",rel:"noreferrer",children:n})}):(0,a.jsx)(r(),{href:u,className:"block",target:m,children:g}):g}},50761:function(e,n,t){"use strict";var a=t(97458),s=t(40540),r=t(14647),l=t(29977),i=t(99361),c=t(52983),o=t(59185),d=t(90825),u=t(66092),m=t(97380),x=t(7456),h=t(19570),f=t(61578),p=t(53784),g=t(98174);n.Z=e=>{let{className:n,disabled:t=!1,size:y="tiny",showError:j=!0,selectedSchemaName:v,supportSelectAll:b=!1,excludedSchemas:_=[],onSelectSchema:S,onSelectCreateSchema:N}=e,[w,C]=(0,c.useState)(!1),q=(0,u.Xo)(s.KA.TENANT_SQL_ADMIN_WRITE,"schemas"),{project:E}=(0,o.d2)(),{data:P,isLoading:k,isSuccess:R,isError:T,error:I,refetch:Z}=(0,d.Q1)({projectRef:null==E?void 0:E.ref,connectionString:null==E?void 0:E.connectionString}),A=(P||[]).filter(e=>!_.includes(e.name)).sort((e,n)=>e.name.localeCompare(n.name));return(0,a.jsxs)("div",{className:n,"data-sentry-component":"SchemaSelector","data-sentry-source-file":"SchemaSelector.tsx",children:[k&&(0,a.jsx)(m.z,{type:"default",className:"w-full [&>span]:w-full",size:y,disabled:!0,children:(0,a.jsx)(x.O,{className:"w-full h-3 bg-foreground-muted"})},"schema-selector-skeleton"),j&&T&&(0,a.jsxs)(h.bZ,{variant:"warning",className:"!px-3 !py-3",children:[(0,a.jsx)(h.Cd,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,a.jsxs)(h.X,{className:"text-xs mb-2 break-words",children:["Error: ",null==I?void 0:I.message]}),(0,a.jsx)(m.z,{type:"default",size:"tiny",onClick:()=>Z(),children:"Reload schemas"})]}),R&&(0,a.jsxs)(f.J2,{open:w,onOpenChange:C,modal:!1,children:[(0,a.jsx)(f.xo,{asChild:!0,children:(0,a.jsx)(m.z,{size:y,disabled:t,type:"default","data-testid":"schema-selector",className:"w-full [&>span]:w-full !pr-1 space-x-1",iconRight:(0,a.jsx)(r.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:v?(0,a.jsxs)("div",{className:"w-full flex gap-1",children:[(0,a.jsx)("p",{className:"text-foreground-lighter",children:"schema"}),(0,a.jsx)("p",{className:"text-foreground",children:"*"===v?"All schemas":v})]}):(0,a.jsx)("div",{className:"w-full flex gap-1",children:(0,a.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schema…"})})})}),(0,a.jsx)(f.yk,{className:"p-0 min-w-[200px]",side:"bottom",align:"start",sameWidthAsTrigger:!0,children:(0,a.jsxs)(p.mY,{children:[(0,a.jsx)(p.sZ,{placeholder:"Find schema..."}),(0,a.jsxs)(p.e8,{children:[(0,a.jsx)(p.rb,{children:"No schemas found"}),(0,a.jsx)(p.fu,{children:(0,a.jsxs)(g.xr,{className:(A||[]).length>7?"h-[210px]":"",children:[b&&(0,a.jsxs)(p.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{S("*"),C(!1)},onClick:()=>{S("*"),C(!1)},children:[(0,a.jsx)("span",{children:"All schemas"}),"*"===v&&(0,a.jsx)(l.Z,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==A?void 0:A.map(e=>(0,a.jsxs)(p.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{S(e.name),C(!1)},onClick:()=>{S(e.name),C(!1)},children:[(0,a.jsx)("span",{children:e.name}),v===e.name&&(0,a.jsx)(l.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==N&&q&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.zz,{}),(0,a.jsx)(p.fu,{children:(0,a.jsxs)(p.di,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{N(),C(!1)},onClick:()=>{N(),C(!1)},children:[(0,a.jsx)(i.Z,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}},68492:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ec}});var a=t(97458),s=t(72292),r=t(50663),l=t.n(r),i=t(71635),c=t.n(i),o=t(52983),d=t(34549),u=t(65483),m=t(59185),x=t(51002),h=t(11426),f=t(89),p=t(50761),g=t(79302),y=t(28894),j=t(66822),v=t(44865);let b=e=>{let{schema:n}=e;return'\nSELECT schemaname as "schema",\n  tablename as "table",\n  indexname as "name",\n  indexdef as "definition"\nFROM pg_indexes\nWHERE schemaname = \''.concat(n,"';\n").trim()};async function _(e,n){let{schema:t,projectRef:a,connectionString:s}=e;if(!t)throw Error("schema is required");let r=b({schema:t}),{result:l}=await (0,j.R)({projectRef:a,connectionString:s,sql:r,queryKey:["indexes",t]},n);return l}let S=function(e){let{projectRef:n,connectionString:t,schema:a}=e,{enabled:s=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,y.a)(v.A.indexes(n,a),e=>{let{signal:s}=e;return _({projectRef:n,connectionString:t,schema:a},s)},{enabled:s&&void 0!==n&&void 0!==a,...r})};var N=t(90825),w=t(33325),C=t(9258),q=t(79133),E=t(18178),P=t(96012),k=t(11801),R=t(93658),T=t(97380),I=t(60414),Z=t(10503),A=t(16795),L=t(36457),M=t(14647),z=t(29977),D=t(27082),F=t(94497),W=t.n(F),$=t(42271),O=t(67931),G=t(61578),B=t(53784),V=t(98174),H=t(28453),Q=t(83),U=t(60346),X=t(92641);let J=[{name:"B-Tree",value:"btree",description:"For querying data with equality or range conditions on columns.\nThis is the default index type that Postgres uses."},{name:"Hash",value:"hash",description:"For querying exact matches on columns"},{name:"GiST",value:"gist",description:"For querying complex data types or custom-defined operators"},{name:"SP-GiST",value:"spgist",description:"Similar to GiST, but is more specialized and customizable"},{name:"GIN",value:"gin",description:"For querying multi-valued data such as arrays or full-text search scenarios"},{name:"BRIN",value:"brin",description:"For querying large tables with sorted data"}];var Y=t(45524),K=t(23046),ee=t(44658),en=e=>{var n,t;let{visible:s,onClose:r}=e,l=(0,L.NL)(),{project:i}=(0,m.d2)(),c=(0,Y.Qv)(),[u,x]=(0,o.useState)("public"),[h,p]=(0,o.useState)(void 0),[y,j]=(0,o.useState)([]),[b,_]=(0,o.useState)(J[0].value),[S,C]=(0,o.useState)(!1),[q,E]=(0,o.useState)(!1),[P,k]=(0,o.useState)(""),{data:R}=(0,N.Q1)({projectRef:null==i?void 0:i.ref,connectionString:null==i?void 0:i.connectionString}),{data:Z,isLoading:A}=(0,O.Hp)({schemas:[u],sort:"alphabetical",search:P,projectRef:null==i?void 0:i.ref,connectionString:null==i?void 0:i.connectionString}),{data:F,isLoading:en,isSuccess:et}=(0,$.Kz)({schema:u,table:h,projectRef:null==i?void 0:i.ref,connectionString:null==i?void 0:i.connectionString}),{mutate:ea,isLoading:es}=(0,w.r)({onSuccess:async()=>{await l.invalidateQueries(v.A.indexes(null==i?void 0:i.ref,u)),r(),d.Am.success("Successfully created index")},onError:e=>{d.Am.error("Failed to create index: ".concat(e.message))}}),er=(0,o.useMemo)(()=>(null==Z?void 0:Z.pages.flatMap(e=>e.data.entities))||[],[null==Z?void 0:Z.pages]);function el(e){k(e)}let ei=(null!==(t=null==F?void 0:null===(n=F[0])||void 0===n?void 0:n.columns)&&void 0!==t?t:[]).filter(e=>null!==e).map(e=>({id:e.attname,value:e.attname,name:e.attname,disabled:!1})),ec='\nCREATE INDEX ON "'.concat(u,'"."').concat(h,'" USING ').concat(b," (").concat(y.map(e=>'"'.concat(e,'"')).join(", "),");\n").trim(),eo=()=>{if(!i)return console.error("Project is required");ea({projectRef:i.ref,connectionString:i.connectionString,sql:ec})};(0,o.useEffect)(()=>{s&&(x("public"),p(""),j([]),_(J[0].value))},[s]),(0,o.useEffect)(()=>{p(""),j([]),_(J[0].value)},[u]),(0,o.useEffect)(()=>{j([]),_(J[0].value)},[h]);let ed=0===er.length;return(0,a.jsx)(I.ZP,{size:"large",header:"Create new index",visible:s,onCancel:r,onConfirm:()=>eo(),loading:es,confirmText:"Create index","data-sentry-element":"SidePanel","data-sentry-component":"CreateIndexSidePanel","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)("div",{className:"py-6 space-y-6",children:[(0,a.jsxs)(I.ZP.Content,{className:"space-y-6","data-sentry-element":"unknown","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(X.E,{label:"Select a schema",name:"select-schema",isReactForm:!1,"data-sentry-element":"FormItemLayout","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(G.J2,{modal:!1,open:S,onOpenChange:C,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(G.xo,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(T.z,{type:"default",size:"medium",className:"w-full [&>span]:w-full text-left",iconRight:(0,a.jsx)(M.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),"data-sentry-element":"Button","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:void 0!==u&&""!==u?u:"Choose a schema"})}),(0,a.jsx)(G.yk,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(B.mY,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(B.sZ,{placeholder:"Find table...",value:P,onValueChange:el,"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx"}),(0,a.jsxs)(B.e8,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(B.rb,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:"No schemas found"}),(0,a.jsx)(B.fu,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(V.xr,{className:(R||[]).length>7?"h-[210px]":"","data-sentry-element":"ScrollArea","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(null!=R?R:[]).map(e=>(0,a.jsxs)(B.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{x(e.name),C(!1)},onClick:()=>{x(e.name),C(!1)},children:[(0,a.jsx)("span",{children:e.name}),h===e.name&&(0,a.jsx)(z.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.name))})})]})]})})]})}),(0,a.jsx)(X.E,{label:"Select a table",name:"select-table",description:ed&&!A&&"Create a table in this schema via the Table or SQL editor first",isReactForm:!1,"data-sentry-element":"FormItemLayout","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(G.J2,{modal:!1,open:q,onOpenChange:E,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(G.xo,{asChild:!0,disabled:ed||A,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(T.z,{type:"default",size:"medium",className:(0,H.cn)("w-full [&>span]:w-full text-left",""===h&&"text-foreground-lighter"),iconRight:(0,a.jsx)(M.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),"data-sentry-element":"Button","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:void 0!==h&&""!==h?h:ed?"No tables available in schema":"Choose a table"})}),(0,a.jsx)(G.yk,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(B.mY,{shouldFilter:!1,"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(B.sZ,{placeholder:"Find table...",value:P,onValueChange:el,"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx"}),(0,a.jsxs)(B.e8,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(B.rb,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:A?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-center justify-center",children:[(0,a.jsx)(D.Z,{size:12,className:"animate-spin"}),"Loading..."]}):"No tables found"}),(0,a.jsx)(B.fu,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(V.xr,{className:(er||[]).length>7?"h-[210px]":"","data-sentry-element":"ScrollArea","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(null!=er?er:[]).map(e=>(0,a.jsxs)(B.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{p(e.name),E(!1)},onClick:()=>{p(e.name),E(!1)},children:[(0,a.jsx)("span",{children:e.name}),h===e.name&&(0,a.jsx)(z.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.name))})})]})]})})]})}),h&&(0,a.jsxs)(X.E,{label:"Select up to 32 columns",isReactForm:!1,children:[en&&(0,a.jsx)(g.Z,{className:"py-4"}),et&&(0,a.jsx)(U.m,{options:ei,placeholder:"Choose which columns to create an index on",searchPlaceholder:"Search for a column",value:y,onChange:j})]})]}),y.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.ZP.Separator,{}),(0,a.jsxs)(I.ZP.Content,{className:"space-y-6",children:[(0,a.jsx)(X.E,{label:"Select an index type",name:"selected-index-type",isReactForm:!1,children:(0,a.jsxs)(Q.Ph,{disabled:c,value:b,onValueChange:_,name:"selected-index-type",children:[(0,a.jsx)(Q.i4,{size:"small",children:(0,a.jsx)(Q.ki,{className:"font-mono",children:b})}),(0,a.jsx)(Q.Bw,{children:J.map((e,n)=>(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(Q.Ql,{value:e.value,children:(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)("span",{children:e.name}),e.description.split("\n").map((n,t)=>(0,a.jsx)("span",{className:"text-foreground-lighter group-focus:text-foreground-light group-data-[state=checked]:text-foreground-light",children:n},"".concat(e.value,"-description-").concat(t)))]})}),n<J.length-1&&(0,a.jsx)(Q.U$,{})]},e.name))})]})}),c&&(0,a.jsx)(K.J,{type:"default",className:"!mt-2",title:"OrioleDB currently only supports the B-tree index type",description:"More index types may be supported when OrioleDB is no longer in preview",children:(0,a.jsx)(ee.G,{className:"mt-2",abbrev:!1,href:"https://supabase.com/docs"})})]}),(0,a.jsx)(I.ZP.Separator,{}),(0,a.jsx)(I.ZP.Content,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm",children:"Preview of SQL statement"}),(0,a.jsx)(T.z,{asChild:!0,type:"default",children:(0,a.jsx)(W(),{href:void 0!==i?"/project/".concat(i.ref,"/sql/new?content=").concat(ec):"/",children:"Open in SQL Editor"})})]})}),(0,a.jsx)("div",{className:"h-[200px] !mt-2",children:(0,a.jsx)("div",{className:"relative h-full",children:(0,a.jsx)(f.Z,{isReadOnly:!0,autofocus:!1,id:"".concat(u,"-").concat(h,"-").concat(y.join(","),"-").concat(b),language:"pgsql",defaultValue:ec})})})]})]})})},et=()=>{var e,n;let{project:t}=(0,m.d2)(),{schema:s,table:r}=(0,u.UO)(),[i,y]=(0,o.useState)(""),{selectedSchema:j,setSelectedSchema:v}=(0,C.B)(),[b,_]=(0,o.useState)(!1),[L,M]=(0,o.useState)(),[z,D]=(0,o.useState)(),{data:F,refetch:W,error:$,isLoading:O,isSuccess:G,isError:B}=S({schema:j,projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString}),{data:V,isLoading:H,isSuccess:Q,isError:U}=(0,N.Q1)({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString}),{mutate:X,isLoading:J}=(0,w.r)({onSuccess:async()=>{await W(),D(void 0),d.Am.success("Successfully deleted index")},onError:e=>{d.Am.error("Failed to delete index: ".concat(e.message))}}),[Y]=l()(null!=V?V:[],e=>{var n;return q.s.includes(null!==(n=null==e?void 0:e.name)&&void 0!==n?n:"")}),K=null==V?void 0:V.find(e=>e.name===j),ee=Y.some(e=>e.id===(null==K?void 0:K.id)),et=c()(null!=F?F:[],e=>e.name.toLocaleLowerCase()),ea=i.length>0?et.filter(e=>e.name.includes(i)||e.table.includes(i)):et,es=e=>{if(!t)return console.error("Project is required");X({projectRef:t.ref,connectionString:t.connectionString,sql:'drop index if exists "'.concat(e.name,'"')})};return(0,o.useEffect)(()=>{if(void 0!==s){let e=null==V?void 0:V.find(e=>e.name===s);void 0!==e&&v(e.name)}},[s,Q]),(0,o.useEffect)(()=>{void 0!==r&&y(r)},[r]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"pb-8",children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[H&&(0,a.jsx)(g.Z,{className:"w-[260px]"}),U&&(0,a.jsxs)("div",{className:"w-[260px] text-foreground-light text-sm border px-3 py-1.5 rounded flex items-center space-x-2",children:[(0,a.jsx)(E.Z,{strokeWidth:2,size:16}),(0,a.jsx)("p",{children:"Failed to load schemas"})]}),Q&&(0,a.jsx)(p.Z,{className:"w-full lg:w-[180px]",size:"tiny",showError:!1,selectedSchemaName:j,onSelectSchema:v}),(0,a.jsx)(R.Z,{size:"tiny",value:i,className:"w-full lg:w-52",onChange:e=>y(e.target.value),placeholder:"Search for an index",icon:(0,a.jsx)(P.Z,{size:14}),"data-sentry-element":"Input","data-sentry-source-file":"Indexes.tsx"}),!ee&&(0,a.jsx)(T.z,{className:"ml-auto flex-grow lg:flex-grow-0",type:"primary",onClick:()=>_(!0),disabled:!Q,children:"Create index"})]}),ee&&(0,a.jsx)(A.Z,{schema:j,entity:"indexes"}),O&&(0,a.jsx)(g.A,{}),B&&(0,a.jsx)(h.Z,{error:$,subject:"Failed to retrieve database indexes"}),G&&(0,a.jsx)("div",{className:"w-full overflow-hidden overflow-x-auto",children:(0,a.jsx)(x.Z,{head:[(0,a.jsx)(x.Z.th,{children:"Schema"},"schema"),(0,a.jsx)(x.Z.th,{children:"Table"},"table"),(0,a.jsx)(x.Z.th,{children:"Name"},"name"),(0,a.jsx)(x.Z.th,{},"buttons")],body:(0,a.jsxs)(a.Fragment,{children:[0===et.length&&0===i.length&&(0,a.jsx)(x.Z.tr,{children:(0,a.jsxs)(x.Z.td,{colSpan:4,children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"No indexes created yet"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:['There are no indexes found in the schema "',j,'"']})]})}),0===et.length&&i.length>0&&(0,a.jsx)(x.Z.tr,{children:(0,a.jsxs)(x.Z.td,{colSpan:4,children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',i,'" did not return any results']})]})}),ea.length>0&&ea.map(e=>(0,a.jsxs)(x.Z.tr,{children:[(0,a.jsx)(x.Z.td,{children:(0,a.jsx)("p",{title:e.schema,children:e.schema})}),(0,a.jsx)(x.Z.td,{children:(0,a.jsx)("p",{title:e.table,children:e.table})}),(0,a.jsx)(x.Z.td,{children:(0,a.jsx)("p",{title:e.name,children:e.name})}),(0,a.jsx)(x.Z.td,{children:(0,a.jsxs)("div",{className:"flex justify-end items-center space-x-2",children:[(0,a.jsx)(T.z,{type:"default",onClick:()=>M(e),children:"View definition"}),!ee&&(0,a.jsx)(T.z,{type:"text",className:"px-1",icon:(0,a.jsx)(k.Z,{}),onClick:()=>D(e)})]})})]},e.name))]})})})]})}),(0,a.jsx)(I.ZP,{size:"xlarge",visible:void 0!==L,header:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Index:"}),(0,a.jsx)("code",{className:"text-sm ml-2",children:null==L?void 0:L.name})]}),onCancel:()=>M(void 0),"data-sentry-element":"SidePanel","data-sentry-source-file":"Indexes.tsx",children:(0,a.jsx)("div",{className:"h-full",children:(0,a.jsx)("div",{className:"relative h-full",children:(0,a.jsx)(f.Z,{isReadOnly:!0,id:null!==(e=null==L?void 0:L.name)&&void 0!==e?e:"",language:"pgsql",defaultValue:null!==(n=null==L?void 0:L.definition)&&void 0!==n?n:"","data-sentry-element":"CodeEditor","data-sentry-source-file":"Indexes.tsx"})})})}),(0,a.jsx)(en,{visible:b,onClose:()=>_(!1),"data-sentry-element":"CreateIndexSidePanel","data-sentry-source-file":"Indexes.tsx"}),(0,a.jsx)(Z.Z,{variant:"warning",size:"medium",loading:J,visible:void 0!==z,title:(0,a.jsxs)(a.Fragment,{children:["Confirm to delete index ",(0,a.jsx)("code",{className:"text-sm",children:null==z?void 0:z.name})]}),confirmLabel:"Confirm delete",confirmLabelLoading:"Deleting...",onConfirm:()=>void 0!==z?es(z):{},onCancel:()=>D(void 0),alert:{title:"This action cannot be undone",description:"Deleting an index that is still in use will cause queries to slow down, and in some cases causing significant performance issues."},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"Indexes.tsx",children:(0,a.jsx)("ul",{className:"mt-4 space-y-5",children:(0,a.jsx)("li",{className:"flex gap-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"text-sm",children:"Before deleting this index, consider:"}),(0,a.jsxs)("ul",{className:"space-y-2 mt-2 text-sm text-foreground-light",children:[(0,a.jsx)("li",{className:"list-disc ml-6",children:"This index is no longer in use"}),(0,a.jsx)("li",{className:"list-disc ml-6",children:"The table which the index is on is not currently in use, as dropping an index requires a short exclusive access lock on the table."})]})]})})})})]})},ea=t(30530),es=t(43391),er=t(32073),el=t(30578);let ei=()=>(0,a.jsx)(es._S,{"data-sentry-element":"ScaffoldContainer","data-sentry-component":"IndexesPage","data-sentry-source-file":"indexes.tsx",children:(0,a.jsxs)(es.jX,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"indexes.tsx",children:[(0,a.jsx)(es.Lc,{className:"gap-0","data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"indexes.tsx",children:(0,a.jsx)(er.p,{className:"!mb-0",title:"Database Indexes",description:"Improve query performance against your database","data-sentry-element":"FormHeader","data-sentry-source-file":"indexes.tsx"})}),(0,a.jsxs)(es.g$,{className:"flex items-center lg:justify-end gap-2 flex-wrap","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"indexes.tsx",children:[(0,a.jsx)(ee.G,{className:"no-underline",href:"https://supabase.com/docs/guides/database/query-optimization","data-sentry-element":"DocsButton","data-sentry-source-file":"indexes.tsx"}),(0,a.jsx)(T.z,{asChild:!0,type:"default",icon:(0,a.jsx)(s.Z,{strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"indexes.tsx",children:(0,a.jsx)("a",{target:"_blank",rel:"noreferrer",className:"no-underline",href:"https://supabase.com/docs/guides/database/extensions/index_advisor",children:"Index Advisor"})})]}),(0,a.jsx)("div",{className:"col-span-12 mt-3",children:(0,a.jsx)(et,{"data-sentry-element":"Indexes","data-sentry-source-file":"indexes.tsx"})})]})});ei.getLayout=e=>(0,a.jsx)(el.Z,{children:(0,a.jsx)(ea.Z,{title:"Indexes",children:e})});var ec=ei},35616:function(e,n,t){"use strict";t.d(n,{H:function(){return r},a:function(){return l}});var a=t(97458),s=t(83151);let r=e=>{let{name:n}=e;return(0,a.jsx)("div",{className:"text-typography-body-light [[data-theme*=dark]_&]:text-typography-body-dark flex cursor-not-allowed items-center space-x-2 rounded bg-gray-600 py-0.5 px-2 text-sm","data-sentry-component":"BadgeDisabled","data-sentry-source-file":"Badges.tsx",children:(0,a.jsx)("span",{className:"opacity-50",children:n})})},l=e=>{let{name:n,handleRemove:t}=e;return(0,a.jsxs)("div",{className:"text-typography-body-light [[data-theme*=dark]_&]:text-typography-body-dark flex items-center space-x-2 rounded bg-surface-300 py-0.5 px-2 text-sm",onClick:e=>e.preventDefault(),"data-sentry-component":"BadgeSelected","data-sentry-source-file":"Badges.tsx",children:[(0,a.jsx)("span",{children:n}),(0,a.jsx)(s.Z,{size:12,className:"cursor-pointer opacity-50 transition hover:opacity-100",onClick:e=>{e.preventDefault(),e.stopPropagation(),t()},"data-sentry-element":"X","data-sentry-source-file":"Badges.tsx"})]})}},60346:function(e,n,t){"use strict";t.d(n,{m:function(){return p}});var a=t(97458),s=t(40916),r=t.n(s),l=t(92238),i=t.n(l),c=t(46460),o=t(29977),d=t(52983),u=t(61578),m=t(28453),x=t(53784),h=t(98174),f=t(35616);let p=e=>{let{options:n,value:t,placeholder:s,searchPlaceholder:l="Search for option",disabled:p=!1,onChange:g=()=>{}}=e,[y,j]=(0,d.useState)(!1),[v,b]=(0,d.useState)(t||[]),_=t||v,S=r()(n,["disabled"],["desc"]),N=e=>void 0!==(_||[]).find(n=>n===e.value),w=e=>{let t=N(e)?[...i()(_,e.value)]:[..._.concat([e.value])],a=n.filter(e=>e.disabled).map(e=>e.name),s=[...new Set(t.concat(a))];b(s),g(s)};return(0,a.jsx)("div",{className:p?"pointer-events-none opacity-50":"","data-sentry-component":"MultiSelectV2","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsxs)(u.J2,{open:y,onOpenChange:j,modal:!1,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:[(0,a.jsx)(u.xo,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsxs)("div",{className:(0,m.cn)("relative border border-strong bg-control rounded","flex w-full flex-wrap items-start gap-1.5 p-1.5 cursor-pointer","".concat(0===_.length?"h-9":"")),onClick:()=>j(!0),children:[0===_.length&&s&&(0,a.jsx)("div",{className:"px-2 text-sm text-foreground-light h-full flex items-center",children:s}),_.map((e,n)=>{var t;let s="".concat(e,"-").concat(n),r=S.find(n=>n.value===e),l=null!==(t=null==r?void 0:r.disabled)&&void 0!==t&&t;return r?l?(0,a.jsx)(f.H,{name:r.name},s):(0,a.jsx)(f.a,{name:r.name,handleRemove:()=>w(r)},s):(0,a.jsx)(a.Fragment,{})}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pl-3 pr-2 flex space-x-1 items-center cursor-pointer ",children:(0,a.jsx)(c.Z,{size:16,strokeWidth:2,className:"text-foreground-lighter","data-sentry-element":"ChevronDown","data-sentry-source-file":"MultiSelectV2.tsx"})})]})}),(0,a.jsx)(u.yk,{className:"p-0 w-96 border-strong",side:"bottom",align:"start","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsxs)(x.mY,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:[(0,a.jsx)(x.sZ,{placeholder:l,"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx"}),(0,a.jsxs)(x.e8,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:[(0,a.jsx)(x.rb,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:"No options found"}),(0,a.jsx)(x.fu,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsx)(h.xr,{className:(0,m.cn)(S.length>7?"h-[210px]":""),"data-sentry-element":"ScrollArea","data-sentry-source-file":"MultiSelectV2.tsx",children:null==S?void 0:S.map(e=>{let n=!!(_&&_.find(n=>n===e.value));return(0,a.jsx)(x.di,{value:e.value,className:"cursor-pointer w-full",onClick:()=>w(e),onSelect:()=>w(e),children:(0,a.jsxs)("div",{className:"w-full flex items-center justify-between",children:[e.name,n&&(0,a.jsx)(o.Z,{size:14})]})},e.id)})})})]})]})})]})})}},2669:function(e,n,t){"use strict";t.d(n,{ZP:function(){return m}});var a=t(97458),s=t(52983),r=t(63805),l=t(28453);function i(e){let{children:n,className:t,tag:s="div",style:r}=e;return(0,a.jsx)("".concat(s),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:n})}i.Title=function(e){let{className:n,level:t=1,children:s,style:r}=e;return(0,a.jsx)("h".concat(t),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:s})},i.Text=function(e){let{className:n,children:t,style:s,type:r,disabled:l,mark:i,code:c,keyboard:o,underline:d,strikethrough:u,strong:m,small:x}=e;return c?(0,a.jsx)("code",{style:s,children:t}):i?(0,a.jsx)("mark",{style:s,children:t}):o?(0,a.jsx)("kbd",{style:s,children:t}):m?(0,a.jsx)("strong",{style:s,children:t}):(0,a.jsx)("span",{style:s,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:t})},i.Link=function(e){let{children:n,target:t="_blank",href:s,className:r,onClick:l,style:i}=e;return(0,a.jsx)("a",{onClick:l,href:s,target:t,rel:"noopener noreferrer",style:i,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:n})};let c=(0,s.createContext)({type:"text"}),o=e=>{let{type:n}=e;return(0,a.jsx)(c.Provider,{value:{type:n},"data-sentry-element":"unknown","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},d=()=>{let e=(0,s.useContext)(c);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:n,className:t,ulClassName:s,style:r,type:l="text"}=e;return(0,a.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:t,style:r,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)(o,{type:l,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)("ul",{className:s,children:n})})})}u.Item=function(e){let{children:n,icon:t,active:s,rounded:i,onClick:c,doNotCloseOverlay:o=!1,showActiveBar:u=!1,style:m}=e,x=(0,r.Z)("menu"),{type:h}=d(),f=[x.item.base];f.push(x.item.variants[h].base),s?f.push(x.item.variants[h].active):f.push(x.item.variants[h].normal);let p=[x.item.content.base];s?p.push(x.item.content.active):p.push(x.item.content.normal);let g=[x.item.icon.base];return s?g.push(x.item.icon.active):g.push(x.item.icon.normal),(0,a.jsxs)("li",{role:"menuitem",className:(0,l.cn)("outline-none",f),style:m,onClick:c,"aria-current":s?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[t&&(0,a.jsx)("div",{className:"".concat(g.join(" ")," min-w-fit"),children:t}),(0,a.jsx)("span",{className:p.join(" "),children:n})]})},u.Group=function(e){let{children:n,icon:t,title:s}=e,l=(0,r.Z)("menu"),{type:i}=d();return(0,a.jsxs)("div",{className:[l.group.base,l.group.variants[i]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[t&&(0,a.jsx)("span",{className:l.group.icon,children:t}),(0,a.jsx)("span",{className:l.group.content,children:s}),n]})},u.Misc=function(e){let{children:n}=e;return(0,a.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)(i.Text,{"data-sentry-element":"unknown","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)("span",{children:n})})})};var m=u}},function(e){e.O(0,[6665,3856,6664,588,7037,4605,950,292,2433,7639,3662,436,5582,2585,3356,2269,2019,4637,3545,5538,3829,578,28,7788,9774,2888,179],function(){return e(e.s=99931)}),_N_E=e.O()}]);