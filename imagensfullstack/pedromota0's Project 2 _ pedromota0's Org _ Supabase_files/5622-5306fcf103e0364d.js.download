!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8c5959f3-f631-4568-ac31-5175b7ab415f",e._sentryDebugIdIdentifier="sentry-dbid-8c5959f3-f631-4568-ac31-5175b7ab415f")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5622],{37521:function(e,t,s){s.d(t,{T:function(){return d}});var n=s(36457),r=s(64618),a=s(34549),i=s(68503),l=s(68200);async function o(e){let{projectRef:t,userId:s}=e,{data:n,error:r}=await (0,i.IV)("/platform/auth/{ref}/users/{id}",{params:{path:{ref:t,id:s}}});return r&&(0,i.S3)(r),n}let d=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,n.NL)();return(0,r.D)(e=>o(e),{async onSuccess(t,s,n){let{projectRef:r,skipInvalidation:a=!1}=s;a||await Promise.all([i.invalidateQueries(l.o.usersInfinite(r)),i.invalidateQueries(l.o.usersCount(r))]),await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?a.Am.error("Failed to delete user: ".concat(e.message)):t(e,s,n)},...s})}},98381:function(e,t,s){s.d(t,{x7:function(){return d}});var n=s(90688),r=s(66822),a=s(45524),i=s(29784),l=s(68200);let o=e=>{let{page:t=0,verified:s,keywords:n,providers:r,sort:a,order:i}=e,l=[];if(n&&""!==n){let e=n.replaceAll("'","''");l.push("id::text like '%".concat(e,"%' or email like '%").concat(e,"%' or phone like '%").concat(e,"%'"))}"verified"===s?l.push("email_confirmed_at IS NOT NULL or phone_confirmed_at IS NOT NULL"):"anonymous"===s?l.push("is_anonymous is true"):"unverified"===s&&l.push("email_confirmed_at IS NULL AND phone_confirmed_at IS NULL"),r&&r.length>0&&(r.includes("saml 2.0")?l.push("(select jsonb_agg(case when value ~ '^sso' then 'sso' else value end) from jsonb_array_elements_text((raw_app_meta_data ->> 'providers')::jsonb)) ?| array[".concat(r.map(e=>"saml 2.0"===e?"'sso'":"'".concat(e,"'")).join(", "),"]").trim()):l.push("(raw_app_meta_data->>'providers')::jsonb ?| array[".concat(r.map(e=>"'".concat(e,"'")).join(", "),"]")));let o=l.map(e=>"(".concat(e,")")).join(" and ");return"".concat("\n  select *, coalesce((select array_agg(distinct i.provider) from auth.identities i where i.user_id = auth.users.id), '{}'::text[]) as providers from auth.users\n  ".trim()).concat(l.length>0?" where ".concat(o):"",' order by "').concat(null!=a?a:"created_at",'" ').concat(null!=i?i:"desc"," nulls last limit ").concat(50," offset ").concat(50*t,";")},d=function(e){let{projectRef:t,connectionString:s,keywords:d,filter:c,providers:u,sort:m,order:x}=e,{enabled:f=!0,...h}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=(0,a.Vm)(),v=(null==p?void 0:p.status)===i.S.ACTIVE_HEALTHY;return(0,n.N)(l.o.usersInfinite(t,{keywords:d,filter:c,providers:u,sort:m,order:x}),e=>{let{signal:n,pageParam:a}=e;return(0,r.R)({projectRef:t,connectionString:s,sql:o({page:a,verified:c,keywords:d,providers:u,sort:null!=m?m:"created_at",order:null!=x?x:"desc"}),queryKey:l.o.usersInfinite(t)},n)},{enabled:f&&void 0!==t&&v,getNextPageParam(e,t){let s=t.length;if(e.result.length>=50)return s},...h})}},68370:function(e,t,s){s.d(t,{Z:function(){return a}});var n=s(23430),r=s(52983);let a=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.useMemo)(()=>{var e;let[s,r]=t;if(!(null===(e=s[0])||void 0===e?void 0:e[r]))return{data:s,error:void 0,isError:!1};try{return{data:(0,n.h6)(...t).sort((e,s)=>new Date(e[t[1]])-new Date(s[t[1]])),error:void 0,isError:!1}}catch(e){return{data:[],error:e,isError:!0}}},[JSON.stringify(t[0]),...t])}},62809:function(e,t,s){s.d(t,{k:function(){return l}});var n=s(23839);let r={search:"",timestampStart:"",timestampEnd:"",filters:{}},a=e=>(0,n.jo)({parse:t=>null!=t?t:e,serialize:e=>e||""}),i=e=>(0,n.jo)({parse:t=>{if(!t)return e;try{return JSON.parse(t)}catch(t){return e}},serialize:e=>{if(!e)return"";try{return JSON.stringify(e)}catch(e){return""}}});function l(){let[e,t]=(0,n.v1)("s",a(r.search)),[s,l]=(0,n.v1)("its",a(r.timestampStart)),[o,d]=(0,n.v1)("ite",a(r.timestampEnd)),[c,u]=(0,n.v1)("log",a("")),[m,x]=(0,n.v1)("f",i(r.filters)),f=e||r.search,h=s||r.timestampStart,p=o||r.timestampEnd,v=m||r.filters,y=e=>{t(e||r.search)},g=e=>{x(e||r.filters)};return{search:f,timestampStart:h,timestampEnd:p,selectedLogId:c||null,filters:v,setSearch:y,setTimeRange:(e,t)=>{l(e||r.timestampStart),d(t||r.timestampEnd)},setSelectedLogId:e=>{u(e||"")},setFilters:g,updateFilter:(e,t)=>{g({...v,[e]:t})},reset:()=>{y(r.search),l(r.timestampStart),d(r.timestampEnd),u(""),x(r.filters)}}}},92895:function(e,t,s){s.d(t,{T:function(){return d}});var n=s(97458),r=s(65483),a=s(34549),i=s(37521),l=s(46382),o=s(10503);let d=e=>{var t,s;let{visible:d,selectedUser:c,onClose:u,onDeleteSuccess:m}=e,{ref:x}=(0,r.UO)(),{mutate:f,isLoading:h}=(0,i.T)({onSuccess:()=>{a.Am.success("Successfully deleted ".concat(null==c?void 0:c.email)),null==m||m()}}),p=async()=>(await (0,l.Vs)(200),x)?(null==c?void 0:c.id)===void 0?a.Am.error("Failed to delete user: User ID not found"):void f({projectRef:x,userId:c.id}):console.error("Project ref is required");return(0,n.jsx)(o.Z,{visible:d,variant:"destructive",title:"Confirm to delete user",loading:h,confirmLabel:"Delete",onCancel:()=>u(),onConfirm:()=>p(),alert:{title:"Deleting a user is irreversible",description:"This will remove the selected the user from the project and all associated data."},"data-sentry-element":"ConfirmationModal","data-sentry-component":"DeleteUserModal","data-sentry-source-file":"DeleteUserModal.tsx",children:(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["This is permanent! Are you sure you want to delete the user"," ",null!==(s=null!==(t=null==c?void 0:c.email)&&void 0!==t?t:null==c?void 0:c.phone)&&void 0!==s?s:"this user","?"]})})}},88793:function(e,t,s){s.d(t,{w:function(){return d}});var n=s(97458),r=s(45503),a=s(25835),i=s(28453),l=s(57893),o=s(72424);let d=e=>{var t,s,d;let{user:c}=e,u=(0,o.Gf)(c),m="-"!==u,x=null!==c.phone,f=c.is_anonymous;return(0,n.jsx)("div",{className:(0,i.cn)(l.l),"data-sentry-component":"UserHeader","data-sentry-source-file":"UserHeader.tsx",children:x?(0,n.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,n.jsx)("p",{children:c.phone}),(0,n.jsx)(a.Z,{iconOnly:!0,type:"text",icon:(0,n.jsx)(r.Z,{}),className:"px-1",text:null!==(t=null==c?void 0:c.phone)&&void 0!==t?t:""})]}):f?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:"Anonymous user"}),(0,n.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:c.id}),(0,n.jsx)(a.Z,{iconOnly:!0,type:"text",icon:(0,n.jsx)(r.Z,{}),className:"px-1",text:null!==(s=null==c?void 0:c.id)&&void 0!==s?s:""})]})]}):(0,n.jsxs)(n.Fragment,{children:[m&&(0,n.jsx)("p",{children:u}),(0,n.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,n.jsx)("p",{className:(0,i.cn)(m?"text-foreground-light text-sm":"text-foreground"),children:c.email}),(0,n.jsx)(a.Z,{iconOnly:!0,type:"text",icon:(0,n.jsx)(r.Z,{}),className:"px-1",text:null!==(d=null==c?void 0:c.email)&&void 0!==d?d:""})]})]})})}},94722:function(e,t,s){s.d(t,{KU:function(){return eo},ah:function(){return el},wC:function(){return ei}});var n=s(97458),r=s(40540),a=s(28977),i=s.n(a),l=s(29977),o=s(31964),d=s(48199),c=s(98851),u=s(11801),m=s(83151),x=s(45503),f=s(94497),h=s.n(f),p=s(52983),v=s(34549),y=s(65483),g=s(556),j=s(25835),w=s(43058),b=s(64618),_=s(68503);async function N(e){let{projectRef:t,userId:s}=e,{data:n,error:r}=await (0,_.IV)("/platform/auth/{ref}/users/{id}/factors",{params:{path:{ref:t,id:s}}});return r&&(0,_.S3)(r),n}let S=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,b.D)(e=>N(e),{async onSuccess(t,s,n){await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?v.Am.error("Failed to delete the user's MFA factors: ".concat(e.message)):t(e,s,n)},...s})};async function C(e){let{projectRef:t,user:s}=e,{data:n,error:r}=await (0,_.v_)("/platform/auth/{ref}/recover",{params:{path:{ref:t}},body:{email:s.email}});return r&&(0,_.S3)(r),n}let U=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,b.D)(e=>C(e),{async onSuccess(t,s,n){await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?v.Am.error("Failed to reset user password: ".concat(e.message)):t(e,s,n)},...s})};async function k(e){let{projectRef:t,user:s}=e,{data:n,error:r}=await (0,_.v_)("/platform/auth/{ref}/magiclink",{params:{path:{ref:t}},body:{email:s.email}});return r&&(0,_.S3)(r),n}let A=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,b.D)(e=>k(e),{async onSuccess(t,s,n){await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?v.Am.error("Failed to send magic link: ".concat(e.message)):t(e,s,n)},...s})};async function T(e){let{projectRef:t,user:s}=e,{data:n,error:r}=await (0,_.v_)("/platform/auth/{ref}/otp",{params:{path:{ref:t}},body:{phone:s.phone}});return r&&(0,_.S3)(r),n}let D=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,b.D)(e=>T(e),{async onSuccess(t,s,n){await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?v.Am.error("Failed to send magic link: ".concat(e.message)):t(e,s,n)},...s})};var L=s(36457),z=s(68200);async function O(e){let{projectRef:t,userId:s,banDuration:n}=e,{data:r,error:a}=await (0,_.r$)("/platform/auth/{ref}/users/{id}",{params:{path:{ref:t,id:s}},body:{ban_duration:"number"==typeof n?"".concat(n,"h"):n}});return a&&(0,_.S3)(a),r}let M=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,L.NL)();return(0,b.D)(e=>O(e),{async onSuccess(t,s,r){let{projectRef:a}=s;await n.invalidateQueries(z.o.usersInfinite(a)),await (null==e?void 0:e(t,s,r))},async onError(e,s,n){void 0===t?v.Am.error("Failed to update user: ".concat(e.message)):t(e,s,n)},...s})};var P=s(66092),E=s(29784),Z=s(46382),I=s(28453),F=s(42738),R=s(97380),B=s(23046),W=s(10503),H=s(73630),q=s(90330),X=s(86848),V=s(5394),G=s(80397),K=s(2765),Q=s(96990),Y=s(83),J=s(92641);let $=e=>{let{visible:t,user:s,onClose:r}=e,{ref:a}=(0,y.UO)(),{mutate:l,isLoading:o}=M({onSuccess:(e,t)=>{let s=i()().add(Number(t.banDuration),"hours").format("DD MMM YYYY HH:mm (ZZ)");v.Am.success("User banned successfully until ".concat(s)),r()}}),d=V.Ry({value:V.Z_().min(1,{message:"Please provide a duration"}),unit:V.Km(["hours","days"])}),c={value:"24",unit:"hours"},u=(0,X.cI)({mode:"onBlur",reValidateMode:"onChange",resolver:(0,q.F)(d),defaultValues:c}),{value:m,unit:x}=u.watch(),f=i()().add(Number(m),x).format("DD MMM YYYY HH:mm (ZZ)");return(0,p.useEffect)(()=>{t&&u.reset(c)},[t]),(0,n.jsx)(G.Z,{hideFooter:!0,visible:t,size:"small",header:"Confirm to ban user",onCancel:()=>r(),"data-sentry-element":"Modal","data-sentry-component":"BanUserModal","data-sentry-source-file":"BanUserModal.tsx",children:(0,n.jsx)(K.l0,{...u,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"BanUserModal.tsx",children:(0,n.jsxs)("form",{onSubmit:u.handleSubmit(e=>{if(void 0===a)return console.error("Project ref is required");if(void 0===s.id)return v.Am.error("Failed to ban user: User ID not found");let t="hours"===e.unit?Number(e.value):24*Number(e.value);l({projectRef:a,userId:s.id,banDuration:t})}),children:[(0,n.jsxs)(G.Z.Content,{className:"flex flex-col gap-y-3","data-sentry-element":"unknown","data-sentry-source-file":"BanUserModal.tsx",children:[(0,n.jsx)("p",{className:"text-sm",children:"This will revoke the user's access to your project and prevent them from logging in for a specified duration."}),(0,n.jsxs)("div",{className:"flex items-start gap-x-2 [&>div:first-child]:flex-grow",children:[(0,n.jsx)(K.Wi,{control:u.control,name:"value",render:e=>{let{field:t}=e;return(0,n.jsx)(J.E,{className:"[&>div>div]:mt-0",label:"Set a ban duration",children:(0,n.jsx)(K.NI,{children:(0,n.jsx)(Q.I,{...t})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"BanUserModal.tsx"}),(0,n.jsx)(K.Wi,{control:u.control,name:"unit",render:e=>{let{field:t}=e;return(0,n.jsx)(J.E,{className:"[&>div>div]:mt-0 mt-[33px]",children:(0,n.jsx)(K.NI,{children:(0,n.jsxs)(Y.Ph,{...t,value:t.value,onValueChange:e=>u.setValue("unit",e),children:[(0,n.jsx)(Y.i4,{className:"capitalize w-24",children:t.value}),(0,n.jsxs)(Y.Bw,{children:[(0,n.jsx)(Y.Ql,{value:"hours",children:"Hours"}),(0,n.jsx)(Y.Ql,{value:"days",children:"Days"})]})]})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"BanUserModal.tsx"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-foreground-lighter",children:"This user will not be able to log in until:"}),(0,n.jsx)("p",{className:(0,I.cn)("text-sm",!m&&"text-foreground-light"),children:m?f:"Invalid duration set"})]})]}),(0,n.jsx)(F.Z,{"data-sentry-element":"Separator","data-sentry-source-file":"BanUserModal.tsx"}),(0,n.jsxs)(G.Z.Content,{className:"flex justify-end gap-2","data-sentry-element":"unknown","data-sentry-source-file":"BanUserModal.tsx",children:[(0,n.jsx)(R.z,{type:"default",disabled:o,onClick:()=>r(),"data-sentry-element":"Button","data-sentry-source-file":"BanUserModal.tsx",children:"Cancel"}),(0,n.jsx)(R.z,{type:"warning",htmlType:"submit",loading:o,"data-sentry-element":"Button","data-sentry-source-file":"BanUserModal.tsx",children:"Confirm ban"})]})]})})})};var ee=s(92895),et=s(88793),es=s(57893),en=s(72424);let er="DD MMM, YYYY HH:mm",ea=(0,I.cn)("bg-surface-100 border-default text-foreground flex items-center justify-between","gap-x-4 border px-5 py-4 text-sm first:rounded-tr first:rounded-tl last:rounded-br last:rounded-bl"),ei=e=>{var t,s,a,m,x;let{user:f,onDeleteSuccess:g}=e,{ref:j}=(0,y.UO)(),b=null!==f.email,_=null!==f.phone,N=null!==f.banned_until,C=(null!==(s=null===(t=f.raw_app_meta_data)||void 0===t?void 0:t.providers)&&void 0!==s?s:[]).map(e=>({name:e.startsWith("sso")?"SAML":e,icon:"email"===e?"".concat(E.GW,"/img/icons/email-icon2.svg"):en.Bn[e]?"".concat(E.GW,"/img/icons/").concat(en.Bn[e],".svg"):void 0})),k=(0,P.Xo)(r.KA.AUTH_EXECUTE,"*"),T=(0,P.Xo)(r.KA.AUTH_EXECUTE,"send_magic_link"),L=(0,P.Xo)(r.KA.AUTH_EXECUTE,"send_recovery"),z=(0,P.Xo)(r.KA.AUTH_EXECUTE,"send_otp"),O=(0,P.Xo)(r.KA.TENANT_SQL_DELETE,"auth.users"),q=(0,P.Xo)(r.KA.TENANT_SQL_DELETE,"auth.mfa_factors"),[X,V]=(0,p.useState)(),[G,K]=(0,p.useState)(!1),[Q,Y]=(0,p.useState)(!1),[J,ei]=(0,p.useState)(!1),[ed,ec]=(0,p.useState)(!1),{data:eu}=(0,w.$E)({projectRef:j}),em=null!==(a=null==eu?void 0:eu.MAILER_OTP_EXP)&&void 0!==a?a:0,ex=Math.floor(em/60),ef=Math.floor(em%60),eh="".concat(em>60?"".concat(ex," minute").concat(ex>1?"s":""," ").concat(ef>0?"and":""," "):"").concat(ef>0?"".concat(ef," second").concat(ef>1?"s":""):""),{mutate:ep,isLoading:ev}=U({onSuccess:(e,t)=>{V("send_recovery"),v.Am.success("Sent password recovery to ".concat(t.user.email))},onError:e=>{v.Am.error("Failed to send password recovery: ".concat(e.message))}}),{mutate:ey,isLoading:eg}=A({onSuccess:(e,t)=>{V("send_magic_link"),v.Am.success("Sent magic link to ".concat(t.user.email))},onError:e=>{v.Am.error("Failed to send magic link: ".concat(e.message))}}),{mutate:ej,isLoading:ew}=D({onSuccess:(e,t)=>{V("send_otp"),v.Am.success("Sent OTP to ".concat(t.user.phone))},onError:e=>{v.Am.error("Failed to send OTP: ".concat(e.message))}}),{mutate:eb}=S({onSuccess:()=>{v.Am.success("Successfully deleted the user's factors"),ec(!1)}}),{mutate:e_,isLoading:eN}=M({onSuccess:()=>{v.Am.success("Successfully unbanned user"),Y(!1)}}),eS=async()=>{if(await (0,Z.Vs)(200),!j)return console.error("Project ref is required");eb({projectRef:j,userId:f.id})},eC=()=>void 0===j?console.error("Project ref is required"):void 0===f.id?v.Am.error("Failed to ban user: User ID not found"):void e_({projectRef:j,userId:f.id,banDuration:"none"});return(0,p.useEffect)(()=>{if(void 0!==X){let e=setTimeout(()=>V(void 0),5e3);return()=>clearTimeout(e)}},[X]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(et.w,{user:f,"data-sentry-element":"UserHeader","data-sentry-source-file":"UserOverview.tsx"}),N?(0,n.jsx)(B.J,{type:"warning",label:"User banned until ".concat(i()(f.banned_until).format(er)),className:"border-r-0 border-l-0 rounded-none -mt-px [&_svg]:ml-0.5 mb-0"}):(0,n.jsx)(F.Z,{}),(0,n.jsxs)("div",{className:(0,I.cn)("flex flex-col gap-y-1",es.l),children:[(0,n.jsx)(el,{property:"User UID",value:f.id,"data-sentry-element":"RowData","data-sentry-source-file":"UserOverview.tsx"}),(0,n.jsx)(el,{property:"Created at",value:f.created_at?i()(f.created_at).format(er):void 0,"data-sentry-element":"RowData","data-sentry-source-file":"UserOverview.tsx"}),(0,n.jsx)(el,{property:"Updated at",value:f.updated_at?i()(f.updated_at).format(er):void 0,"data-sentry-element":"RowData","data-sentry-source-file":"UserOverview.tsx"}),(0,n.jsx)(el,{property:"Invited at",value:f.invited_at,"data-sentry-element":"RowData","data-sentry-source-file":"UserOverview.tsx"}),(0,n.jsx)(el,{property:"Confirmation sent at",value:f.confirmation_sent_at,"data-sentry-element":"RowData","data-sentry-source-file":"UserOverview.tsx"}),(0,n.jsx)(el,{property:"Confirmed at",value:f.confirmed_at?i()(f.confirmed_at).format(er):void 0,"data-sentry-element":"RowData","data-sentry-source-file":"UserOverview.tsx"}),(0,n.jsx)(el,{property:"Last signed in",value:f.last_sign_in_at?i()(f.last_sign_in_at).format(er):void 0,"data-sentry-element":"RowData","data-sentry-source-file":"UserOverview.tsx"}),(0,n.jsx)(el,{property:"SSO",value:f.is_sso_user,"data-sentry-element":"RowData","data-sentry-source-file":"UserOverview.tsx"})]}),(0,n.jsxs)("div",{className:(0,I.cn)("flex flex-col !pt-0",es.l),children:[(0,n.jsx)("p",{children:"Provider Information"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"The user has the following providers"})]}),(0,n.jsx)("div",{className:(0,I.cn)("flex flex-col -space-y-1 !pt-0",es.l),children:C.map(e=>{var t,s,r;let a=H.Wm.find(t=>"key"in t&&t.key===e.name||t.title.toLowerCase()===e.name),i=Object.keys(null!==(t=null==a?void 0:a.properties)&&void 0!==t?t:{}).find(e=>e.toLowerCase().endsWith("_enabled")),o="email"===e.name?e.name.toLowerCase():null!==(s=null==a?void 0:a.title)&&void 0!==s?s:e.name,d=null!==(r=null==eu?void 0:eu[i])&&void 0!==r&&r;return(0,n.jsxs)("div",{className:(0,I.cn)(ea,"items-start justify-start"),children:[e.icon&&(0,n.jsx)("img",{width:16,src:e.icon,alt:"".concat(e.name," auth icon"),className:(0,I.cn)("mt-1.5","github"===e.name?"dark:invert":"")}),(0,n.jsxs)("div",{className:"flex-grow mt-0.5",children:[(0,n.jsx)("p",{className:"capitalize",children:o}),(0,n.jsxs)("p",{className:"text-xs text-foreground-light",children:["Signed in with a ",o," account via"," ","SAML"===o?"SSO":"OAuth"]}),(0,n.jsx)(R.z,{asChild:!0,type:"default",className:"mt-2",children:(0,n.jsxs)(h(),{href:"/project/".concat(j,"/auth/providers?provider=").concat("SAML"===e.name?"SAML 2.0":e.name),children:["Configure ",o," provider"]})})]}),d?(0,n.jsxs)("div",{className:"flex items-center gap-1 rounded-full border border-brand-400 bg-brand-200 py-1 px-1 text-xs text-brand",children:[(0,n.jsx)("span",{className:"rounded-full bg-brand p-0.5 text-xs text-brand-200",children:(0,n.jsx)(l.Z,{strokeWidth:2,size:12})}),(0,n.jsx)("span",{className:"px-1",children:"Enabled"})]}):(0,n.jsx)("div",{className:"rounded-md border border-strong bg-surface-100 py-1 px-3 text-xs text-foreground-lighter",children:"Disabled"})]},e.name)})}),(0,n.jsx)(F.Z,{"data-sentry-element":"Separator","data-sentry-source-file":"UserOverview.tsx"}),(0,n.jsxs)("div",{className:(0,I.cn)("flex flex-col -space-y-1",es.l),children:[b&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eo,{title:"Reset password",description:"Send a password recovery email to the user",button:{icon:(0,n.jsx)(o.Z,{}),text:"Send password recovery",isLoading:ev,disabled:!L,onClick:()=>{j&&ep({projectRef:j,user:f})}},success:"send_recovery"===X?{title:"Password recovery sent",description:"The link in the email is valid for ".concat(eh)}:void 0}),(0,n.jsx)(eo,{title:"Send magic link",description:"Passwordless login via email for the user",button:{icon:(0,n.jsx)(o.Z,{}),text:"Send magic link",isLoading:eg,disabled:!T,onClick:()=>{j&&ey({projectRef:j,user:f})}},success:"send_magic_link"===X?{title:"Magic link sent",description:"The link in the email is valid for ".concat(eh)}:void 0})]}),_&&(0,n.jsx)(eo,{title:"Send OTP",description:"Passwordless login via phone for the user",button:{icon:(0,n.jsx)(o.Z,{}),text:"Send OTP",isLoading:ew,disabled:!z,onClick:()=>{j&&ej({projectRef:j,user:f})}},success:"send_otp"===X?{title:"OTP sent",description:"The link in the OTP SMS is valid for ".concat(eh)}:void 0})]}),(0,n.jsx)(F.Z,{"data-sentry-element":"Separator","data-sentry-source-file":"UserOverview.tsx"}),(0,n.jsxs)("div",{className:(0,I.cn)("flex flex-col",es.l),children:[(0,n.jsx)("p",{children:"Danger zone"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Be wary of the following features as they cannot be undone."})]}),(0,n.jsxs)("div",{className:(0,I.cn)("flex flex-col -space-y-1 !pt-0",es.l),children:[(0,n.jsx)(eo,{title:"Remove MFA factors",description:"Removes all MFA factors associated with the user",button:{icon:(0,n.jsx)(d.Z,{}),text:"Remove MFA factors",disabled:!q,onClick:()=>ec(!0)},className:"!bg border-destructive-400","data-sentry-element":"RowAction","data-sentry-source-file":"UserOverview.tsx"}),(0,n.jsx)(eo,{title:N?"User is banned until ".concat(i()(f.banned_until).format(er)):"Ban user",description:N?"User has no access to the project until after this date":"Revoke access to the project for a set duration",button:{icon:(0,n.jsx)(c.Z,{}),text:N?"Unban user":"Ban user",disabled:!k,onClick:()=>{N?Y(!0):K(!0)}},className:"!bg border-destructive-400","data-sentry-element":"RowAction","data-sentry-source-file":"UserOverview.tsx"}),(0,n.jsx)(eo,{title:"Delete user",description:"User will no longer have access to the project",button:{icon:(0,n.jsx)(u.Z,{}),type:"danger",text:"Delete user",disabled:!O,onClick:()=>ei(!0)},className:"!bg border-destructive-400","data-sentry-element":"RowAction","data-sentry-source-file":"UserOverview.tsx"})]})]}),(0,n.jsx)(ee.T,{visible:J,selectedUser:f,onClose:()=>ei(!1),onDeleteSuccess:()=>{ei(!1),g()},"data-sentry-element":"DeleteUserModal","data-sentry-source-file":"UserOverview.tsx"}),(0,n.jsx)(W.Z,{visible:ed,variant:"warning",title:"Confirm to remove MFA factors",confirmLabel:"Remove factors",confirmLabelLoading:"Removing",onCancel:()=>ec(!1),onConfirm:()=>eS(),alert:{base:{variant:"warning"},title:"Removing MFA factors will drop the user's authentication assurance level (AAL) to AAL1",description:"Note that this does not sign the user out"},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"UserOverview.tsx",children:(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Are you sure you want to remove the MFA factors for the user"," ",(0,n.jsx)("span",{className:"text-foreground",children:null!==(x=null!==(m=f.email)&&void 0!==m?m:f.phone)&&void 0!==x?x:"this user"}),"?"]})}),(0,n.jsx)($,{visible:G,user:f,onClose:()=>K(!1),"data-sentry-element":"BanUserModal","data-sentry-source-file":"UserOverview.tsx"}),(0,n.jsx)(W.Z,{variant:"warning",visible:Q,title:"Confirm to unban user",loading:eN,confirmLabel:"Unban user",confirmLabelLoading:"Unbanning",onCancel:()=>Y(!1),onConfirm:()=>eC(),"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"UserOverview.tsx",children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"The user will have access to your project again once unbanned. Are you sure you want to unban this user?"})})]})},el=e=>{let{property:t,value:s}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center gap-x-2 group justify-between",children:[(0,n.jsx)("p",{className:" text-foreground-lighter text-xs",children:t}),"boolean"==typeof s?(0,n.jsx)("div",{className:"h-[26px] flex items-center justify-center min-w-[70px]",children:s?(0,n.jsx)("div",{className:"rounded-full w-4 h-4 dark:bg-white bg-black flex items-center justify-center",children:(0,n.jsx)(l.Z,{size:10,className:"text-contrast",strokeWidth:4})}):(0,n.jsx)("div",{className:"rounded-full w-4 h-4 dark:bg-white bg-black flex items-center justify-center",children:(0,n.jsx)(m.Z,{size:10,className:"text-contrast",strokeWidth:4})})}):(0,n.jsxs)("div",{className:"flex items-center gap-x-2 h-[26px] font-mono min-w-[40px]",children:[(0,n.jsx)("p",{className:"text-xs",children:s||"-"}),!!s&&(0,n.jsx)(j.Z,{iconOnly:!0,type:"text",icon:(0,n.jsx)(x.Z,{}),className:"transition opacity-0 group-hover:opacity-100 px-1",text:s})]})]}),(0,n.jsx)(F.Z,{"data-sentry-element":"Separator","data-sentry-source-file":"UserOverview.tsx"})]})},eo=e=>{var t,s,r;let{title:a,description:i,button:o,success:d,className:c}=e,u=null!==(t=null==o?void 0:o.disabled)&&void 0!==t&&t;return(0,n.jsxs)("div",{className:(0,I.cn)(ea,c),"data-sentry-component":"RowAction","data-sentry-source-file":"UserOverview.tsx",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:d?d.title:a}),(0,n.jsx)("p",{className:"text-xs text-foreground-light",children:d?d.description:i})]}),(0,n.jsx)(g.u,{type:null!==(s=null==o?void 0:o.type)&&void 0!==s?s:"default",icon:d?(0,n.jsx)(l.Z,{className:"text-brand"}):o.icon,loading:null!==(r=o.isLoading)&&void 0!==r&&r,onClick:o.onClick,disabled:u,tooltip:{content:{side:"bottom",text:u?"You need additional permissions to ".concat(o.text.toLowerCase()):void 0}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"UserOverview.tsx",children:o.text})]})}},57893:function(e,t,s){s.d(t,{l:function(){return A},i:function(){return T}});var n=s(97458),r=s(2394),a=s(83151),i=s(52983),l=s(10024),o=s(97380),d=s(81461),c=s(28453),u=s(96990),m=s(94722),x=s(14398),f=s(72292),h=s(94497),p=s.n(h),v=s(65483),y=s(49411),g=s(79302),j=s(30728),w=s(42738),b=s(33471),_=s(23046),N=s(98419),S=s(88793),C=s(556),U=s(62809);let k=e=>{let{user:t}=e,{ref:s}=(0,v.UO)(),{filters:r,setFilters:a}=(0,U.k)(),{logData:l,isSuccess:d,isLoading:u,refresh:m}=(0,j.Z)({projectRef:s,table:y.ae.auth,filterOverride:{search_query:t.id},limit:5});return(0,i.useEffect)(()=>{t.id&&a({...r,search_query:t.id})},[t.id]),(0,n.jsxs)("div",{"data-sentry-component":"UserLogs","data-sentry-source-file":"UserLogs.tsx",children:[(0,n.jsx)(S.w,{user:t,"data-sentry-element":"UserHeader","data-sentry-source-file":"UserLogs.tsx"}),(0,n.jsx)(w.Z,{"data-sentry-element":"Separator","data-sentry-source-file":"UserLogs.tsx"}),(0,n.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-y-3",A),children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:"Authentication logs"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Latest logs from authentication for this user in the past hour"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(o.z,{type:"status_code"in r?"default":"secondary",className:"rounded-r-none border-r-0",disabled:u,onClick:()=>a({search_query:t.id}),"data-sentry-element":"Button","data-sentry-source-file":"UserLogs.tsx",children:"Show all"}),(0,n.jsx)("div",{className:"border-button border border-l-0 py-3"}),(0,n.jsx)(o.z,{type:"status_code"in r?"secondary":"default",className:"rounded-l-none border-l-0",disabled:u,onClick:()=>a({search_query:t.id,status_code:{client_error:!0,server_error:!0}}),"data-sentry-element":"Button","data-sentry-source-file":"UserLogs.tsx",children:"Error only"})]}),(0,n.jsx)(o.z,{type:"default",loading:u,disabled:u,icon:(0,n.jsx)(x.Z,{}),onClick:()=>m(),"data-sentry-element":"Button","data-sentry-source-file":"UserLogs.tsx",children:"Refresh"})]}),u&&!d?(0,n.jsx)(g.A,{}):0===l.length?(0,n.jsx)(_.J,{type:"note",title:"No authentication logs available for this user",description:"Auth events such as logging in will be shown here"}):(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"border border-b-0 rounded-t-md divide-y overflow-hidden",children:l.map(e=>{var t;let r=(null!==(t=e.status)&&void 0!==t?t:"-").toString(),a=r.startsWith("4"),i=r.startsWith("5");return(0,n.jsxs)("div",{className:"flex items-center transition font-mono px-2 py-1.5 bg-surface-100 divide-x",children:[(0,n.jsx)("p",{className:"text-xs text-foreground-light min-w-[125px] w-[125px] px-1",children:(0,n.jsx)(N.c,{utcTimestamp:e.timestamp/1e3})}),(0,n.jsx)("div",{className:"flex items-center text-xs text-foreground-light h-[22px] min-w-[70px] w-[70px] px-2",children:(0,n.jsxs)("div",{className:(0,c.cn)("flex items-center justify-center gap-x-1",!!e.status&&"border px-1 py-0.5 rounded",a?"text-warning border-warning bg-warning-300":i?"text-destructive border-destructive bg-destructive-300":""),children:[(a||i)&&(0,n.jsx)(b.ku,{hideBackground:!0,className:(0,c.cn)(a&&"text-warning-600")}),r]})}),(0,n.jsxs)("p",{className:"group relative flex items-center py-1.5 text-xs text-foreground-light px-2 truncate w-full",children:["".concat(e.path," | ").concat(e.msg),(0,n.jsx)(C.u,{type:"outline",asChild:!0,tooltip:{content:{text:"Open in logs"}},className:"px-1.5 absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition bg-background focus-visible:opacity-100",children:(0,n.jsx)(p(),{href:"/project/".concat(s,"/logs/auth-logs?log=").concat(e.id),children:(0,n.jsx)(f.Z,{size:"12",className:"text-foreground-light"})})})]})]},e.id)})}),(0,n.jsx)(o.z,{block:!0,asChild:!0,type:"outline",className:"transition rounded-t-none text-foreground-light hover:text-foreground",children:(0,n.jsx)(p(),{href:"/project/".concat(s,"/logs/auth-logs?s=").concat(t.id),children:"See more logs"})})]})]})]})},A="px-5 py-5",T=e=>{let{selectedUser:t,onClose:s}=e,[x,f]=(0,i.useState)("overview"),[h,p]=(0,i.useState)(""),v=t?Object.entries(t).filter(e=>{let[t,s]=e;return t.toLowerCase().includes(h.toLowerCase())||"string"==typeof s&&s.toLowerCase().includes(h.toLowerCase())}).reduce((e,t)=>{let[s,n]=t;return void 0!==n&&(e[s]=n),e},{}):{};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Dp,{withHandle:!0,"data-sentry-element":"ResizableHandle","data-sentry-source-file":"UserPanel.tsx"}),(0,n.jsxs)(l.ee,{defaultSize:30,maxSize:45,minSize:30,className:"bg-studio border-t","data-sentry-element":"ResizablePanel","data-sentry-source-file":"UserPanel.tsx",children:[(0,n.jsx)(o.z,{type:"text",className:"absolute top-3 right-3 px-1",icon:(0,n.jsx)(a.Z,{}),onClick:()=>s(),"data-sentry-element":"Button","data-sentry-source-file":"UserPanel.tsx"}),(0,n.jsxs)(d.mQ,{value:x,className:"flex flex-col h-full",onValueChange:e=>f(e),"data-sentry-element":"Tabs_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:[(0,n.jsxs)(d.dr,{className:"px-5 flex gap-x-4 min-h-[46px]","data-sentry-element":"TabsList_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:[(0,n.jsx)(d.SP,{value:"overview",className:"px-0 pb-0 h-full text-xs  data-[state=active]:bg-transparent !shadow-none","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:"Overview"}),(0,n.jsx)(d.SP,{value:"logs",className:"px-0 pb-0 h-full text-xs data-[state=active]:bg-transparent !shadow-none","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:"Logs"}),(0,n.jsx)(d.SP,{value:"raw",className:"px-0 pb-0 h-full text-xs data-[state=active]:bg-transparent !shadow-none","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:"Raw JSON"})]}),(0,n.jsx)(d.nU,{value:"overview",className:(0,c.cn)("mt-0 flex-grow min-h-0 overflow-y-auto"),"data-sentry-element":"TabsContent_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:t&&(0,n.jsx)(m.wC,{user:t,onDeleteSuccess:s})}),(0,n.jsx)(d.nU,{value:"logs",className:(0,c.cn)("mt-0 flex-grow min-h-0 overflow-y-auto"),"data-sentry-element":"TabsContent_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:t&&(0,n.jsx)(k,{user:t})}),(0,n.jsxs)(d.nU,{value:"raw",className:(0,c.cn)("mt-0 flex-grow min-h-0 overflow-y-auto",A),"data-sentry-element":"TabsContent_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:[(0,n.jsxs)("div",{className:"flex items-center mb-2",children:[(0,n.jsx)(u.I,{autoFocus:!0,type:"text",placeholder:"Filter...",value:h,onChange:e=>p(e.target.value),className:"mr-2","data-sentry-element":"Input_Shadcn_","data-sentry-source-file":"UserPanel.tsx"}),(0,n.jsx)(o.z,{type:"text",disabled:!h,onClick:()=>p(""),className:"text-xs","data-sentry-element":"Button","data-sentry-source-file":"UserPanel.tsx",children:"Clear"})]}),(0,n.jsx)(r.c,{className:"javascript","data-sentry-element":"SimpleCodeBlock","data-sentry-source-file":"UserPanel.tsx",children:JSON.stringify(v,null,2)})]})]})]})]})}},72424:function(e,t,s){s.d(t,{Rs:function(){return P},Bi:function(){return U},E$:function(){return M},Gf:function(){return O},KG:function(){return C},Bn:function(){return T}});var n=s(97458),r=s(28977),a=s.n(r),i=s(19186),l=s(14471),o=s(11801),d=s(44914),c=s(29784),u=s(46382),m=s(71117),x=s(28453),f=s(93114),h=s(73630),p=s(46460),v=s(88428),y=s(73936),g=s(52983),j=s(15357),w=s(97380);let b=e=>{let{col:t,setSortByValue:s}=e,r=(0,g.useRef)(0),[a,i]=(0,g.useState)(!1);return(0,g.useEffect)(()=>{r.current=Number(new Date)},[a]),(0,n.jsxs)("div",{className:"flex items-center justify-between font-normal text-xs w-full","data-sentry-component":"HeaderCell","data-sentry-source-file":"UsersGridComponents.tsx",children:[(0,n.jsx)("div",{className:"flex items-center gap-x-2",children:(0,n.jsx)("p",{className:"!text-foreground",children:t.name})}),["created_at","email","phone"].includes(t.id)&&(0,n.jsxs)(j.h_,{open:a,onOpenChange:e=>{!1===e&&Number(new Date)-r.current>100&&i(e)},children:[(0,n.jsx)(j.$F,{asChild:!0,children:(0,n.jsx)(w.z,{type:"text",icon:(0,n.jsx)(p.Z,{}),className:"p-0 h-5 w-5",onClick:()=>i(!a)})}),(0,n.jsxs)(j.AW,{className:"w-36",children:[(0,n.jsxs)(j.Xi,{className:"flex items-center gap-x-2",onClick:()=>{i(!1),s("".concat(t.id,":desc"))},children:[(0,n.jsx)(v.Z,{size:14}),"Sort descending"]}),(0,n.jsxs)(j.Xi,{className:"flex items-center gap-x-2",onClick:()=>{i(!1),s("".concat(t.id,":asc"))},children:[(0,n.jsx)(y.Z,{size:14}),"Sort ascending"]})]})]})]})};var _=s(78528);let N="https://avatars.githubusercontent.com",S=[N,"https://lh3.googleusercontent.com"],C=e=>{let{currentTarget:t}=e;return t.scrollTop+10>=t.scrollHeight-t.clientHeight},U=e=>e.map(e=>{var t,s;let n=null!==(s=null===(t=e.raw_app_meta_data)||void 0===t?void 0:t.provider)&&void 0!==s?s:"",r=e.providers.map(e=>e.startsWith("sso")?"SAML":e);return{id:e.id,email:e.email,phone:e.phone,created_at:e.created_at,last_sign_in_at:e.last_sign_in_at,providers:e.is_anonymous?"-":r,provider_icons:r.map(e=>"email"===e?"".concat(c.GW,"/img/icons/email-icon2.svg"):"SAML"===e?"".concat(c.GW,"/img/icons/saml-icon.svg"):T[e]?"".concat(c.GW,"/img/icons/").concat(T[e],".svg"):void 0).filter(Boolean),provider_type:e.is_anonymous?"Anonymous":"email"===n?"-":D.includes(n)?"Social":L.includes(n)?"Phone":"-",img:M(e),name:O(e)}}),k=[{email:"email-icon2"},{apple:"apple-icon"},{azure:"microsoft-icon"},{bitbucket:"bitbucket-icon"},{discord:"discord-icon"},{facebook:"facebook-icon"},{figma:"figma-icon"},{github:"github-icon"},{gitlab:"gitlab-icon"},{google:"google-icon"},{kakao:"kakao-icon"},{keycloak:"keycloak-icon"},{linkedin_oidc:"linkedin-icon"},{notion:"notion-icon"},{twitch:"twitch-icon"},{twitter:"twitter-icon"},{slack_oidc:"slack-icon"},{slack:"slack-icon"},{spotify:"spotify-icon"},{workos:"workos-icon"},{zoom:"zoom-icon"}],A=[{twilio:"twilio-icon"},{messagebird:"messagebird-icon"},{textlocal:"messagebird-icon"},{vonage:"messagebird-icon"},{twilioverify:"twilio-verify-icon"}],T=Object.values([...k,...A]).reduce((e,t)=>{let[[s,n]]=Object.entries(t);return{...e,[s]:n}},{}),D=k.map(e=>{let[t]=Object.keys(e);return t}),L=A.map(e=>{let[t]=Object.keys(e);return t});function z(e){if(e){if("string"==typeof e)return e;if(Array.isArray(e))return e.map(e=>z(e)).join(" ");try{return JSON.stringify(e)}catch(e){}}}function O(e){var t;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",{custom_claims:n,displayName:r,display_name:a,fullName:i,full_name:l,familyName:o,family_name:d,givenName:c,given_name:u,surname:m,lastName:x,last_name:f,firstName:h,first_name:p}=null!==(t=e.raw_user_meta_data)&&void 0!==t?t:{},{displayName:v,display_name:y,fullName:g,full_name:j,familyName:w,family_name:b,givenName:_,given_name:N,surname:S,lastName:C,last_name:U,firstName:k,first_name:A}=null!=n?n:{},T=z(o||d||m||x||f||w||b||S||C||U),D=z(c||u||h||p||_||N||k||A);return z(r||a||v||y||i||l||g||j||D&&T&&"".concat(D," ").concat(T)||T||D)||s}function M(e){var t;let{avatarUrl:s,avatarURL:n,avatar_url:r,profileUrl:a,profileURL:i,profile_url:l,profileImage:o,profile_image:d,profileImageUrl:c,profileImageURL:u,profile_image_url:m}=null!==(t=e.raw_user_meta_data)&&void 0!==t?t:{},x=s||n||r||o||d||a||i||l||c||u||m||"";if("string"!=typeof x)return;let f=S.some(e=>x.startsWith(e));try{let e=new URL(x);return e.searchParams.set("s","24"),f?x.startsWith(N)?e.href:x:void 0}catch(e){return f?x:void 0}}let P=e=>{var t;let{config:s,users:r,visibleColumns:c=[],setSortByValue:p,onSelectDeleteUser:v}=e,y=null!==(t=s.map(e=>e.id))&&void 0!==t?t:_.O.map(e=>e.id),g=_.O.map(e=>{var t,c,y;let g=s.find(t=>t.id===e.id);return{key:e.id,name:e.name,resizable:null===(t=e.resizable)||void 0===t||t,sortable:!1,draggable:!0,width:null!==(c=null==g?void 0:g.width)&&void 0!==c?c:e.width,minWidth:null!==(y=e.minWidth)&&void 0!==y?y:120,headerCellClass:"z-50 outline-none !shadow-none",renderHeaderCell:()=>{if("img"!==e.id)return(0,n.jsx)(b,{col:e,setSortByValue:p})},renderCell:t=>{let{row:s}=t,[c,p]=(0,d.Gt)(),y=null==s?void 0:s[e.id],g=null==r?void 0:r.find(e=>e.id===s.id),j=null!==y&&["created_at","last_sign_in_at"].includes(e.id)?a()(y).format("ddd DD MMM YYYY HH:mm:ss [GMT]ZZ"):Array.isArray(y)?"providers"===e.id?y.map(e=>{let t=h.Wm.find(t=>"key"in t&&t.key===e||t.title.toLowerCase()===e);return null==t?void 0:t.title}).join(", "):y.join(", "):y,w=!!(null==g?void 0:g.confirmed_at);return"img"===e.id?(0,n.jsxs)("div",{className:"flex items-center justify-center gap-x-2",children:[(0,n.jsx)(m.X,{checked:c,onClick:e=>{e.stopPropagation(),p({row:s,type:"ROW",checked:!c,isShiftClick:e.shiftKey})}}),(0,n.jsx)("div",{className:(0,x.cn)("flex items-center justify-center w-6 h-6 rounded-full bg-center bg-cover bg-no-repeat",s.img?"border":"bg-selection"),style:{backgroundImage:s.img?"url('".concat(s.img,"')"):"none"},children:!s.img&&(0,n.jsx)(i.Z,{size:12})})]}):(0,n.jsxs)(f.xV,{children:[(0,n.jsx)(f.W4,{asChild:!0,children:(0,n.jsxs)("div",{className:(0,x.cn)("w-full flex items-center text-xs",e.id.includes("provider")?"capitalize":""),children:["providers"===e.id&&s.provider_icons.map((e,t)=>{let r=s.providers[t];return(0,n.jsx)("div",{className:"min-w-6 min-h-6 rounded-full border flex items-center justify-center bg-surface-75",style:{marginLeft:0===t?0:"-8px",zIndex:s.provider_icons.length-t},children:(0,n.jsx)("img",{width:16,src:e,alt:"".concat(r," auth icon"),className:(0,x.cn)("github"===r&&"dark:invert")},"".concat(null==g?void 0:g.id,"-").concat(r))})}),"last_sign_in_at"!==e.id||w?(0,n.jsx)("p",{className:(0,x.cn)("providers"===e.id&&"ml-1"),children:null===j?"-":j}):(0,n.jsx)("p",{className:"text-foreground-lighter",children:"Waiting for verification"})]})}),(0,n.jsxs)(f.h_,{onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)(f.Zo,{className:"gap-x-2",onFocusCapture:e=>e.stopPropagation(),onSelect:()=>{let t="providers"===e.id?s.providers.join(", "):j;(0,u.vQ)(t)},children:[(0,n.jsx)(l.Z,{size:12}),(0,n.jsxs)("span",{children:["Copy ","id"===e.id?e.name:e.name.toLowerCase()]})]}),(0,n.jsx)(f.uP,{}),(0,n.jsxs)(f.Zo,{className:"gap-x-2",onFocusCapture:e=>e.stopPropagation(),onSelect:()=>{g&&v(g)},children:[(0,n.jsx)(o.Z,{size:12}),(0,n.jsx)("span",{children:"Delete user"})]})]})]})}}}),j=g.find(e=>"img"===e.key);return y.length>0&&(g=g.filter(e=>y.includes(e.key)).sort((e,t)=>y.indexOf(e.key)-y.indexOf(t.key))),0===c.length?g:[j].concat(g.filter(e=>c.includes(e.key)))}},78528:function(e,t,s){s.d(t,{O:function(){return eb},r:function(){return e_}});var n=s(97458),r=s(36457),a=s(12832),i=s(11801),l=s(83151),o=s(96012),d=s(15778),c=s(51859),u=s(14398),m=s(50295),x=s(27082),f=s(52983),h=s(44914),p=s(34549),v=s(65483),y=s(85741),g=s(59185),j=s(11426),w=s(24659),b=s(556),_=s(36663),N=s(32073),S=s(68200),C=s(37521),U=s(28894),k=s(66822);let A=e=>{let{filter:t,keywords:s,providers:n}=e,r=[];if(s&&""!==s){let e=s.replaceAll("'","''");r.push("id::text ilike '%".concat(e,"%' or email ilike '%").concat(e,"%' or phone ilike '%").concat(e,"%'"))}"verified"===t?r.push("email_confirmed_at IS NOT NULL or phone_confirmed_at IS NOT NULL"):"anonymous"===t?r.push("is_anonymous is true"):"unverified"===t&&r.push("email_confirmed_at IS NULL AND phone_confirmed_at IS NULL"),n&&n.length>0&&(n.includes("saml 2.0")?r.push("(select jsonb_agg(case when value ~ '^sso' then 'sso' else value end) from jsonb_array_elements_text((raw_app_meta_data ->> 'providers')::jsonb)) ?| array[".concat(n.map(e=>"saml 2.0"===e?"'sso'":"'".concat(e,"'")).join(", "),"]").trim()):r.push("(raw_app_meta_data->>'providers')::jsonb ?| array[".concat(n.map(e=>"'".concat(e,"'")).join(", "),"]")));let a=r.map(e=>"(".concat(e,")")).join(" and ");return"".concat("select count(*) from auth.users").concat(r.length>0?" where ".concat(a):"",";")};async function T(e,t){var s;let{projectRef:n,connectionString:r,keywords:a,filter:i,providers:l}=e,o=A({filter:i,keywords:a,providers:l}),{result:d}=await (0,k.R)({projectRef:n,connectionString:r,sql:o,queryKey:["users-count"]},t),c=null==d?void 0:null===(s=d[0])||void 0===s?void 0:s.count;if("number"!=typeof c)throw Error("Error fetching users count");return c}let D=function(e){let{projectRef:t,connectionString:s,keywords:n,filter:r,providers:a}=e,{enabled:i=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,U.a)(S.o.usersCount(t,{keywords:n,filter:r,providers:a}),e=>{let{signal:i}=e;return T({projectRef:t,connectionString:s,keywords:n,filter:r,providers:a},i)},{enabled:i&&void 0!==t,...l})};var L=s(98381),z=s(84770),O=s(29784),M=s(97380),P=s(83),E=s(28453),Z=s(15357),I=s(7499),F=s(10024),R=s(15107),B=s(10503),W=s(56278),H=s(40540),q=s(46460),X=s(31964),V=s(9346),G=s(66092),K=s(76028),Q=s(90330),Y=s(4413),J=s(86848),$=s(5394),ee=s(64618),et=s(68503);async function es(e){let{projectRef:t,user:s}=e,{data:n,error:r}=await (0,et.v_)("/platform/auth/{ref}/users",{params:{path:{ref:t}},body:{email:s.email,password:s.password,email_confirm:s.autoConfirmUser}});return r&&(0,et.S3)(r),n}let en=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,r.NL)();return(0,ee.D)(e=>es(e),{async onSuccess(t,s,r){let{projectRef:a}=s;await Promise.all([n.invalidateQueries(S.o.usersInfinite(a)),n.invalidateQueries(S.o.usersCount(a))]),await (null==e?void 0:e(t,s,r))},async onError(e,s,n){void 0===t?p.Am.error("Failed to create user: ".concat(e.message)):t(e,s,n)},...s})};var er=s(76594),ea=s(2765),ei=s(96990),el=s(71117);let eo=$.Ry({email:$.Z_().min(1,"Email is required").email("Must be a valid email address"),password:$.Z_().min(1,"Password is required"),autoConfirmUser:$.O7()});var ed=e=>{let{visible:t,setVisible:s}=e,{ref:r}=(0,v.UO)(),a=(0,G.Xo)(H.KA.AUTH_EXECUTE,"create_user"),{mutate:i,isLoading:l}=en({onSuccess(e){p.Am.success("Successfully created user: ".concat(e.email)),d.reset({email:"",password:"",autoConfirmUser:!0}),s(!1)}}),o=async e=>{if(!r)return console.error("Project ref is required");i({projectRef:r,user:e})},d=(0,J.cI)({resolver:(0,Q.F)(eo),defaultValues:{email:"",password:"",autoConfirmUser:!0}});return(0,n.jsx)(er.Vq,{open:t,onOpenChange:s,"data-sentry-element":"Dialog","data-sentry-component":"CreateUserModal","data-sentry-source-file":"CreateUserModal.tsx",children:(0,n.jsxs)(er.cZ,{size:"small","data-sentry-element":"DialogContent","data-sentry-source-file":"CreateUserModal.tsx",children:[(0,n.jsx)(er.fK,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"CreateUserModal.tsx",children:(0,n.jsx)(er.$N,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"CreateUserModal.tsx",children:"Create a new user"})}),(0,n.jsx)(er.P3,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"CreateUserModal.tsx"}),(0,n.jsx)(ea.l0,{...d,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx",children:(0,n.jsxs)("form",{id:"create-user",className:"flex flex-col gap-y-4 p-6",onSubmit:d.handleSubmit(o),children:[(0,n.jsx)(ea.Wi,{name:"email",control:d.control,render:e=>{let{field:t}=e;return(0,n.jsxs)(ea.xJ,{className:"flex flex-col gap-1",children:[(0,n.jsx)(ea.lX,{children:"Email address"}),(0,n.jsx)(ea.NI,{children:(0,n.jsxs)("div",{className:"items-center relative",children:[(0,n.jsx)(X.Z,{size:18,className:"absolute left-2 top-1/2 transform -translate-y-1/2",strokeWidth:1.5}),(0,n.jsx)(ei.I,{autoFocus:!0,...t,autoComplete:"off",type:"email",name:"email",placeholder:"user@example.com",disabled:l,className:"pl-8"})]})}),(0,n.jsx)(ea.zG,{})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx"}),(0,n.jsx)(ea.Wi,{name:"password",control:d.control,render:e=>{let{field:t}=e;return(0,n.jsxs)(ea.xJ,{className:"flex flex-col gap-1",children:[(0,n.jsx)(ea.lX,{children:"User Password"}),(0,n.jsx)(ea.NI,{children:(0,n.jsxs)("div",{className:"items-center relative",children:[(0,n.jsx)(Y.Z,{size:18,className:"absolute left-2 top-1/2 transform -translate-y-1/2",strokeWidth:1.5}),(0,n.jsx)(ei.I,{...t,autoComplete:"new-password",type:"password",name:"password",placeholder:"••••••••",disabled:l,className:"pl-8"})]})}),(0,n.jsx)(ea.zG,{})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx"}),(0,n.jsx)(ea.Wi,{name:"autoConfirmUser",control:d.control,render:e=>{let{field:t}=e;return(0,n.jsxs)(ea.xJ,{className:"flex items-center gap-x-2",children:[(0,n.jsx)(ea.NI,{children:(0,n.jsx)(el.X,{checked:t.value,onCheckedChange:e=>t.onChange(e)})}),(0,n.jsx)(ea.lX,{children:"Auto Confirm User?"})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx"}),(0,n.jsx)(ea.lX,{"data-sentry-element":"FormLabel_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx",children:(0,n.jsx)("p",{className:"text-sm text-foreground-lighter",children:"A confirmation email will not be sent when creating a user via this form."})}),(0,n.jsx)(M.z,{block:!0,size:"small",htmlType:"submit",loading:l,disabled:!a||l,"data-sentry-element":"Button","data-sentry-source-file":"CreateUserModal.tsx",children:"Create user"})]})})]})})};async function ec(e){let{projectRef:t,email:s}=e,{data:n,error:r}=await (0,et.v_)("/platform/auth/{ref}/invite",{params:{path:{ref:t}},body:{email:s}});return r&&(0,et.S3)(r),n}let eu=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,r.NL)();return(0,ee.D)(e=>ec(e),{async onSuccess(t,s,r){let{projectRef:a}=s;await Promise.all([n.invalidateQueries(S.o.usersInfinite(a)),n.invalidateQueries(S.o.usersCount(a))]),await (null==e?void 0:e(t,s,r))},async onError(e,s,n){void 0===t?p.Am.error("Failed to invite user: ".concat(e.message)):t(e,s,n)},...s})};var em=s(80397),ex=s(8209),ef=s(93658),eh=e=>{let{visible:t,setVisible:s}=e,{ref:r}=(0,v.UO)(),{mutate:a,isLoading:i}=eu({onSuccess:(e,t)=>{p.Am.success("Sent invite email to ".concat(t.email)),s(!1)}}),l=(0,G.Xo)(H.KA.AUTH_EXECUTE,"invite_user"),o=async e=>{if(!r)return console.error("Project ref is required");a({projectRef:r,email:e.email})};return(0,n.jsx)(em.Z,{hideFooter:!0,size:"small",visible:t,header:"Invite a new user",onCancel:()=>s(!t),"data-sentry-element":"Modal","data-sentry-component":"InviteUserModal","data-sentry-source-file":"InviteUserModal.tsx",children:(0,n.jsx)(ex.Z,{validateOnBlur:!1,initialValues:{email:""},validate:e=>{let t={};return 0===e.email.length?t.email="Please enter a valid email":/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e.email)||(t.email="".concat(e.email," is an invalid email")),t},onSubmit:o,"data-sentry-element":"Form","data-sentry-source-file":"InviteUserModal.tsx",children:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(em.Z.Content,{children:(0,n.jsx)(ef.Z,{id:"email",className:"w-full",label:"User email",icon:(0,n.jsx)(X.Z,{}),type:"email",name:"email",placeholder:"User email"})}),(0,n.jsx)(em.Z.Content,{children:(0,n.jsx)(M.z,{block:!0,size:"small",htmlType:"submit",loading:i,disabled:!l||i,children:"Invite user"})})]})})},"invite-user-modal")},ep=()=>{let e=(0,G.Xo)(H.KA.AUTH_EXECUTE,"invite_user"),t=(0,G.Xo)(H.KA.AUTH_EXECUTE,"create_user"),[s,r]=(0,f.useState)(!1),[a,i]=(0,f.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z.h_,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,n.jsx)(Z.$F,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"AddUserDropdown.tsx",children:(0,n.jsx)(M.z,{type:"primary",iconRight:(0,n.jsx)(q.Z,{size:14,strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"AddUserDropdown.tsx",children:"Add user"})}),(0,n.jsxs)(Z.AW,{side:"bottom",align:"end",className:"w-40","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,n.jsxs)(K.u,{"data-sentry-element":"Tooltip","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,n.jsx)(K.aJ,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"AddUserDropdown.tsx",children:(0,n.jsxs)(Z.Xi,{className:"space-x-2 !pointer-events-auto",disabled:!e,onClick:()=>{e&&r(!0)},"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,n.jsx)(X.Z,{size:14,"data-sentry-element":"Mail","data-sentry-source-file":"AddUserDropdown.tsx"}),(0,n.jsx)("p",{children:"Send invitation"})]})}),!e&&(0,n.jsx)(K._v,{side:"left",children:"You need additional permissions to invite users"})]}),(0,n.jsxs)(K.u,{"data-sentry-element":"Tooltip","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,n.jsx)(K.aJ,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"AddUserDropdown.tsx",children:(0,n.jsxs)(Z.Xi,{className:"space-x-2 !pointer-events-auto",disabled:!t,onClick:()=>{t&&i(!0)},"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,n.jsx)(V.Z,{size:14,"data-sentry-element":"UserPlus","data-sentry-source-file":"AddUserDropdown.tsx"}),(0,n.jsx)("p",{children:"Create new user"})]})}),!t&&(0,n.jsx)(K._v,{side:"left",children:"You need additional permissions to create users"})]})]})]}),(0,n.jsx)(eh,{visible:s,setVisible:r,"data-sentry-element":"InviteUserModal","data-sentry-source-file":"AddUserDropdown.tsx"}),(0,n.jsx)(ed,{visible:a,setVisible:i,"data-sentry-element":"CreateUserModal","data-sentry-source-file":"AddUserDropdown.tsx"})]})},ev=s(92895),ey=s(57893),eg=s(73630);let ej=eg.Wm.map(e=>({name:e.title,value:"key"in e?e.key:e.title.toLowerCase(),icon:"".concat(O.GW,"/img/icons/").concat(e.misc.iconKey,".svg"),iconClass:"GitHub"===e.title?"dark:invert":""})).concat(eg.Px.properties.SMS_PROVIDER.enum.map(e=>({name:e.label,value:e.value,icon:"".concat(O.GW,"/img/icons/").concat(e.icon),iconClass:""})));var ew=s(72424);let eb=[{id:"img",name:"",minWidth:95,width:95,resizable:!1},{id:"id",name:"UID",width:280},{id:"name",name:"Display name",minWidth:0,width:150},{id:"email",name:"Email",width:300},{id:"phone",name:"Phone"},{id:"providers",name:"Providers",minWidth:150},{id:"provider_type",name:"Provider type",minWidth:150},{id:"created_at",name:"Created at",width:260},{id:"last_sign_in_at",name:"Last sign in at",width:260}],e_=()=>{var e,t;let s=(0,r.NL)(),{ref:U}=(0,v.UO)(),{project:k}=(0,g.d2)(),A=(0,f.useRef)(null),T=(0,f.useRef)(0),H=(0,y.cg)(),[q,X]=(0,f.useState)([]),[V,G]=(0,f.useState)(""),[K,Q]=(0,f.useState)("all"),[Y,J]=(0,f.useState)(""),[$,ee]=(0,f.useState)([]),[et,es]=(0,f.useState)([]),[en,er]=(0,f.useState)("created_at:desc"),[ea,ei]=(0,f.useState)(),[el,eo]=(0,f.useState)(new Set([])),[ed,ec]=(0,f.useState)(),[eu,em]=(0,f.useState)(!1),[ex,ef]=(0,f.useState)(!1),[eh,eg,{isSuccess:e_,isError:eN,error:eS}]=(0,z.l)(O.dA.AUTH_USERS_COLUMNS_CONFIGURATION(null!=U?U:""),null),[eC,eU]=en.split(":"),{data:ek,error:eA,isSuccess:eT,isLoading:eD,isRefetching:eL,isError:ez,isFetchingNextPage:eO,refetch:eM,hasNextPage:eP,fetchNextPage:eE}=(0,L.x7)({projectRef:U,connectionString:null==k?void 0:k.connectionString,keywords:Y,filter:"all"===K?void 0:K,providers:et,sort:eC,order:eU},{keepPreviousData:!!Y,staleTime:1/0}),{data:eZ}=D({projectRef:U,connectionString:null==k?void 0:k.connectionString,keywords:Y,filter:"all"===K?void 0:K,providers:et}),{mutateAsync:eI}=(0,C.T)(),eF=(0,f.useMemo)(()=>{var e;return null!==(e=null==ek?void 0:ek.pages.flatMap(e=>e.result))&&void 0!==e?e:[]},[null==ek?void 0:ek.pages]),eR=eF.find(e=>e.id===[...el][0]),eB=()=>{G(""),J("")},eW=(e,t,s)=>{let n=e.slice(),[r]=n.splice(t,1);return n.splice(s,0,r),n},eH=(0,a.Z)((e,t)=>{"toggle"===e?eg(t.columns.map(e=>({id:e.key,width:e.width}))):"resize"===e?eg(q.map((e,s)=>({id:e.key,width:s===t.idx?t.width:e.width}))):"reorder"===e&&eg(t.columns.map(e=>({id:e.key,width:e.width})))},500),eq=async()=>{if(!U)return console.error("Project ref is required");let e=[...el];ef(!0);try{await Promise.all(e.map(e=>eI({projectRef:U,userId:e,skipInvalidation:!0}))),await Promise.all([s.invalidateQueries(S.o.usersInfinite(U)),s.invalidateQueries(S.o.usersCount(U))]),p.Am.success("Successfully deleted the selected ".concat(el.size," user").concat(el.size>1?"s":"")),em(!1),eo(new Set([])),e.includes(ea)&&ei(void 0)}catch(e){p.Am.error("Failed to delete selected users: ".concat(e.message)),ef(!1)}};return(0,f.useEffect)(()=>{if(!eL&&(e_||eN&&eS.message.includes("data is undefined"))){let e=(0,ew.Rs)({config:null!=eh?eh:[],users:null!=eF?eF:[],visibleColumns:$,setSortByValue:er,onSelectDeleteUser:ec});X(e),e.length<eb.length&&ee(e.filter(e=>"img"!==e.key).map(e=>e.key))}},[eT,eL,e_,eN,eS,eF,el]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"h-full flex flex-col",children:[(0,n.jsx)(N.p,{className:"py-4 px-6 !mb-0",title:"Users","data-sentry-element":"FormHeader","data-sentry-source-file":"UsersV2.tsx"}),(0,n.jsx)("div",{className:"bg-surface-200 py-3 px-4 md:px-6 flex flex-col lg:flex-row lg:items-center justify-between gap-2 border-t",children:el.size>0?(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsxs)(M.z,{type:"default",icon:(0,n.jsx)(i.Z,{}),onClick:()=>em(!0),children:["Delete ",el.size," users"]}),(0,n.jsx)(b.u,{type:"default",icon:(0,n.jsx)(l.Z,{}),className:"px-1.5",onClick:()=>eo(new Set([])),tooltip:{content:{side:"bottom",text:"Cancel selection"}}})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,n.jsx)(R.I,{size:"tiny",className:"w-52 pl-7 bg-transparent",iconContainerClassName:"pl-2",icon:(0,n.jsx)(o.Z,{size:14,className:"text-foreground-lighter"}),placeholder:"Search email, phone or UID",value:V,onChange:e=>G(e.target.value),onKeyDown:e=>{"Enter"===e.code&&(G(V.trim()),J(V.trim().toLocaleLowerCase()))},actions:[V&&(0,n.jsx)(M.z,{size:"tiny",type:"text",icon:(0,n.jsx)(l.Z,{}),onClick:()=>eB(),className:"p-0 h-5 w-5"})]}),(0,n.jsxs)(P.Ph,{value:K,onValueChange:e=>Q(e),children:[(0,n.jsx)(P.i4,{size:"tiny",className:(0,E.cn)("w-[140px] !bg-transparent","all"===K&&"border-dashed"),children:(0,n.jsx)(P.ki,{})}),(0,n.jsx)(P.Bw,{children:(0,n.jsxs)(P.DI,{children:[(0,n.jsx)(P.Ql,{value:"all",className:"text-xs",children:"All users"}),(0,n.jsx)(P.Ql,{value:"verified",className:"text-xs",children:"Verified users"}),(0,n.jsx)(P.Ql,{value:"unverified",className:"text-xs",children:"Unverified users"}),(0,n.jsx)(P.Ql,{value:"anonymous",className:"text-xs",children:"Anonymous users"})]})})]}),(0,n.jsx)(_.E,{name:"Provider",options:ej,labelKey:"name",valueKey:"value",iconKey:"icon",activeOptions:et,labelClass:"text-xs",maxHeightClass:"h-[190px]",onSaveFilters:es}),(0,n.jsx)("div",{className:"border-r border-strong h-6"}),(0,n.jsx)(_.E,{name:0===$.length?"All columns":"Columns",title:"Select columns to show",buttonType:0===$.length?"dashed":"default",options:eb.slice(1),labelKey:"name",valueKey:"id",labelClass:"text-xs",maxHeightClass:"h-[190px]",clearButtonText:"Reset",activeOptions:$,onSaveFilters:e=>{let t=(null!=eh?eh:[]).slice();0===e.length?t=eb.map(e=>({id:e.id,width:e.width})):e.forEach(e=>{var s;t.find(t=>t.id===e)||t.push({id:e,width:null===(s=eb.find(t=>t.id===e))||void 0===s?void 0:s.width})});let s=(0,ew.Rs)({config:t,users:null!=eF?eF:[],visibleColumns:e,setSortByValue:er,onSelectDeleteUser:ec});ee(e),X(s),eH("toggle",{columns:s})}}),(0,n.jsxs)(Z.h_,{children:[(0,n.jsx)(Z.$F,{asChild:!0,children:(0,n.jsxs)(M.z,{icon:"desc"===eU?(0,n.jsx)(d.Z,{}):(0,n.jsx)(c.Z,{}),children:["Sorted by ",eC.replaceAll("_"," ")]})}),(0,n.jsx)(Z.AW,{className:"w-44",align:"start",children:(0,n.jsxs)(Z._x,{value:en,onValueChange:er,children:[(0,n.jsxs)(Z.Ph,{children:[(0,n.jsx)(Z.kt,{children:"Sort by created at"}),(0,n.jsxs)(Z.TG,{children:[(0,n.jsx)(Z.qB,{value:"created_at:asc",children:"Ascending"}),(0,n.jsx)(Z.qB,{value:"created_at:desc",children:"Descending"})]})]}),(0,n.jsxs)(Z.Ph,{children:[(0,n.jsx)(Z.kt,{children:"Sort by last sign in at"}),(0,n.jsxs)(Z.TG,{children:[(0,n.jsx)(Z.qB,{value:"last_sign_in_at:asc",children:"Ascending"}),(0,n.jsx)(Z.qB,{value:"last_sign_in_at:desc",children:"Descending"})]})]}),(0,n.jsxs)(Z.Ph,{children:[(0,n.jsx)(Z.kt,{children:"Sort by email"}),(0,n.jsxs)(Z.TG,{children:[(0,n.jsx)(Z.qB,{value:"email:asc",children:"Ascending"}),(0,n.jsx)(Z.qB,{value:"email:desc",children:"Descending"})]})]}),(0,n.jsxs)(Z.Ph,{children:[(0,n.jsx)(Z.kt,{children:"Sort by phone"}),(0,n.jsxs)(Z.TG,{children:[(0,n.jsx)(Z.qB,{value:"phone:asc",children:"Ascending"}),(0,n.jsx)(Z.qB,{value:"phone:desc",children:"Descending"})]})]})]})})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[H&&(0,n.jsx)(w.Z,{section:["user-management"]}),(0,n.jsx)(M.z,{size:"tiny",icon:(0,n.jsx)(u.Z,{}),type:"default",loading:eL&&!eO,onClick:()=>eM(),children:"Refresh"}),(0,n.jsx)(ep,{})]})]})}),(0,n.jsx)(I.O,{loading:eD||eL||eO,"data-sentry-element":"LoadingLine","data-sentry-source-file":"UsersV2.tsx"}),(0,n.jsxs)(F.pO,{direction:"horizontal",className:"relative flex flex-grow bg-alternative min-h-0",autoSaveId:"query-performance-layout-v1","data-sentry-element":"ResizablePanelGroup","data-sentry-source-file":"UsersV2.tsx",children:[(0,n.jsx)(F.ee,{defaultSize:1,"data-sentry-element":"ResizablePanel","data-sentry-source-file":"UsersV2.tsx",children:(0,n.jsx)("div",{className:"flex flex-col w-full h-full",children:(0,n.jsx)(h.ZP,{ref:A,className:"flex-grow border-t-0",rowHeight:44,headerRowHeight:36,columns:q,rows:(0,ew.Bi)(null!=eF?eF:[]),rowClass:e=>{let t=e.id===ea;return["".concat(t?"bg-surface-300 dark:bg-surface-300":"bg-200"," cursor-pointer"),"[&>.rdg-cell]:border-box [&>.rdg-cell]:outline-none [&>.rdg-cell]:shadow-none","[&>.rdg-cell:first-child>div]:ml-4"].join(" ")},rowKeyGetter:e=>e.id,selectedRows:el,onScroll:e=>{let t=T.current!==e.currentTarget.scrollLeft;T.current=e.currentTarget.scrollLeft,!eD&&!eO&&!t&&(0,ew.KG)(e)&&eP&&eE()},onSelectedRowsChange:e=>{e.size>20?(0,p.Am)("Only up to ".concat(20," users can be selected at a time")):eo(e)},onColumnResize:(e,t)=>eH("resize",{idx:e,width:t}),onColumnsReorder:(e,t)=>{let s=q.findIndex(t=>t.key===e),n=q.findIndex(e=>e.key===t),r=eW(q,s,n);X(r),eH("reorder",{columns:r})},renderers:{renderRow:(e,t)=>(0,n.jsx)(h.X2,{...t,onClick:()=>{let s=eF.find(t=>t.id===e);if(s){let e=eF.indexOf(s);if(t.row.id){var n;ei(t.row.id),null===(n=A.current)||void 0===n||n.scrollToCell({idx:0,rowIdx:e})}}}}),noRowsFallback:eD?(0,n.jsx)("div",{className:"absolute top-14 px-6 w-full",children:(0,n.jsx)(W.A,{})}):ez?(0,n.jsx)("div",{className:"absolute top-14 px-6 flex flex-col items-center justify-center w-full",children:(0,n.jsx)(j.Z,{subject:"Failed to retrieve users",error:eA})}):(0,n.jsxs)("div",{className:"absolute top-20 px-6 flex flex-col items-center justify-center w-full gap-y-2",children:[(0,n.jsx)(m.Z,{className:"text-foreground-lighter",strokeWidth:1}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("p",{className:"text-foreground",children:"all"!==K||Y.length>0?"No users found":"No users in your project"}),(0,n.jsx)("p",{className:"text-foreground-light",children:"all"!==K||Y.length>0?"There are currently no users based on the filters applied":"There are currently no users who signed up to your project"})]})]})},"data-sentry-element":"DataGrid","data-sentry-source-file":"UsersV2.tsx"})})}),void 0!==ea&&(0,n.jsx)(ey.i,{selectedUser:eF.find(e=>e.id===ea),onClose:()=>ei(void 0)})]}),(0,n.jsxs)("div",{className:"flex justify-between min-h-9 h-9 overflow-hidden items-center px-6 w-full border-t text-xs text-foreground-light",children:[eD||eL?"Loading users...":"Total: ".concat(null!=eZ?eZ:0," users"),(eD||eL||eO)&&(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(x.Z,{size:14,className:"animate-spin"})," Loading..."]})]})]}),(0,n.jsx)(B.Z,{visible:eu,variant:"destructive",title:"Confirm to delete ".concat(el.size," user").concat(el.size>1?"s":""),loading:ex,confirmLabel:"Delete",onCancel:()=>em(!1),onConfirm:()=>eq(),alert:{title:"Deleting ".concat(1===el.size?"a user":"users"," is irreversible"),description:"This will remove the selected ".concat(1===el.size?"":"".concat(el.size," "),"user").concat(el.size>1?"s":""," from the project and all associated data.")},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"UsersV2.tsx",children:(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["This is permanent! Are you sure you want to delete the"," ",1===el.size?"":"selected ".concat(el.size," "),"user",el.size>1?"s":"",1===el.size?(0,n.jsxs)("span",{className:"text-foreground",children:[" ",null!==(t=null!==(e=null==eR?void 0:eR.email)&&void 0!==e?e:null==eR?void 0:eR.phone)&&void 0!==t?t:"this user"]}):null,"?"]})}),(0,n.jsx)(ev.T,{visible:!!ed,selectedUser:ed,onClose:()=>ec(void 0),onDeleteSuccess:()=>ec(void 0),"data-sentry-element":"DeleteUserModal","data-sentry-source-file":"UsersV2.tsx"})]})}},24659:function(e,t,s){var n=s(97458),r=s(1634),a=s(79364),i=s(97380);t.Z=e=>{let{section:t}=e,s=(0,a.WZ)();return(0,n.jsx)(i.z,{size:"tiny",type:"default",onClick:()=>{t&&s.setActiveDocsSection(t),s.setShowProjectApiDocs(!0)},icon:(0,n.jsx)(r.Z,{strokeWidth:1.5,className:"text-foreground-muted"}),"data-sentry-element":"Button","data-sentry-component":"APIDocsButton","data-sentry-source-file":"APIDocsButton.tsx",children:"API Docs"})}},25835:function(e,t,s){var n=s(97458),r=s(29977),a=s(14471),i=s(52983),l=s(46382),o=s(97380),d=s(28453);t.Z=e=>{var t;let{text:s,asyncText:c,iconOnly:u=!1,children:m,onClick:x,copyLabel:f="Copy",copiedLabel:h="Copied",...p}=e,[v,y]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(!v)return;let e=setTimeout(()=>y(!1),2e3);return()=>clearTimeout(e)},[v]),(0,n.jsx)(o.z,{onClick:async e=>{let t=c?await c():s;y(!0),await (0,l.vQ)(t),null==x||x(e)},...p,className:(0,d.cn)({"px-1":u},p.className),icon:v?(0,n.jsx)(r.Z,{strokeWidth:2,className:"text-brand"}):null!==(t=p.icon)&&void 0!==t?t:(0,n.jsx)(a.Z,{}),"data-sentry-element":"Button","data-sentry-component":"CopyButton","data-sentry-source-file":"CopyButton.tsx",children:!u&&(0,n.jsx)(n.Fragment,{children:null!=m?m:v?h:f})})}},36663:function(e,t,s){s.d(t,{E:function(){return u}});var n=s(97458),r=s(52983),a=s(61578),i=s(97380),l=s(28453),o=s(98174),d=s(71117),c=s(45193);let u=e=>{let{title:t,options:s=[],activeOptions:u=[],valueKey:m,labelKey:x,iconKey:f="icon",name:h="default",variant:p="rectangular",buttonType:v,disabled:y,labelClass:g,className:j,maxHeightClass:w="h-[205px]",clearButtonText:b="Clear",onSaveFilters:_}=e,[N,S]=(0,r.useState)(!1),[C,U]=(0,r.useState)([]),k=u.map(e=>{let t=s.find(t=>t[m]===e);return t&&t[x]?t[x]:""});return(0,r.useEffect)(()=>{!N&&u.length>0&&U(u)},[N,u]),(0,n.jsxs)(a.J2,{open:N,onOpenChange:S,"data-sentry-element":"Popover_Shadcn_","data-sentry-component":"FilterPopover","data-sentry-source-file":"FilterPopover.tsx",children:[(0,n.jsx)(a.xo,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"FilterPopover.tsx",children:(0,n.jsx)(i.z,{asChild:!0,disabled:y,type:null!=v?v:u.length>0?"default":"dashed",onClick:()=>S(!1),className:"rounded"===p?"rounded-full":"","data-sentry-element":"Button","data-sentry-source-file":"FilterPopover.tsx",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:h}),u.length>0&&(0,n.jsx)("span",{className:"mr-1",children:":"}),u.length>=3?(0,n.jsxs)("span",{children:[k[0]," and ",u.length-1," others"]}):u.length>0?(0,n.jsx)("span",{children:k.join(", ")}):null]})})}),(0,n.jsxs)(a.yk,{className:(0,l.cn)("p-0 w-44",j),align:"start","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"FilterPopover.tsx",children:[(0,n.jsx)("div",{className:"border-b border-overlay bg-surface-200 rounded-t pb-1 px-3",children:(0,n.jsx)("span",{className:"text-xs text-foreground-light",children:null!=t?t:"Select ".concat(h.toLowerCase())})}),(0,n.jsx)(o.xr,{className:s.length>7?w:"","data-sentry-element":"ScrollArea","data-sentry-source-file":"FilterPopover.tsx",children:(0,n.jsx)("div",{className:"p-3 flex flex-col gap-y-2",children:s.map(e=>{let t=e[m],s=f?e[f]:void 0;return(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsx)(d.X,{id:t,checked:C.includes(t),onCheckedChange:()=>{C.includes(t)?U(C.filter(e=>e!==t)):U(C.concat(t))}}),(0,n.jsxs)(c._,{htmlFor:e[m],className:(0,l.cn)("flex items-center gap-x-2 text-xs",g),children:[s&&(0,n.jsx)("img",{src:s,alt:e[x],className:(0,l.cn)("w-4 h-4",e.iconClass)}),(0,n.jsx)("span",{children:e[x]})]})]},t)})})}),(0,n.jsxs)("div",{className:"flex items-center justify-end gap-2 border-t border-overlay bg-surface-200 py-2 px-3",children:[(0,n.jsx)(i.z,{size:"tiny",type:"default",onClick:()=>{_([]),U([]),S(!1)},"data-sentry-element":"Button","data-sentry-source-file":"FilterPopover.tsx",children:b}),(0,n.jsx)(i.z,{type:"primary",onClick:()=>{let e=s.map(e=>e[m]);_(C.sort((t,s)=>e.indexOf(t)-e.indexOf(s))),S(!1)},"data-sentry-element":"Button","data-sentry-source-file":"FilterPopover.tsx",children:"Save"})]})]})]})}},32073:function(e,t,s){s.d(t,{p:function(){return i}});var n=s(97458),r=s(28453),a=s(44658);let i=e=>{let{title:t,description:s,docsUrl:i,actions:l,className:o}=e;return(0,n.jsxs)("div",{className:(0,r.cn)("w-full mb-6 flex flex-col sm:flex-row md:items-center justify-between gap-4 ".concat(o)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("h3",{className:"text-foreground text-xl prose",children:t}),s&&(0,n.jsx)("div",{className:"prose text-sm max-w-full",children:s})]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row md:items-center gap-x-2",children:[void 0!==i&&(0,n.jsx)(a.G,{href:i}),l]})]})}},30728:function(e,t,s){s.d(t,{Z:function(){return f}});var n=s(90688),r=s(28894),a=s(28977),i=s.n(a),l=s(52983),o=s(49411),d=s(23430),c=s(68503),u=s(62809),m=s(68370),x=(e,t)=>(0,l.useMemo)(()=>0!==e.length&&(0,d.Sj)(e[0][t])?null==e?void 0:e.map(e=>(e[t]=(0,d.tI)(e[t]),e)):e,[JSON.stringify(e)]),f=function(e){var t,s,a,f,h;let{projectRef:p,table:v,filterOverride:y,limit:g}=e,j=(0,o.PJ)(o.bj),[w,b]=(0,l.useState)(new Date().toISOString()),_=(0,l.useRef)(!0),{timestampStart:N=j.calcFrom(),timestampEnd:S=j.calcTo(),filters:C,search:U}=(0,u.k)(),k=N||j.calcFrom(),A=S||j.calcTo(),T=(0,l.useMemo)(()=>({...C,...y,...U?{search_query:U}:{}}),[C,y,U]),[D,L]=(0,l.useState)((0,d.UR)(v,T,g)),z={project:p,iso_timestamp_start:k,iso_timestamp_end:A,sql:D},{data:O,isSuccess:M,isLoading:P,isRefetching:E,error:Z,fetchNextPage:I,isFetchingNextPage:F,refetch:R}=(0,n.N)(["projects",p,"logs",z],async e=>{let{signal:t,pageParam:s}=e,{data:n,error:r}=await (0,c.U2)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:p},query:{...z,iso_timestamp_end:s||z.iso_timestamp_end}},signal:t});if(r)throw r;return n},{refetchOnWindowFocus:!1,getNextPageParam(e){var t,s;if((null!==(s=null===(t=e.result)||void 0===t?void 0:t.length)&&void 0!==s?s:0)===0)return;let n=e.result.length,{timestamp:r}=e.result[n-1];return i().utc(Number(r/1e3)).toISOString()}});(0,l.useEffect)(()=>{if(_.current){_.current=!1;return}let e=(0,d.UR)(v,T,g);L(e),Q(e)},[JSON.stringify(T)]);let{logData:B,error:W,oldestTimestamp:H}=(0,l.useMemo)(()=>{var e,t;let s=[],n=Z?Z.message:null;null==O||null===(e=O.pages)||void 0===e||e.forEach(e=>{(null==e?void 0:e.result)&&(s=[...s,...e.result]),!n&&(null==e?void 0:e.error)&&(n=e.error)});let r=s.length>0?null===(t=s[s.length-1])||void 0===t?void 0:t.timestamp:void 0;return{logData:s,error:n,oldestTimestamp:r}},[null==O?void 0:O.pages]),{data:q}=(0,r.a)(["projects",p,"logs-count",{...z,sql:(0,d.My)(v,T),timestampStart:k,latestRefresh:w}],async e=>{let{signal:t}=e,{data:s,error:n}=await (0,c.U2)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:p},query:{...z,sql:(0,d.My)(v,T),iso_timestamp_start:w}},signal:t});if(n)throw n;return s},{refetchOnWindowFocus:!1,refetchInterval:6e4,enabled:!W&&!!O&&(null==O?void 0:null===(t=O.pages)||void 0===t?void 0:t.length)>0}),X=null!==(f=null==q?void 0:null===(a=q.result)||void 0===a?void 0:null===(s=a[0])||void 0===s?void 0:s.count)&&void 0!==f?f:0,V=(0,l.useMemo)(()=>(0,d.g8)(v,z,T),[v,z.iso_timestamp_end,z.project,T]),{data:G,refetch:K}=(0,r.a)(["projects",p,"logs-chart",{iso_timestamp_end:z.iso_timestamp_end,project:z.project,sql:V}],async e=>{var t,s,n;let{signal:r}=e,{data:a,error:i}=await (0,c.U2)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:p},query:{iso_timestamp_start:null!==(t=z.iso_timestamp_start)&&void 0!==t?t:"",iso_timestamp_end:null!==(s=z.iso_timestamp_end)&&void 0!==s?s:"",project:null!==(n=z.project)&&void 0!==n?n:"",sql:V}},signal:r});if(i)throw i;return a},{refetchOnWindowFocus:!1}),Q=async e=>{L(e||(0,d.UR)(v,T,g)),K(),b(new Date().toISOString()),R()};(0,l.useEffect)(()=>{z.iso_timestamp_start=k,z.iso_timestamp_end=A},[k,A]);let Y=x(null!==(h=null==G?void 0:G.result)&&void 0!==h?h:[],"timestamp"),{data:J,error:$}=(0,m.Z)(Y,"timestamp","count",0,z.iso_timestamp_start,z.iso_timestamp_end||new Date().toISOString());return{newCount:X,logData:B,isSuccess:M,isLoading:P||E,isLoadingOlder:F,error:W||$,filters:T,params:z,oldestTimestamp:H?String(H):void 0,eventChartData:J,refresh:Q,loadOlder:()=>I()}}},15107:function(e,t,s){s.d(t,{I:function(){return u}});var n=s(97458),r=s(45503),a=s(52983),i=s(28453),l=s(96990),o=s(97380),d=s(63805);function c(e){let{icon:t,className:s}=e;return(0,n.jsx)("div",{className:(0,i.cn)("absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-foreground-light",s),"data-sentry-component":"InputIconContainer","data-sentry-source-file":"InputIconContainer.tsx",children:t})}let u=(0,a.forwardRef)((e,t)=>{let{copy:s,showCopyOnHover:u=!1,icon:m,reveal:x=!1,actions:f,onCopy:h,iconContainerClassName:p,containerClassName:v,...y}=e,[g,j]=(0,a.useState)("Copy"),[w,b]=(0,a.useState)(!0),_=(0,d.Z)("input"),N=[];return m&&N.push(_.with_icon),(0,n.jsxs)("div",{className:(0,i.cn)("relative group",v),children:[(0,n.jsx)(l.I,{ref:t,...y,onCopy:h,value:x&&w?"**** **** **** ****":y.value,className:(0,i.cn)(...N,y.className)}),m&&(0,n.jsx)(c,{icon:m,className:p}),s||f?(0,n.jsxs)("div",{className:_.actions_container,children:[s&&!(x&&w)?(0,n.jsx)(o.z,{size:"tiny",type:"default",className:(0,i.cn)(u&&"opacity-0 group-hover:opacity-100 transition"),icon:(0,n.jsx)(r.Z,{size:16,className:"text-foreground-muted"}),onClick:()=>{var e,t;return e=y.value,void(null===(t=navigator.clipboard.writeText(e))||void 0===t||t.then(function(){j("Copied"),setTimeout(function(){j("Copy")},3e3),null==h||h()},function(){j("Failed to copy")}))},children:g}):null,x&&w?(0,n.jsx)(o.z,{size:"tiny",type:"default",onClick:function(){b(!1)},children:"Reveal"}):null,f&&f]}):null]})})},98419:function(e,t,s){s.d(t,{c:function(){return y},w:function(){return h}});var n=s(97458),r=s(52983),a=s(76028),i=s(28453),l=s(28977),o=s.n(l),d=s(60192),c=s.n(d),u=s(13516),m=s.n(u);o().extend(c()),o().extend(m());let x=e=>o().unix(Number(e)/1e3/1e3).toISOString(),f=e=>{let t=16===String(e).length;return!Number.isNaN(Number(e))&&t},h=e=>{let{utcTimestamp:t,format:s}=e,n=f(t)?x(t):t;return o().utc(n).local().format(s)},p=e=>{let{utcTimestamp:t,format:s}=e,n=f(t)?x(t):t;return o().utc(n).format(s)},v=e=>{let{utcTimestamp:t}=e,s=f(t)?x(t):t;return o().utc(s).fromNow()},y=e=>{let{utcTimestamp:t,className:s,displayAs:l="local",format:o="DD MMM  HH:mm:ss",labelFormat:d="DD MMM HH:mm:ss"}=e,c=h({utcTimestamp:t,format:o}),u=p({utcTimestamp:t,format:o}),m=v({utcTimestamp:t}),[x,f]=(0,r.useState)("start"),y=(0,r.useRef)(null),g=Intl.DateTimeFormat().resolvedOptions().timeZone;(0,r.useEffect)(()=>{let e=()=>{if(y.current){let e=y.current.getBoundingClientRect(),t=window.innerHeight;f(e.top<t/2?"start":"end")}};return e(),window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[]);let j=e=>{let{label:t,value:s}=e,[a,l]=(0,r.useState)(!1);return(0,n.jsxs)("div",{onPointerDown:e=>{e.stopPropagation()},onMouseDown:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation(),e.preventDefault(),navigator.clipboard.writeText(s),l(!0),setTimeout(()=>{l(!1)},1e3)},className:(0,i.cn)("relative cursor-pointer flex gap-y-2 gap-x-0.5 hover:bg-surface-100 px-2 py-1 group",{"bg-surface-100":a}),"data-sentry-component":"TooltipRow","data-sentry-source-file":"index.tsx",children:[(0,n.jsxs)("div",{className:"flex items-center gap-x-2 text-left truncate",children:[(0,n.jsx)("p",{children:t}),(0,n.jsx)("div",{className:"border-t w-full border-dashed"})]}),(0,n.jsxs)("div",{className:"relative flex items-center gap-x-2 flex-grow",children:[(0,n.jsx)("div",{className:"border-t w-full border-dashed z-10"}),a&&(0,n.jsx)("span",{className:"flex items-center justify-end w-full absolute inset-0 flex items-right text-brand-600 bg-surface-100",children:"Copied!"}),(0,n.jsx)("span",{className:"flex items-center gap-x-2 justify-end whitespace-nowrap",children:s})]})]})};return(0,n.jsxs)(a.u,{"data-sentry-element":"Tooltip","data-sentry-component":"TimestampInfo","data-sentry-source-file":"index.tsx",children:[(0,n.jsx)(a.aJ,{asChild:!0,ref:y,className:"text-xs ".concat(s," border-b border-transparent hover:border-dashed hover:border-foreground-light"),"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"index.tsx",children:(0,n.jsx)("span",{children:"local"===l?h({utcTimestamp:t,format:d}):p({utcTimestamp:t,format:d})})}),(0,n.jsxs)(a._v,{align:x,side:"right",className:"font-mono p-0 py-1 min-w-80","data-sentry-element":"TooltipContent","data-sentry-source-file":"index.tsx",children:[(0,n.jsx)(j,{label:"UTC",value:u,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,n.jsx)(j,{label:g,value:c,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,n.jsx)(j,{label:"Relative",value:m,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,n.jsx)(j,{label:"Timestamp",value:String(t),"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"})]})]})}},7499:function(e,t,s){s.d(t,{O:function(){return a}});var n=s(97458),r=s(28453);let a=e=>{let{loading:t}=e;return(0,n.jsx)("div",{className:"relative overflow-hidden w-full h-px bg-border m-auto","data-sentry-component":"LoadingLine","data-sentry-source-file":"LoadingLine.tsx",children:(0,n.jsx)("span",{className:(0,r.cn)("absolute w-[80px] h-px ml-auto mr-auto left-0 right-0 text-center block top-0","transition-all","line-loading-bg-light dark:line-loading-bg",t&&"animate-line-loading-slower opacity-100",t?"opacity-100":"opacity-0")})})}}}]);