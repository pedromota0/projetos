!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f722e279-e400-4963-9d03-3f8624b7b1bb",e._sentryDebugIdIdentifier="sentry-dbid-f722e279-e400-4963-9d03-3f8624b7b1bb")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4817,2202],{32586:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e,n){return null!=e&&t.call(e,n)}},62923:function(e,t,n){var a=n(22825);e.exports=function(e){return(null==e?0:e.length)?a(e,1):[]}},45346:function(e,t,n){var a=n(32586),s=n(13544);e.exports=function(e,t){return null!=e&&s(e,t,a)}},29787:function(e,t,n){var a=n(41351),s=n(87493),r=n(79312),i=n(55589),l=n(30568),o=n(85778),c=n(32840),d=n(50922),u=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(l(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||o(e)||d(e)||r(e)))return!e.length;var t=s(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!a(e).length;for(var n in e)if(u.call(e,n))return!1;return!0}},56412:function(e,t,n){"use strict";n.d(t,{BB:function(){return c},DL:function(){return h},Ks:function(){return d},N0:function(){return b},VP:function(){return f},XO:function(){return p},YF:function(){return o},ji:function(){return l},lb:function(){return u},nA:function(){return m},vH:function(){return x}});var a=n(11466),s=n.n(a),r=n(71635),i=n.n(r);let l=["int2","int4","int8","float4","float8","numeric","double precision"],o=["json","jsonb"],c=["text","varchar"],d=["timestamp","timestamptz"],u=["date"],p=["time","timetz"],m=s()(d,u,p),x=["uuid","bool","vector","bytea"],h=i()(s()(l,o,c,m,x)),f={varchar:{alternative:"text",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_varchar.28n.29_by_default"},json:{alternative:"jsonb",reference:"https://www.postgresql.org/docs/current/datatype-json.html"},timetz:{alternative:"timestamptz",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_timetz"},timestamp:{alternative:"timestamptz",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_timestamp_.28without_time_zone.29"}},b=[{name:"int2",description:"Signed two-byte integer",type:"number"},{name:"int4",description:"Signed four-byte integer",type:"number"},{name:"int8",description:"Signed eight-byte integer",type:"number"},{name:"float4",description:"Single precision floating-point number (4 bytes)",type:"number"},{name:"float8",description:"Double precision floating-point number (8 bytes)",type:"number"},{name:"numeric",description:"Exact numeric of selectable precision",type:"number"},{name:"json",description:"Textual JSON data",type:"json"},{name:"jsonb",description:"Binary JSON data, decomposed",type:"json"},{name:"text",description:"Variable-length character string",type:"text"},{name:"varchar",description:"Variable-length character string",type:"text"},{name:"uuid",description:"Universally unique identifier",type:"text"},{name:"date",description:"Calendar date (year, month, day)",type:"time"},{name:"time",description:"Time of day (no time zone)",type:"time"},{name:"timetz",description:"Time of day, including time zone",type:"time"},{name:"timestamp",description:"Date and time (no time zone)",type:"time"},{name:"timestamptz",description:"Date and time, including time zone",type:"time"},{name:"bool",description:"Logical boolean (true/false)",type:"bool"},{name:"bytea",description:"Variable-length binary string",type:"others"}]},65169:function(e,t,n){"use strict";n.d(t,{F:function(){return r},S:function(){return i}});var a=n(90365),s=n(62422);let r=e=>{var t,n;let{ref:r,schemas:i,entities:l}=e,o=l.map(e=>(0,s.s7)(e.type,{id:e.id})),c=(0,a.Ek)(r),d=[];for(let e of i)d.push(...null==c?void 0:null===(t=c.items)||void 0===t?void 0:t.filter(t=>{var n;return(null===(n=t.metadata)||void 0===n?void 0:n.schema)===e}).map(e=>e.id));let u=[...d.filter(e=>!o.includes(e))];(0,a.kR)(r,u);let p=(0,s.yj)(r),m=[];for(let e of i)m.push(...null==p?void 0:null===(n=p.openTabs)||void 0===n?void 0:n.filter(t=>{var n;return(null===(n=p.tabsMap[t].metadata)||void 0===n?void 0:n.schema)===e}));let x=[...m.filter(e=>!e.startsWith("sql")&&!e.startsWith("schema")&&!o.includes(e))];(0,s.Pf)(r,x)},i=e=>{let{ref:t,snippets:n}=e,r=[...n.filter(e=>"sql"===e.type).map(e=>(0,s.s7)("sql",{id:e.id})),"sql-templates","sql-quickstarts"],i=(0,s.yj)(t).openTabs.filter(e=>e.startsWith("sql")&&!r.includes(e));(0,s.Pf)(t,i);let l=(0,a.Be)(t,"sql");(0,a.kR)(t,l?l.filter(e=>!r.includes(e.id)).map(e=>e.id):[])}},72638:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var a=n(28894),s=n(68503),r=n(31699);async function i(e,t){let{projectRef:n,connectionString:a}=e;if(!n)throw Error("projectRef is required");let r=new Headers;a&&r.set("x-connection-encrypted",a);let{data:i,error:l}=await (0,s.U2)("/platform/pg-meta/{ref}/publications",{params:{header:{"x-connection-encrypted":a},path:{ref:n}},headers:r,signal:t});return l&&(0,s.S3)(l),i}let l=function(e){let{projectRef:t,connectionString:n}=e,{enabled:s=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.a)(r.z.list(t),e=>{let{signal:a}=e;return i({projectRef:t,connectionString:n},a)},{enabled:s&&void 0!==t,...l})}},87163:function(e,t,n){"use strict";n.d(t,{u:function(){return c}});var a=n(36457),s=n(64618),r=n(34549),i=n(68503),l=n(31699);async function o(e){let{projectRef:t,connectionString:n,id:a,tables:s,publish_insert:r,publish_update:l,publish_delete:o,publish_truncate:c}=e,d=new Headers;n&&d.set("x-connection-encrypted",n);let u={id:a};void 0!==s&&(u.tables=s),void 0!==r&&(u.publish_insert=r),void 0!==l&&(u.publish_update=l),void 0!==o&&(u.publish_delete=o),void 0!==c&&(u.publish_truncate=c);let{data:p,error:m}=await (0,i.r$)("/platform/pg-meta/{ref}/publications",{params:{header:{"x-connection-encrypted":n},path:{ref:t},query:{id:a}},body:u,headers:d});return m&&(0,i.S3)(m),p}let c=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,a.NL)();return(0,s.D)(e=>o(e),{async onSuccess(t,n,a){let{projectRef:s}=n;await i.invalidateQueries(l.z.list(s)),await (null==e?void 0:e(t,n,a))},async onError(e,n,a){void 0===t?r.Am.error("Failed to update database publication: ".concat(e.message)):t(e,n,a)},...n})}},31699:function(e,t,n){"use strict";n.d(t,{z:function(){return a}});let a={list:e=>["projects",e,"database-publications"]}},43632:function(e,t,n){"use strict";n.d(t,{k:function(){return l}});var a=n(28894),s=n(68503),r=n(52977);async function i(e,t){let{projectRef:n,connectionString:a}=e;if(!n)throw Error("projectRef is required");let r=new Headers;a&&r.set("x-connection-encrypted",a);let{data:i,error:l}=await (0,s.U2)("/platform/pg-meta/{ref}/types",{params:{header:{"x-connection-encrypted":a},path:{ref:n}},headers:Object.fromEntries(r),signal:t});return l&&(0,s.S3)(l),i}let l=function(e){let{projectRef:t,connectionString:n}=e,{enabled:s=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.a)(r.P.list(t),e=>{let{signal:a}=e;return i({projectRef:t,connectionString:n},a)},{enabled:s&&void 0!==t,...l})}},39128:function(e,t,n){"use strict";n.d(t,{N:function(){return a}});let a={list:e=>["projects",e,"views"],listBySchema:(e,t)=>[...a.list(e),t]}},9258:function(e,t,n){"use strict";n.d(t,{B:function(){return o}});var a=n(23839),s=n(52983),r=n(65483),i=n(29784);let l=e=>(0,a.v1)("schema",a.Oi.withDefault(e)),o=()=>{let{ref:e}=(0,r.UO)(),t=e&&e.length>0&&window.localStorage.getItem(i.dA.LAST_SELECTED_SCHEMA(e))||"public",[n,a]=l((0,s.useMemo)(()=>t,[e]));return(0,s.useEffect)(()=>{e&&e.length>0&&window.localStorage.setItem(i.dA.LAST_SELECTED_SCHEMA(e),n)},[n,e]),{selectedSchema:n,setSelectedSchema:a}}},96080:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(96813).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},34259:function(e,t,n){"use strict";var a=n(97458),s=n(52983),r=n(7456);let i=(0,s.memo)(function(){return(0,a.jsx)("div",{className:"px-4 flex flex-col gap-0",children:[{width:"w-40",opacity:"opacity-100"},{width:"w-32",opacity:"opacity-100"},{width:"w-20",opacity:"opacity-75"},{width:"w-40",opacity:"opacity-50"},{width:"w-20",opacity:"opacity-25"}].map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-row h-6 items-center gap-3 ".concat(e.opacity),children:[(0,a.jsx)(r.O,{className:"h-4 w-5"}),(0,a.jsx)(r.O,{className:"h-4 ".concat(e.width)})]},t))})});t.Z=i},41296:function(e,t,n){"use strict";var a=n(97458),s=n(40540),r=n(54599),i=n(66092),l=n(67788);t.Z=e=>{let{children:t}=e,n=(0,i.N4)(),o=(0,i.Xo)(s.KA.TENANT_SQL_ADMIN_READ,"tables");return n&&!o?(0,a.jsx)(l.$,{isBlocking:!1,children:(0,a.jsx)(r.Z,{isFullPage:!0,resourceText:"view tables from this project"})}):(0,a.jsx)(a.Fragment,{children:t})}},91805:function(e,t,n){"use strict";n.d(t,{Z:function(){return eb}});var a=n(97458),s=n(40540),r=n(50663),i=n.n(r),l=n(99361),o=n(60245),c=n(48426),d=n(52983),u=n(65483),p=n(1331),m=n(85741),x=n(16795),h=n(34259),f=n(11426),b=n(556),y=n(88306),v=n(50761),g=n(90825),j=n(42258),w=n(67931),N=n(95415),k=n(66092),S=n(84770),C=n(9258),T=n(79133),E=n(61543),_=n(19570),z=n(97380),L=n(61578),Z=n(71117),I=n(45193),A=n(64504),D=n(59185),P=n(65169),R=n(12887),O=n.n(R),B=n(96080),F=n(14471),M=n(75635),W=n(45503),q=n(4413),V=n(22878),H=n(11801),X=n(66764),U=n(94497),Q=n.n(U),K=n(49571),G=n.n(K),J=n(34549),Y=n(34653),$=n(97742),ee=n(43728),et=n(41522),en=n(82320),ea=n(39834),es=n(47564),er=n(92345),ei=n(17829),el=n(46382),eo=n(62422),ec=n(28453),ed=n(39305),eu=n(76028),ep=n(15357);let em=e=>{let{entity:t,isActive:n,tableHasLints:s,viewHasLints:r,materializedViewHasLints:i}=e,l="";switch(t.type){case j.l.TABLE:s&&(l="RLS disabled");break;case j.l.VIEW:r&&(l="Security definer view");break;case j.l.MATERIALIZED_VIEW:i&&(l="Security definer view");break;case j.l.FOREIGN_TABLE:l="RLS is not enforced on foreign tables"}return l?(0,a.jsxs)(eu.u,{disableHoverableContent:!0,children:[(0,a.jsx)(eu.aJ,{className:"min-w-4",children:(0,a.jsx)(X.Z,{size:14,strokeWidth:2,className:(0,ec.cn)("min-w-4",n?"text-warning-600":"text-warning-500")})}),(0,a.jsx)(eu._v,{side:"bottom",children:(0,a.jsx)("span",{children:l})})]}):null};var ex=e=>{var t,n,s,r,i;let{id:l,projectRef:o,item:c,isLocked:d,isActive:p}=e,{project:x}=(0,D.d2)(),h=(0,E._2)(),{selectedSchema:f}=(0,C.B)(),b=(0,m.B7)(),y=(0,eo.s7)(c.type,{id:c.id}),v=(0,eo.yj)(o),g=!!b&&v.previewTabId===y,w=Object.values((0,Y.R)(v).tabsMap).some(e=>{var t;return(null===(t=e.metadata)||void 0===t?void 0:t.tableId)===c.id}),k=Number(l)===c.id,S=k&&!d,{data:T=[]}=(0,ea.U)({projectRef:null==x?void 0:x.ref}),_=(0,et.R)(c.name,"rls_disabled_in_public",["ERROR"],T,f).hasLint,z=(0,et.R)(c.name,"security_definer_view",["ERROR","WARN"],T,f).hasLint,L=(0,et.R)(c.name,"materialized_view_in_api",["ERROR","WARN"],T,f).hasLint,Z=async()=>{if(u.Qy&&!(null==x?void 0:x.connectionString))return console.error("Connection string is required");let e=J.Am.loading("Exporting ".concat(c.name," as CSV..."));try{let t=await (0,N.IV)({id:c.id,projectRef:o,connectionString:null==x?void 0:x.connectionString});if((0,er.N3)(t)&&t.live_rows_estimate>$.kI)return J.Am.error((0,a.jsx)("div",{className:"text-foreground prose text-sm",children:$.m0}),{id:e});let n=t&&(0,ee.NK)(t);if(!n)return J.Am.error("Failed to export table: ".concat(c.name),{id:e});let s=(await (0,ei.wF)({projectRef:o,connectionString:null==x?void 0:x.connectionString,table:n})).map(e=>(Object.keys(e).map(t=>{"object"==typeof e[t]&&null!==e[t]&&(e[t]=JSON.stringify(e[t]))}),e));if(s.length>0){let e=G().unparse(s,{columns:n.columns.map(e=>e.name)}),t=new Blob([e],{type:"text/csv;charset=utf-8;"});O()(t,"".concat(c.name,"_rows.csv"))}J.Am.success("Successfully exported ".concat(c.name," as CSV"),{id:e})}catch(t){J.Am.error("Failed to export table: ".concat(t.message),{id:e})}},I=async()=>{if(u.Qy&&!(null==x?void 0:x.connectionString))return console.error("Connection string is required");let e=J.Am.loading("Exporting ".concat(c.name," as SQL..."));try{let t=await (0,N.IV)({id:c.id,projectRef:o,connectionString:null==x?void 0:x.connectionString});if((0,er.N3)(t)&&t.live_rows_estimate>$.kI)return J.Am.error((0,a.jsx)("div",{className:"text-foreground prose text-sm",children:$.m0}),{id:e});let n=t&&(0,ee.NK)(t);if(!n)return J.Am.error("Failed to export table: ".concat(c.name),{id:e});let s=(await (0,ei.wF)({projectRef:o,connectionString:null==x?void 0:x.connectionString,table:n})).map(e=>(Object.keys(e).map(t=>{"object"==typeof e[t]&&null!==e[t]&&(e[t]=JSON.stringify(e[t]))}),e));if(s.length>0){let e=(0,et.k)(n,s),t=new Blob([e],{type:"text/sql;charset=utf-8;"});O()(t,"".concat(c.name,"_rows.sql"))}J.Am.success("Successfully exported ".concat(c.name," as SQL"),{id:e})}catch(t){J.Am.error("Failed to export table: ".concat(t.message),{id:e})}};return(0,a.jsx)(es.Sf,{title:c.name,id:String(c.id),href:"/project/".concat(o,"/editor/").concat(c.id,"?schema=").concat(c.schema),role:"button","aria-label":"View ".concat(c.name),className:(0,ec.cn)((0,ed.RK)({isSelected:k&&!g,isOpened:w&&!g,isPreview:g}),"px-4"),onDoubleClick:e=>{e.preventDefault();let t=(0,eo.s7)(c.type,{id:c.id});(0,eo.CW)(o,t)},"data-sentry-element":"EditorTablePageLink","data-sentry-component":"EntityListItem","data-sentry-source-file":"EntityListItem.tsx",children:(0,a.jsxs)(a.Fragment,{children:[k&&(0,a.jsx)("div",{className:"absolute left-0 h-full w-0.5 bg-foreground"}),(0,a.jsxs)(eu.u,{disableHoverableContent:!0,"data-sentry-element":"Tooltip","data-sentry-source-file":"EntityListItem.tsx",children:[(0,a.jsx)(eu.aJ,{className:"min-w-4","data-sentry-element":"TooltipTrigger","data-sentry-source-file":"EntityListItem.tsx",children:(0,a.jsx)(en.F,{type:c.type,isActive:k,"data-sentry-element":"EntityTypeIcon","data-sentry-source-file":"EntityListItem.tsx"})}),(0,a.jsx)(eu._v,{side:"bottom","data-sentry-element":"TooltipContent","data-sentry-source-file":"EntityListItem.tsx",children:(t=c.type,null===(i=Object.entries(j.l).find(e=>{let[,n]=e;return n===t}))||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:null===(s=r.toLowerCase())||void 0===s?void 0:null===(n=s.split("_"))||void 0===n?void 0:n.join(" "))})]}),(0,a.jsxs)("div",{className:(0,ec.cn)("truncate","overflow-hidden text-ellipsis whitespace-nowrap flex items-center gap-2 relative w-full",k&&"text-foreground"),children:[(0,a.jsx)("span",{className:(0,ec.cn)(k?"text-foreground":"text-foreground-light group-hover:text-foreground","text-sm","transition","truncate"),children:c.name}),(0,a.jsx)(em,{entity:c,isActive:k,tableHasLints:_,viewHasLints:z,materializedViewHasLints:L,"data-sentry-element":"EntityTooltipTrigger","data-sentry-source-file":"EntityListItem.tsx"})]}),S&&(0,a.jsxs)(ep.h_,{children:[(0,a.jsx)(ep.$F,{className:"text-foreground-lighter transition-all text-transparent group-hover:text-foreground data-[state=open]:text-foreground",children:(0,a.jsx)(B.Z,{size:14,strokeWidth:2})}),(0,a.jsxs)(ep.AW,{side:"bottom",align:"start",className:"w-44",children:[(0,a.jsxs)(ep.Xi,{className:"space-x-2",onClick:e=>{e.stopPropagation(),(0,el.vQ)(c.name)},children:[(0,a.jsx)(F.Z,{size:12}),(0,a.jsx)("span",{children:"Copy name"})]},"copy-name"),c.type===j.l.TABLE&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ep.VD,{}),(0,a.jsxs)(ep.Xi,{className:"space-x-2",onClick:e=>{e.stopPropagation(),h.onEditTable()},children:[(0,a.jsx)(M.Z,{size:12}),(0,a.jsx)("span",{children:"Edit table"})]},"edit-table"),(0,a.jsxs)(ep.Xi,{className:"space-x-2",onClick:e=>{e.stopPropagation(),h.onDuplicateTable()},children:[(0,a.jsx)(W.Z,{size:12}),(0,a.jsx)("span",{children:"Duplicate table"})]},"duplicate-table"),(0,a.jsx)(ep.Xi,{className:"space-x-2",asChild:!0,children:(0,a.jsxs)(Q(),{href:"/project/".concat(o,"/auth/policies?schema=").concat(f,"&search=").concat(c.id),children:[(0,a.jsx)(q.Z,{size:12}),(0,a.jsx)("span",{children:"View policies"})]},"view-policies")},"view-policies"),(0,a.jsxs)(ep.Ph,{children:[(0,a.jsxs)(ep.kt,{className:"gap-x-2",children:[(0,a.jsx)(V.Z,{size:12}),"Export data"]}),(0,a.jsxs)(ep.TG,{children:[(0,a.jsx)(ep.Xi,{className:"space-x-2",onClick:e=>{e.stopPropagation(),Z()},children:(0,a.jsx)("span",{children:"Export table as CSV"})},"download-table-csv"),(0,a.jsx)(ep.Xi,{className:"gap-x-2",onClick:e=>{e.stopPropagation(),I()},children:(0,a.jsx)("span",{children:"Export table as SQL"})},"download-table-sql")]})]}),(0,a.jsx)(ep.VD,{}),(0,a.jsxs)(ep.Xi,{className:"gap-x-2",onClick:e=>{e.stopPropagation(),h.onDeleteTable()},children:[(0,a.jsx)(H.Z,{size:12}),(0,a.jsx)("span",{children:"Delete table"})]},"delete-table")]})]})]})]})})},eh=n(4317);let ef=()=>(0,a.jsx)(A.Cf,{title:"No tables or views",description:"Any tables or views you create will be listed here.",className:"mx-4","data-sentry-element":"InnerSideBarEmptyPanel","data-sentry-component":"TableMenuEmptyState","data-sentry-source-file":"TableMenuEmptyState.tsx",children:(0,a.jsx)("div",{className:"top-0 left-6 flex flex-col opacity-50 cursor-not-allowed bg-dash-sidebar h-content -mb-7 pointer-events-none scale-75",children:(0,a.jsxs)("div",{className:"relative h-content",children:[(0,a.jsxs)("div",{className:"absolute inset-0 pointer-events-none z-10",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-transparent from-80% to-100% to-background-surface-100 dark:to-background-surface-75"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent from-50% to-100% to-background-surface-100 dark:to-background-surface-75"})]}),(0,a.jsx)("div",{className:"absolute left-[150px] bottom-[21px] text-foreground-muted z-10 pointer-events-none",children:(0,a.jsx)(eh.Z,{size:16,className:"text-foreground-light",strokeWidth:1.5,"data-sentry-element":"Pointer","data-sentry-source-file":"TableMenuEmptyState.tsx"})}),[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"border-l pointer-events-none",children:(0,a.jsxs)("div",{className:(0,ec.cn)("group",(0,ed.RK)({isSelected:2===t,isOpened:2===t,isPreview:!1}),"px-4 min-w-40"),"aria-selected":2===t,children:[2===t&&(0,a.jsx)("div",{className:"absolute left-0 h-full w-0.5 bg-foreground"}),(0,a.jsx)(en.F,{type:"r"}),"postgres_table_".concat(t)]})},"some-".concat(t)))]})})});var eb=()=>{var e,t,n;let{ref:r,id:R}=(0,u.UO)();(0,c.useRouter)();let O=R?Number(R):void 0,B=(0,E._2)(),{selectedSchema:F,setSelectedSchema:M}=(0,C.B)(),W=(0,p.G)(),q=(0,m.B7)(),[V,H]=(0,d.useState)(!1),[X,U]=(0,d.useState)(""),[Q,K]=(0,d.useState)(Object.values(j.l)),[G,J]=(0,S._)("table-editor-sort","alphabetical"),{project:Y}=(0,D.d2)(),{data:$,isLoading:ee,isSuccess:et,isError:en,error:ea,hasNextPage:es,isFetchingNextPage:er,fetchNextPage:ei}=(0,w.Hp)({projectRef:null==Y?void 0:Y.ref,connectionString:null==Y?void 0:Y.connectionString,schemas:[F],search:X.trim()||void 0,sort:G,filterTypes:Q},{keepPreviousData:!!X}),el=(0,d.useMemo)(()=>null==$?void 0:$.pages.flatMap(e=>e.data.entities),[null==$?void 0:$.pages]),{data:eo}=(0,g.Q1)({projectRef:null==Y?void 0:Y.ref,connectionString:null==Y?void 0:Y.connectionString}),ec=null==eo?void 0:eo.find(e=>e.name===F),ed=(0,k.Xo)(s.KA.TENANT_SQL_ADMIN_WRITE,"tables"),[eu]=i()((null!=eo?eo:[]).sort((e,t)=>e.name.localeCompare(t.name)),e=>{var t;return T.s.includes(null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"")}),ep=eu.some(e=>e.id===(null==ec?void 0:ec.id)),{data:em}=(0,N.iB)({projectRef:null==Y?void 0:Y.ref,connectionString:null==Y?void 0:Y.connectionString,id:O});return(0,d.useEffect)(()=>{(null==em?void 0:em.schema)&&M(em.schema)},[null==em?void 0:em.schema]),(0,d.useEffect)(()=>{q&&r&&el&&(0,P.F)({ref:r,schemas:[F],entities:el})},[el]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col flex-grow gap-5 pt-5 h-full",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-y-1.5",children:[(0,a.jsx)(v.Z,{className:"mx-4",selectedSchemaName:F,onSelectSchema:e=>{U(""),M(e)},onSelectCreateSchema:()=>B.onAddSchema(),"data-sentry-element":"SchemaSelector","data-sentry-source-file":"TableEditorMenu.tsx"}),(0,a.jsx)("div",{className:"grid gap-3 mx-4",children:ep?(0,a.jsxs)(_.bZ,{children:[(0,a.jsx)(_.Cd,{className:"text-sm",children:"Viewing protected schema"}),(0,a.jsxs)(_.X,{className:"text-xs",children:[(0,a.jsx)("p",{className:"mb-2",children:"This schema is managed by Supabase and is read-only through the table editor"}),(0,a.jsx)(z.z,{type:"default",size:"tiny",onClick:()=>H(!0),children:"Learn more"})]})]}):(0,a.jsx)(b.u,{block:!0,title:"Create a new table",name:"New table",disabled:!ed,size:"tiny",icon:(0,a.jsx)(l.Z,{size:14,strokeWidth:1.5,className:"text-foreground-muted"}),type:"default",className:"justify-start",onClick:B.onAddTable,tooltip:{content:{side:"bottom",text:ed?void 0:"You need additional permissions to create tables"}},children:"New table"})})]}),(0,a.jsxs)("div",{className:"flex flex-auto flex-col gap-2 pb-4",children:[(0,a.jsxs)(A.nM,{className:"mx-2","data-sentry-element":"InnerSideBarFilters","data-sentry-source-file":"TableEditorMenu.tsx",children:[(0,a.jsx)(A.nn,{autoFocus:!W,name:"search-tables","aria-labelledby":"Search tables",onChange:e=>{U(e.target.value)},value:X,placeholder:"Search tables...","data-sentry-element":"InnerSideBarFilterSearchInput","data-sentry-source-file":"TableEditorMenu.tsx",children:(0,a.jsxs)(A.ZY,{value:G,onValueChange:e=>J(e),"data-sentry-element":"InnerSideBarFilterSortDropdown","data-sentry-source-file":"TableEditorMenu.tsx",children:[(0,a.jsx)(A.IR,{value:"alphabetical",className:"flex gap-2","data-sentry-element":"InnerSideBarFilterSortDropdownItem","data-sentry-source-file":"TableEditorMenu.tsx",children:"Alphabetical"},"alphabetical"),(0,a.jsx)(A.IR,{value:"grouped-alphabetical","data-sentry-element":"InnerSideBarFilterSortDropdownItem","data-sentry-source-file":"TableEditorMenu.tsx",children:"Entity Type"},"grouped-alphabetical")]})}),(0,a.jsxs)(L.J2,{"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"TableEditorMenu.tsx",children:[(0,a.jsx)(L.xo,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"TableEditorMenu.tsx",children:(0,a.jsx)(z.z,{type:5!==Q.length?"default":"dashed",className:"h-[32px] md:h-[28px] px-1.5",icon:(0,a.jsx)(o.Z,{}),"data-sentry-element":"Button","data-sentry-source-file":"TableEditorMenu.tsx"})}),(0,a.jsx)(L.yk,{className:"p-0 w-56",side:"bottom",align:"center","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"TableEditorMenu.tsx",children:(0,a.jsxs)("div",{className:"px-3 pt-3 pb-2 flex flex-col gap-y-2",children:[(0,a.jsx)("p",{className:"text-xs",children:"Show entity types"}),(0,a.jsx)("div",{className:"flex flex-col",children:Object.entries(j.l).map(e=>{let[t,n]=e;return(0,a.jsxs)("div",{className:"group flex items-center justify-between py-0.5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)(Z.X,{id:t,name:t,checked:Q.includes(n),onCheckedChange:()=>{Q.includes(n)?K(Q.filter(e=>e!==n)):K(Q.concat([n]))}}),(0,a.jsx)(I._,{htmlFor:t,className:"capitalize text-xs",children:t.toLowerCase().replace("_"," ")})]}),(0,a.jsx)(z.z,{size:"tiny",type:"default",onClick:()=>K([n]),className:"transition opacity-0 group-hover:opacity-100 h-auto px-1 py-0.5",children:"Select only"})]},t)})})]})})]})]}),ee&&(0,a.jsx)(h.Z,{}),en&&(0,a.jsx)("div",{className:"mx-4",children:(0,a.jsx)(f.Z,{error:null!=ea?ea:null,subject:"Failed to retrieve tables"})}),et&&(0,a.jsxs)(a.Fragment,{children:[0===X.length&&(null!==(e=null==el?void 0:el.length)&&void 0!==e?e:0)<=0&&(0,a.jsx)(ef,{}),X.length>0&&(null!==(t=null==el?void 0:el.length)&&void 0!==t?t:0)<=0&&(0,a.jsx)(A.Cf,{className:"mx-2",title:"No results found",description:'Your search for "'.concat(X,'" did not return any results')}),(null!==(n=null==el?void 0:el.length)&&void 0!==n?n:0)>0&&(0,a.jsx)("div",{className:"flex flex-1 flex-grow","data-testid":"tables-list",children:(0,a.jsx)(y.Z,{items:el,ItemComponent:ex,itemProps:{projectRef:null==Y?void 0:Y.ref,id:Number(O),isLocked:ep},getItemSize:()=>28,hasNextPage:es,isLoadingNextPage:er,onLoadNextPage:()=>ei()})})]})]})]}),(0,a.jsx)(x.b,{visible:V,onClose:()=>H(!1),"data-sentry-element":"ProtectedSchemaModal","data-sentry-source-file":"TableEditorMenu.tsx"})]})}},22740:function(e,t,n){"use strict";n.d(t,{t:function(){return L}});var a=n(97458),s=n(64369),r=n(65483),i=n(85741),l=n(28453),o=n(67788),c=n(33480),d=n(1774),u=n(10829),p=n(16402),m=n(59171),x=n(83151),h=n(99361),f=n(48426),b=n(52983),y=n(34653),v=n(82320),g=n(79364),j=n(62422),w=n(81461),N=n(52887),k=n(24898),S=n(82380),C=n(76028);function T(e){let{hideTabs:t}=e,{showSidebar:n,setShowSidebar:s}=(0,g.WZ)();return(0,a.jsxs)(C.u,{"data-sentry-element":"Tooltip","data-sentry-component":"CollapseButton","data-sentry-source-file":"CollapseButton.tsx",children:[(0,a.jsx)(C.aJ,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"CollapseButton.tsx",children:(0,a.jsx)("button",{className:(0,l.cn)("flex items-center justify-center w-10 h-10 hover:bg-surface-100 shrink-0",!t&&"border-b border-b-default"),onClick:()=>s(!n),children:n?(0,a.jsx)(k.Z,{size:16,strokeWidth:1.5,className:"text-foreground-lighter hover:text-foreground-light"}):(0,a.jsx)(S.Z,{size:16,strokeWidth:1.5,className:"text-foreground-lighter hover:text-foreground-light"})})}),(0,a.jsxs)(C._v,{side:"bottom","data-sentry-element":"TooltipContent","data-sentry-source-file":"CollapseButton.tsx",children:["Collapse"," sidebar"]})]})}let E=e=>{var t;let{tab:n,index:s,openTabs:i,onClose:o}=e,c=(0,f.useRouter)(),{ref:h}=(0,r.UO)(),y=c.query.schema||"public",{attributes:g,listeners:N,setNodeRef:k,transform:S,transition:C,isDragging:T}=(0,d.nB)({id:n.id}),E={transform:u.ux.Transform.toString(S),transition:C,zIndex:T?1:0},_=(0,b.useMemo)(()=>"r"===n.type&&i.filter(e=>"r"===e.type).some(e=>{var t;return(null===(t=e.metadata)||void 0===t?void 0:t.schema)!==y}),[i,y,n.type]);return(0,a.jsxs)(p.E.div,{ref:k,style:E,...g,layoutId:n.id,transition:{duration:.045},animate:{opacity:T?0:1},className:(0,l.cn)("flex items-center h-10 first-of-type:border-l"),"data-sentry-element":"unknown","data-sentry-component":"SortableTab","data-sentry-source-file":"Tabs.tsx",children:[(0,a.jsxs)(w.SP,{value:n.id,onDoubleClick:()=>(0,j.CW)(h,n.id),className:(0,l.cn)("flex items-center gap-2 px-3 text-xs","bg-dash-sidebar/50 dark:bg-surface-100/50","data-[state=active]:bg-dash-sidebar dark:data-[state=active]:bg-surface-100","border-b border-default","data-[state=active]:border-b-background-dash-sidebar dark:data-[state=active]:border-b-background-surface-100","relative group h-full","hover:bg-surface-300 dark:hover:bg-surface-100",n.isPreview&&"italic font-light"),...N,"data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"Tabs.tsx",children:[(0,a.jsx)(v.F,{type:n.type,"data-sentry-element":"EntityTypeIcon","data-sentry-source-file":"Tabs.tsx"}),(0,a.jsxs)("div",{className:"flex items-center gap-0",children:[(0,a.jsx)(m.M,{mode:"popLayout",initial:!0,"data-sentry-element":"AnimatePresence","data-sentry-source-file":"Tabs.tsx",children:_&&(0,a.jsxs)(p.E.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},transition:{duration:.15},className:"text-foreground-muted group-data-[state=active]:text-foreground-lighter",children:[null==n?void 0:null===(t=n.metadata)||void 0===t?void 0:t.schema,"."]})}),(0,a.jsx)("span",{children:n.label||"Untitled"})]}),(0,a.jsx)("span",{role:"button",onClick:e=>{e.preventDefault(),e.stopPropagation()},className:"ml-1 opacity-0 group-hover:opacity-100 hover:bg-200 rounded-sm cursor-pointer",onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onPointerDown:e=>{e.preventDefault(),e.stopPropagation(),o(n.id)},children:(0,a.jsx)(x.Z,{size:12,className:"text-foreground-light","data-sentry-element":"X","data-sentry-source-file":"Tabs.tsx"})}),(0,a.jsx)("div",{className:"absolute w-full top-0 left-0 right-0 h-px bg-foreground opacity-0 group-data-[state=active]:opacity-100"})]}),s<i.length&&(0,a.jsx)("div",{role:"separator",className:"h-full w-px bg-border"},"separator-".concat(n.id))]})},_=e=>{let{tab:t}=e,{ref:n}=(0,r.UO)(),s=(0,j.yj)(n),i=(0,y.R)(s).tabsMap[t];return i?(0,a.jsxs)(p.E.div,{layoutId:t,transition:{duration:.045},animate:{opacity:.7},className:"flex relative items-center gap-2 px-3 text-xs bg-dash-sidebar dark:bg-surface-100 shadow-lg rounded-sm h-10","data-sentry-element":"unknown","data-sentry-component":"TabPreview","data-sentry-source-file":"Tabs.tsx",children:[(0,a.jsx)(v.F,{type:i.type,"data-sentry-element":"EntityTypeIcon","data-sentry-source-file":"Tabs.tsx"}),(0,a.jsx)("span",{children:i.label||"Untitled"}),(0,a.jsx)("div",{className:"absolute w-full top-0 left-0 right-0 h-px bg-foreground-muted"})]}):null};function z(){var e;let{ref:t}=(0,r.UO)(),n=(0,f.useRouter)(),s=(0,g.WZ)(),i=(0,N.f)(),o=(0,j.yj)(t),u=(0,y.R)(o),b=(0,c.Dy)((0,c.VT)(c.we,{activationConstraint:{distance:1}})),v=u.openTabs.map(e=>u.tabsMap[e]).filter(e=>void 0!==e),k=n.asPath.includes("/new"),S=i?v.filter(e=>{var t;return null===(t=j.zP[i])||void 0===t?void 0:t.includes(e.type)}):[],C=e=>{(0,j.tL)({ref:t,id:e,router:n,editor:i,onClearDashboardHistory:()=>{t&&i&&s.setDashboardHistory(t,"table"===i?"editor":i,void 0)}})};return(0,a.jsxs)(c.LB,{sensors:b,onDragEnd:e=>{let{active:a,over:s}=e;if(!s||a.id===s.id)return;let r=u.openTabs.indexOf(a.id.toString()),i=u.openTabs.indexOf(s.id.toString());r!==i&&(0,j.HH)(t,r,i,a.id.toString(),n)},"data-sentry-element":"DndContext","data-sentry-component":"Tabs","data-sentry-source-file":"Tabs.tsx",children:[(0,a.jsxs)(w.mQ,{className:"w-full flex",value:k?"new":null!==(e=u.activeTab)&&void 0!==e?e:void 0,onValueChange:e=>{(0,j.nk)(t,e,n)},"data-sentry-element":"Tabs_Shadcn_","data-sentry-source-file":"Tabs.tsx",children:[(0,a.jsx)(T,{hideTabs:!1,"data-sentry-element":"CollapseButton","data-sentry-source-file":"Tabs.tsx"}),(0,a.jsxs)(w.dr,{className:"bg-surface-200 dark:bg-alternative rounded-b-none gap-0 h-10 flex items-center w-full z-[1] border-none overflow-clip overflow-x-auto ","data-sentry-element":"TabsList_Shadcn_","data-sentry-source-file":"Tabs.tsx",children:[(0,a.jsx)(d.Fo,{items:S.map(e=>e.id),strategy:d.PG,"data-sentry-element":"SortableContext","data-sentry-source-file":"Tabs.tsx",children:S.map((e,t)=>(0,a.jsx)(E,{tab:e,index:t,openTabs:v,onClose:()=>C(e.id)},e.id))}),k&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(w.SP,{value:"new",className:(0,l.cn)("flex items-center gap-2 px-3 text-xs","bg-dash-sidebar/50 dark:bg-surface-100/50","data-[state=active]:bg-dash-sidebar dark:data-[state=active]:bg-surface-100","relative group h-full border-t-2 !border-b-0","hover:bg-surface-300 dark:hover:bg-surface-100"),children:[(0,a.jsx)(h.Z,{size:16,strokeWidth:1.5,className:"text-foreground-lighter"}),(0,a.jsx)("div",{className:"flex items-center gap-0",children:(0,a.jsx)("span",{children:"New"})}),(0,a.jsx)("span",{role:"button",onClick:e=>{e.preventDefault(),e.stopPropagation()},className:"ml-1 opacity-0 group-hover:opacity-100 hover:bg-200 rounded-sm cursor-pointer",onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onPointerDown:e=>{e.preventDefault(),e.stopPropagation(),C("new")},children:(0,a.jsx)(x.Z,{size:12,className:"text-foreground-light"})})," ",(0,a.jsx)("div",{className:"absolute w-full -bottom-[1px] left-0 right-0 h-px bg-dash-sidebar dark:bg-surface-100 opacity-0 group-data-[state=active]:opacity-100"})]})}),(0,a.jsx)(m.M,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-source-file":"Tabs.tsx",children:!k&&(0,a.jsx)(p.E.button,{className:"flex items-center justify-center w-10 h-10 hover:bg-surface-100 shrink-0 border-b",onClick:()=>n.push("/project/".concat(n.query.ref,"/").concat("table"===i?"editor":"sql","/new?skip=true")),initial:{opacity:0,scale:.8,x:-10},animate:{opacity:1,scale:1,x:0},transition:{duration:.2},children:(0,a.jsx)(h.Z,{size:16,strokeWidth:1.5,className:"text-foreground-lighter hover:text-foreground-light"})})}),(0,a.jsx)("div",{className:"grow h-full border-b pr-6"})]})]}),(0,a.jsx)(c.y9,{dropAnimation:null,"data-sentry-element":"DragOverlay","data-sentry-source-file":"Tabs.tsx",children:u.activeTab?(0,a.jsx)(_,{tab:u.activeTab}):null})]})}let L=e=>{let{children:t,title:n,product:c,...d}=e,{ref:u}=(0,r.UO)(),p=(0,s.usePathname)(),m=(0,N.f)(),x=(0,i.B7)(),h=(0,i.Ff)(),f=p==="/project/".concat(u,"/editor")||p==="/project/".concat(u,"/sql");return(0,a.jsx)(o.$,{resizableSidebar:!0,title:n,product:c,...d,"data-sentry-element":"ProjectLayoutWithAuth","data-sentry-component":"EditorBaseLayout","data-sentry-source-file":"EditorBaseLayout.tsx",children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:["table"===m&&x||"sql"===m&&h?(0,a.jsxs)("div",{className:(0,l.cn)("h-10 flex items-center",f?"bg-surface-100":"bg-surface-200 dark:bg-alternative"),children:[f&&(0,a.jsx)(T,{hideTabs:f}),!f&&(0,a.jsx)(z,{})]}):null,(0,a.jsx)("div",{className:"h-full",children:t})]})})}},82320:function(e,t,n){"use strict";n.d(t,{F:function(){return d}});var a=n(97458),s=n(42258),r=n(12791),i=n(55465),l=n(81810),o=n(39305),c=n(28453);let d=e=>{var t,n,d;let{type:u,size:p=15,strokeWidth:m=1.5,isActive:x}=e;return"sql"===u?(0,a.jsx)(o.KK,{size:p,className:(0,c.cn)("transition-colors","fill-foreground-muted","group-aria-selected:fill-foreground","w-4 h-4","-ml-0.5"),strokeWidth:m}):u===s.l.TABLE?(0,a.jsx)(r.Z,{size:p,strokeWidth:m,className:(0,c.cn)("text-foreground-muted group-hover:text-foreground-lighter group-aria-selected:text-foreground",x&&"text-foreground-light","transition-colors")}):"schema"===u?(0,a.jsx)(i.Z,{size:p,strokeWidth:m}):u===s.l.VIEW?(0,a.jsx)(l.Z,{size:p,strokeWidth:m,className:(0,c.cn)("text-foreground-muted group-hover:text-foreground-lighter",x&&"text-foreground-lighter","transition-colors")}):(0,a.jsx)("div",{className:(0,c.cn)("flex items-center justify-center text-xs h-4 w-4 rounded-[2px] font-bold",u===s.l.FOREIGN_TABLE&&"text-yellow-900 bg-yellow-500",u===s.l.MATERIALIZED_VIEW&&"text-purple-1000 bg-purple-500",u===s.l.PARTITIONED_TABLE&&"text-foreground-light bg-border-stronger"),"data-sentry-component":"EntityTypeIcon","data-sentry-source-file":"EntityTypeIcon.tsx",children:null===(d=Object.entries(s.l).find(e=>{let[,t]=e;return t===u}))||void 0===d?void 0:null===(n=d[0])||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.toUpperCase()})}},54599:function(e,t,n){"use strict";var a=n(97458),s=n(18178);t.Z=e=>{let{resourceText:t,isFullPage:n=!1}=e,r=()=>(0,a.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200","data-sentry-component":"NoPermissionMessage","data-sentry-source-file":"NoPermission.tsx",children:(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(s.Z,{size:20,"data-sentry-element":"AlertCircle","data-sentry-source-file":"NoPermission.tsx"})}),(0,a.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or administrator for assistance."})})]})})]})});return n?(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsx)("div",{className:"w-[550px]",children:(0,a.jsx)(r,{})})}):(0,a.jsx)(r,{})}},50761:function(e,t,n){"use strict";var a=n(97458),s=n(40540),r=n(14647),i=n(29977),l=n(99361),o=n(52983),c=n(59185),d=n(90825),u=n(66092),p=n(97380),m=n(7456),x=n(19570),h=n(61578),f=n(53784),b=n(98174);t.Z=e=>{let{className:t,disabled:n=!1,size:y="tiny",showError:v=!0,selectedSchemaName:g,supportSelectAll:j=!1,excludedSchemas:w=[],onSelectSchema:N,onSelectCreateSchema:k}=e,[S,C]=(0,o.useState)(!1),T=(0,u.Xo)(s.KA.TENANT_SQL_ADMIN_WRITE,"schemas"),{project:E}=(0,c.d2)(),{data:_,isLoading:z,isSuccess:L,isError:Z,error:I,refetch:A}=(0,d.Q1)({projectRef:null==E?void 0:E.ref,connectionString:null==E?void 0:E.connectionString}),D=(_||[]).filter(e=>!w.includes(e.name)).sort((e,t)=>e.name.localeCompare(t.name));return(0,a.jsxs)("div",{className:t,"data-sentry-component":"SchemaSelector","data-sentry-source-file":"SchemaSelector.tsx",children:[z&&(0,a.jsx)(p.z,{type:"default",className:"w-full [&>span]:w-full",size:y,disabled:!0,children:(0,a.jsx)(m.O,{className:"w-full h-3 bg-foreground-muted"})},"schema-selector-skeleton"),v&&Z&&(0,a.jsxs)(x.bZ,{variant:"warning",className:"!px-3 !py-3",children:[(0,a.jsx)(x.Cd,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,a.jsxs)(x.X,{className:"text-xs mb-2 break-words",children:["Error: ",null==I?void 0:I.message]}),(0,a.jsx)(p.z,{type:"default",size:"tiny",onClick:()=>A(),children:"Reload schemas"})]}),L&&(0,a.jsxs)(h.J2,{open:S,onOpenChange:C,modal:!1,children:[(0,a.jsx)(h.xo,{asChild:!0,children:(0,a.jsx)(p.z,{size:y,disabled:n,type:"default","data-testid":"schema-selector",className:"w-full [&>span]:w-full !pr-1 space-x-1",iconRight:(0,a.jsx)(r.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:g?(0,a.jsxs)("div",{className:"w-full flex gap-1",children:[(0,a.jsx)("p",{className:"text-foreground-lighter",children:"schema"}),(0,a.jsx)("p",{className:"text-foreground",children:"*"===g?"All schemas":g})]}):(0,a.jsx)("div",{className:"w-full flex gap-1",children:(0,a.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schema…"})})})}),(0,a.jsx)(h.yk,{className:"p-0 min-w-[200px]",side:"bottom",align:"start",sameWidthAsTrigger:!0,children:(0,a.jsxs)(f.mY,{children:[(0,a.jsx)(f.sZ,{placeholder:"Find schema..."}),(0,a.jsxs)(f.e8,{children:[(0,a.jsx)(f.rb,{children:"No schemas found"}),(0,a.jsx)(f.fu,{children:(0,a.jsxs)(b.xr,{className:(D||[]).length>7?"h-[210px]":"",children:[j&&(0,a.jsxs)(f.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{N("*"),C(!1)},onClick:()=>{N("*"),C(!1)},children:[(0,a.jsx)("span",{children:"All schemas"}),"*"===g&&(0,a.jsx)(i.Z,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==D?void 0:D.map(e=>(0,a.jsxs)(f.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{N(e.name),C(!1)},onClick:()=>{N(e.name),C(!1)},children:[(0,a.jsx)("span",{children:e.name}),g===e.name&&(0,a.jsx)(i.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==k&&T&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.zz,{}),(0,a.jsx)(f.fu,{children:(0,a.jsxs)(f.di,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{k(),C(!1)},onClick:()=>{k(),C(!1)},children:[(0,a.jsx)(l.Z,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}},57590:function(e,t,n){"use strict";var a=n(97458),s=n(28453);t.Z=e=>{let{max:t=100,value:n=0,barClass:r="bg-foreground",bgClass:i="",type:l="vertical",borderClass:o="",labelBottom:c="",labelBottomClass:d="tabular-nums",labelTop:u="",labelTopClass:p=""}=e;if("horizontal"===l){let e=Number(n/t*100),l=c||u;return(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[l&&(0,a.jsxs)("div",{className:"flex align-baseline justify-between pb-1 space-x-8",children:[(0,a.jsx)("p",{className:(0,s.cn)("text-foreground text-sm truncate capitalize-sentence",u.length>0&&"max-w-[75%]",d),children:c}),(0,a.jsx)("p",{className:(0,s.cn)("text-foreground-light text-sm",p),children:u})]}),(0,a.jsx)("div",{className:"relative rounded h-1 overflow-hidden w-full border p-0 ".concat(i||"bg-surface-400"," ").concat(o||"border-none"),children:(0,a.jsx)("div",{className:"absolute rounded inset-x-0 bottom-0 h-1 ".concat(r," transition-all"),style:{width:"".concat(e,"%")}})})]})}{let e=Number(n/t*35);return e<2&&(e=2),(0,a.jsx)("div",{className:"relative rounded w-5 overflow-hidden border p-1 ".concat(i||"bg-gray-400"," ").concat(o||"border-none"),style:{height:35},children:(0,a.jsx)("div",{className:"absolute inset-x-0 bottom-0 w-5 ".concat(r),style:{height:e}})})}}},38832:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var a=n(97458),s=n(52983),r=n(73242),i=n(63805),l=n(91416);let o=(0,s.createContext)({parentCallback:e=>{},parentSize:""});function c(e){let{className:t,id:n="",name:s="",label:r,afterLabel:c,beforeLabel:d,description:u,checked:p,value:m,onChange:x,onBlur:h,size:f="medium",disabled:b=!1,...y}=e,{formContextOnChange:v,values:g,handleBlur:j}=(0,l.G)(),w=(0,i.Z)("checkbox");return(0,a.jsx)(o.Consumer,{"data-sentry-element":"unknown","data-sentry-component":"Checkbox","data-sentry-source-file":"Checkbox.tsx",children:e=>{let{parentCallback:i,parentSize:l}=e,o=n||s||(r?r.toLowerCase().replace(/^[^A-Z0-9]+/gi,"").replace(/ /g,"-"):void 0);f=l||f;let N=s||o,k=null!=p?p:void 0,S=[w.container];return t&&S.push(t),g&&void 0===p&&(k=g[n||s]),(0,a.jsxs)("div",{className:S.join(" "),children:[(0,a.jsx)("input",{id:o,name:N,type:"checkbox",className:[w.base,w.size[f]].join(" "),onChange:function(e){i&&i(e),x&&x(e),v&&v(e)},onBlur:function(e){j&&setTimeout(()=>{j(e)},100),h&&h(e)},checked:k,value:m||o,disabled:b,...y}),(0,a.jsxs)("label",{className:[w.label.base,w.label[f]].join(" "),htmlFor:o,children:[(0,a.jsxs)("span",{children:[d&&(0,a.jsx)("span",{className:[w.label_before.base,w.label_before[f]].join(" "),children:d}),r,c&&(0,a.jsx)("span",{className:[w.label_after.base,w.label_after[f]].join(" "),children:c})]}),u&&(0,a.jsx)("p",{className:[w.description.base,w.description[f]].join(" "),children:u})]})]})}})}c.Group=function(e){let{id:t,layout:n="vertical",error:s,descriptionText:l,label:d,afterLabel:u,beforeLabel:p,labelOptional:m,children:x,className:h,options:f,onChange:b,size:y="medium"}=e,v=(0,i.Z)("checkbox");return(0,a.jsx)(r.l,{label:d,afterLabel:u,beforeLabel:p,labelOptional:m,layout:n,id:t,error:s,descriptionText:l,className:h,size:y,"data-sentry-element":"FormLayout","data-sentry-component":"Group","data-sentry-source-file":"Checkbox.tsx",children:(0,a.jsx)(o.Provider,{value:{parentCallback:e=>{b&&b(e)},parentSize:y},"data-sentry-element":"unknown","data-sentry-source-file":"Checkbox.tsx",children:(0,a.jsx)("div",{className:v.group,children:f?f.map(e=>(0,a.jsx)(c,{id:e.id,value:e.value,label:e.label,beforeLabel:e.beforeLabel,afterLabel:e.afterLabel,checked:e.checked,name:e.name,description:e.description,defaultChecked:e.defaultChecked},e.id)):x})})})};var d=c},60848:function(e,t,n){"use strict";var a=n(97458),s=n(99517);n(52983);var r=n(63805);let i=e=>{let{open:t,children:n,className:r,...i}=e;return(0,a.jsx)(s.fC,{asChild:i.asChild,defaultOpen:i.defaultOpen,open:t,onOpenChange:i.onOpenChange,disabled:i.disabled,className:r,"data-sentry-element":"unknown","data-sentry-component":"Collapsible","data-sentry-source-file":"Collapsible.tsx",children:n})};i.Trigger=function(e){let{children:t,asChild:n}=e;return(0,a.jsx)(s.xz,{asChild:n,"data-sentry-element":"unknown","data-sentry-component":"Trigger","data-sentry-source-file":"Collapsible.tsx",children:t})},i.Content=function(e){let{asChild:t,children:n,className:i}=e,l=(0,r.Z)("collapsible");return(0,a.jsx)(s.VY,{asChild:t,className:[l.content,i].join(" "),"data-sentry-element":"unknown","data-sentry-component":"Content","data-sentry-source-file":"Collapsible.tsx",children:n})},t.ZP=i},75910:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var a=n(97458),s=n(44809),r=n(62923),i=n.n(r),l=n(52983),o=n(73242),c=n(25045),d=n(21282),u=n(63805),p=n(28453),m=n(91416);let x=(0,l.createContext)({onChange:e=>{},selected:void 0});var h=n(29977);function f(e){let{children:t,className:n,buttonClassName:r,descriptionText:h,error:f,icon:b,id:y="",name:v="",label:g,labelOptional:j,layout:w,value:N,onChange:k,onFocus:S,onBlur:C,style:T,size:E="medium",defaultValue:_,validation:z,disabled:L,optionsWidth:Z}=e,[I,A]=(0,l.useState)(void 0),[D,P]=(0,l.useState)({}),R=(0,u.Z)("listbox"),O=(0,l.useRef)(null),{formContextOnChange:B,values:F,errors:M,handleBlur:W,touched:q,fieldLevelValidation:V}=(0,m.G)();F&&!N&&(N=F[y||v],_=F[y||v]),f||(M&&!f&&(f=M[y||v]),f=q&&q[y||v]?f:void 0),(0,l.useEffect)(()=>{void 0!==N&&A(N)},[N]),(0,l.useEffect)(()=>{function e(){var e;document.documentElement.style.setProperty("--width-listbox","".concat(Z||(null===(e=O.current)||void 0===e?void 0:e.offsetWidth),"px"))}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,l.useEffect)(()=>{var e;let n=i()(t);function a(e){return n.find(t=>t.props.value===e)}if(N){A(N);let e=a(N);P((null==e?void 0:e.props)?e.props:void 0);return}if(I){let e=a(I);P((null==e?void 0:e.props)?e.props:void 0);return}if(_){A(_);let e=a(I);P((null==e?void 0:e.props)?e.props:void 0);return}P(null===(e=n[0])||void 0===e?void 0:e.props)},[I]);let H=[R.container,R.base,r],X=[R.addOnBefore];return f&&H.push(R.variants.error),f||H.push(R.variants.standard),b&&X.push(R.with_icon),E&&H.push(R.size[E]),L&&H.push(R.disabled),(0,a.jsx)(o.l,{label:g,labelOptional:j,layout:w,id:y,error:f,descriptionText:h,className:n,style:T,size:E,"data-sentry-element":"FormLayout","data-sentry-component":"Listbox","data-sentry-source-file":"Listbox2.tsx",children:(0,a.jsxs)(s.fC,{"data-sentry-element":"unknown","data-sentry-source-file":"Listbox2.tsx",children:[(0,a.jsx)(s.xz,{asChild:!0,disabled:L,"data-sentry-element":"unknown","data-sentry-source-file":"Listbox2.tsx",children:(0,a.jsxs)("button",{"data-size":E,ref:O,className:(0,p.cn)(H),onBlur:function(e){W&&W(e),C&&C(e)},onFocus:S,name:v,id:y,children:[(0,a.jsxs)("span",{className:(0,p.cn)(X),children:[b&&(0,a.jsx)(d.Z,{size:E,icon:b}),(null==D?void 0:D.addOnBefore)&&(0,a.jsx)(D.addOnBefore,{}),(0,a.jsx)("span",{className:R.label,children:null==D?void 0:D.label})]}),(0,a.jsx)("span",{className:R.chevron_container,children:(0,a.jsx)("svg",{className:R.chevron,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-sentry-element":"svg","data-sentry-source-file":"Listbox2.tsx",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd","data-sentry-element":"path","data-sentry-source-file":"Listbox2.tsx"})})}),f&&(0,a.jsx)("div",{className:R.actions_container,children:f&&(0,a.jsx)(c.Z,{size:E})})]})}),(0,a.jsx)(s.VY,{sideOffset:6,loop:!0,side:"bottom",align:"center",className:R.options_container,"data-sentry-element":"unknown","data-sentry-source-file":"Listbox2.tsx",children:(0,a.jsx)("div",{children:(0,a.jsx)(x.Provider,{value:{onChange:function(e){k&&k(e),A(e);let t={};t.target={type:"select",name:v,id:y,value:e,checked:void 0},B&&B(t),z&&V(y,z(e))},selected:I},"data-sentry-element":"unknown","data-sentry-source-file":"Listbox2.tsx",children:t})})})]})})}f.Option=function(e){let{id:t,value:n,label:r,disabled:i=!1,children:l,className:o="",addOnBefore:c}=e,d=(0,u.Z)("listbox");return(0,a.jsx)(x.Consumer,{"data-sentry-element":"unknown","data-sentry-component":"SelectOption","data-sentry-source-file":"Listbox2.tsx",children:e=>{let{onChange:r,selected:u}=e,m=u===n;return(0,a.jsxs)(s.ck,{className:(0,p.cn)(d.option,m?d.option_active:" ",i?d.option_disabled:" ",o),onSelect:()=>i?{}:r(n),children:[(0,a.jsxs)("div",{className:d.option_inner,children:[c&&c({active:m,selected:u}),(0,a.jsx)("span",{children:"function"==typeof l?l({active:m,selected:u}):l})]}),m?(0,a.jsx)("span",{className:(0,p.cn)(d.option_check,m?d.option_check_active:""),children:(0,a.jsx)(h.Z,{className:d.option_check_icon,"aria-hidden":"true"})}):null]},t)}})};var b=f},14661:function(e,t,n){"use strict";n.d(t,{r:function(){return d}});var a=n(97458),s=n(56384),r=n(31706),i=n(52983),l=n(28453);let o=(0,r.j)("peer inline-flex shrink-0 cursor-pointer items-center rounded-full border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-brand data-[state=checked]:hover:bg-brand-600/90 data-[state=unchecked]:bg-control data-[state=unchecked]:hover:bg-border",{variants:{size:{small:"h-[16px] w-[28px]",medium:"h-[20px] w-[34px]",large:"h-[24px] w-[44px]"}},defaultVariants:{size:"medium"}}),c=(0,r.j)("pointer-events-none block rounded-full bg-foreground-lighter data-[state=checked]:bg-white shadow-lg ring-0 transition-transform",{variants:{size:{small:"h-[12px] w-[12px] data-[state=checked]:translate-x-[13px] data-[state=unchecked]:translate-x-[1px]",medium:"h-[16px] w-[16px] data-[state=checked]:translate-x-[15px] data-[state=unchecked]:translate-x-[1px]",large:"h-[18px] w-[18px] data-[state=checked]:translate-x-[22px] data-[state=unchecked]:translate-x-[3px]"}},defaultVariants:{size:"medium"}}),d=i.forwardRef((e,t)=>{let{className:n,size:r,...i}=e;return(0,a.jsx)(s.fC,{className:(0,l.cn)(o({size:r}),n),...i,ref:t,children:(0,a.jsx)(s.bU,{className:(0,l.cn)(c({size:r}))})})});d.displayName=s.fC.displayName},56384:function(e,t,n){"use strict";n.d(t,{bU:function(){return w},fC:function(){return j}});var a=n(75737),s=n(52983),r=n(12527),i=n(61031),l=n(95831),o=n(29650),c=n(87178),d=n(56807),u=n(36986);let p="Switch",[m,x]=(0,l.b)(p),[h,f]=m(p),b=(0,s.forwardRef)((e,t)=>{let{__scopeSwitch:n,name:l,checked:c,defaultChecked:d,required:p,disabled:m,value:x="on",onCheckedChange:f,...b}=e,[y,j]=(0,s.useState)(null),w=(0,i.e)(t,e=>j(e)),N=(0,s.useRef)(!1),k=!y||!!y.closest("form"),[S=!1,C]=(0,o.T)({prop:c,defaultProp:d,onChange:f});return(0,s.createElement)(h,{scope:n,checked:S,disabled:m},(0,s.createElement)(u.WV.button,(0,a.Z)({type:"button",role:"switch","aria-checked":S,"aria-required":p,"data-state":g(S),"data-disabled":m?"":void 0,disabled:m,value:x},b,{ref:w,onClick:(0,r.M)(e.onClick,e=>{C(e=>!e),k&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})})),k&&(0,s.createElement)(v,{control:y,bubbles:!N.current,name:l,value:x,checked:S,required:p,disabled:m,style:{transform:"translateX(-100%)"}}))}),y=(0,s.forwardRef)((e,t)=>{let{__scopeSwitch:n,...r}=e,i=f("SwitchThumb",n);return(0,s.createElement)(u.WV.span,(0,a.Z)({"data-state":g(i.checked),"data-disabled":i.disabled?"":void 0},r,{ref:t}))}),v=e=>{let{control:t,checked:n,bubbles:r=!0,...i}=e,l=(0,s.useRef)(null),o=(0,c.D)(n),u=(0,d.t)(t);return(0,s.useEffect)(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==n&&t){let a=new Event("click",{bubbles:r});t.call(e,n),e.dispatchEvent(a)}},[o,n,r]),(0,s.createElement)("input",(0,a.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:n},i,{tabIndex:-1,ref:l,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function g(e){return e?"checked":"unchecked"}let j=b,w=y}}]);