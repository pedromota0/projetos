!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="dbcd1943-8afb-4b22-965d-13583fef08f7",e._sentryDebugIdIdentifier="sentry-dbid-dbcd1943-8afb-4b22-965d-13583fef08f7")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2218],{85751:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/settings/compute-and-disk",function(){return a(32642)}])},85812:function(e,t,a){"use strict";a.d(t,{DB:function(){return c},Ec:function(){return p},G0:function(){return l},G1:function(){return u},Pl:function(){return s},Vn:function(){return f},_z:function(){return m},b4:function(){return h},gS:function(){return b},jV:function(){return g},kW:function(){return v},r8:function(){return o},uV:function(){return d},uf:function(){return y},vf:function(){return x},yg:function(){return r}});var i=a(29784),n=a(30534);let s=e=>{var t,a,i,s;let{planId:r,oldSize:l,oldStorageType:o,newSize:d,newStorageType:c,numReplicas:u=0}=e,m=null!==(i=null===(t=n.TV[o])||void 0===t?void 0:t.storage)&&void 0!==i?i:0,p=null!==(s=null===(a=n.TV[c])||void 0===a?void 0:a.storage)&&void 0!==s?s:0,{includedDiskGB:f}=null===n.UT||void 0===n.UT?void 0:n.UT[r],x=Math.max(l-f[o],0)*m,h=Math.max(d-f[c],0)*p;return{oldPrice:(x+1.25*l*m*u).toFixed(2),newPrice:(h+1.25*d*p*u).toFixed(2)}},r=e=>{var t,a,i,n;let{availableOptions:s,oldComputeSize:r,newComputeSize:l,plan:o}=e,d=r;"free"!==o&&"ci_nano"===r&&(d="ci_micro");let c=null!==(i=null==s?void 0:null===(t=s.find(e=>e.identifier===d))||void 0===t?void 0:t.price)&&void 0!==i?i:0,u=null!==(n=null==s?void 0:null===(a=s.find(e=>e.identifier===l))||void 0===a?void 0:a.price)&&void 0!==n?n:0;return{oldPrice:(720*c).toFixed(2),newPrice:(720*u).toFixed(2)}},l=e=>{var t,a,i,s,r,l,o,d;let{oldStorageType:c,oldProvisionedIOPS:u,newStorageType:m,newProvisionedIOPS:p,numReplicas:f=0}=e;if(m===n.Hb.GP3){let e=Math.max(0,u-n.lB[n.Hb.GP3].includedIops),r=Math.max(0,p-n.lB[n.Hb.GP3].includedIops),l=e*(null!==(i=null===(t=n.TV[c])||void 0===t?void 0:t.iops)&&void 0!==i?i:0),o=r*(null!==(s=null===(a=n.TV[m])||void 0===a?void 0:a.iops)&&void 0!==s?s:0);return{oldPrice:(l*(1+f)).toFixed(2),newPrice:(o*(1+f)).toFixed(2)}}{let e="gp3"===c?(u-n.lB[c].includedIops)*n.TV[c].iops:u*(null!==(o=null===(r=n.TV[c])||void 0===r?void 0:r.iops)&&void 0!==o?o:0),t=p*(null!==(d=null===(l=n.TV[m])||void 0===l?void 0:l.iops)&&void 0!==d?d:0);return{oldPrice:(e*(1+f)).toFixed(2),newPrice:(t*(1+f)).toFixed(2)}}},o=e=>{let{storageType:t,newThroughput:a,oldThroughput:i,numReplicas:s=0}=e;if(t===n.Hb.GP3&&a){let e=Math.max(0,i-n.lB[n.Hb.GP3].includedThroughput),t=Math.max(0,a-n.lB[n.Hb.GP3].includedThroughput),r=e*n.TV[n.Hb.GP3].throughput,l=t*n.TV[n.Hb.GP3].throughput;return{oldPrice:(r*(1+s)).toFixed(2),newPrice:(l*(1+s)).toFixed(2)}}return{oldPrice:"0.00",newPrice:"0.00"}};function d(e,t){var a,n;let s=null!==(n=null===(a=e.find(e=>"compute_instance"===e.type))||void 0===a?void 0:a.variants.filter(e=>{if(!t)return!0;let a=e.meta;return!a.supported_cloud_providers||a.supported_cloud_providers.includes(t)}))&&void 0!==n?n:[];return s.unshift({identifier:"ci_nano",name:"Nano",price_description:"$0/hour (~$0/month)",price:0,price_interval:"hourly",price_type:"usage",meta:{cpu_cores:i.t5.cpu_cores,cpu_dedicated:i.t5.cpu_dedicated,memory_gb:i.t5.memory_gb,baseline_disk_io_mbs:i.t5.baseline_disk_io_mbs,max_disk_io_mbs:i.t5.max_disk_io_mbs,connections_direct:i.t5.connections_direct,connections_pooler:i.t5.connections_pooler}}),s}let c=e=>Math.min(3e3*e,16e3),u=e=>Math.max(1,Math.ceil(e/500)),m=e=>Math.min(500*e,256e3),p=e=>Math.max(4,Math.ceil(e/1e3)),f=e=>Math.max(125,Math.ceil(e/.256)),x=e=>n.sS[e]||0,h=e=>{let t=Object.entries(n.sS).sort((e,t)=>e[1]-t[1]);for(let[a,i]of t)if(e<=i)return a;return t[t.length-1][0]},g=e=>({pico:"ci_pico",nano:"ci_nano",micro:"ci_micro",small:"ci_small",medium:"ci_medium",large:"ci_large",xlarge:"ci_xlarge","2xlarge":"ci_2xlarge","4xlarge":"ci_4xlarge","8xlarge":"ci_8xlarge","12xlarge":"ci_12xlarge","16xlarge":"ci_16xlarge"})[null!=e?e:"nano"],v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ci_nano";return({ci_nano:"Nano",ci_micro:"Micro",ci_small:"Small",ci_medium:"Medium",ci_large:"Large",ci_xlarge:"XL",ci_2xlarge:"2XL",ci_4xlarge:"4XL",ci_8xlarge:"8XL",ci_12xlarge:"12XL",ci_16xlarge:"16XL"})[e]},y=e=>e.toLocaleString("en-US"),b=(e,t)=>"free"!==e&&"nano"===t},4785:function(e,t,a){"use strict";a.d(t,{Q:function(){return l}});var i=a(97458),n=a(2669),s=a(9085),r=a(2791),l=e=>{let{page:t,menu:a}=e;return(0,i.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,i.jsx)(n.ZP,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:a.map((e,l)=>(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"my-6 space-y-8",children:(0,i.jsxs)("div",{className:"mx-3",children:[(0,i.jsx)(n.ZP.Group,{title:e.title?(0,i.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,i.jsx)("span",{children:e.title}),e.isPreview&&(0,i.jsx)(s.C,{variant:"warning",children:"Not production ready"})]}):null}),(0,i.jsx)("div",{children:e.items.map(e=>{let a=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,i.jsx)(r.Z,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:a,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),l!==a.length-1&&(0,i.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},20624:function(e,t,a){"use strict";a.d(t,{IG:function(){return u},WU:function(){return m}});var i=a(28894),n=a(28977),s=a.n(n),r=a(52983),l=a(68503),o=a(36096),d=a(83804);async function c(e,t){let{projectRef:a}=e;if(!a)throw Error("Project ref is required");let{data:i,error:n}=await (0,l.U2)("/platform/projects/{ref}/disk",{params:{path:{ref:a}},signal:t});return n&&(0,l.S3)(n),i}let u=function(e){let{projectRef:t}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.a)(d.U.diskAttributes(t),e=>{let{signal:a}=e;return c({projectRef:t},a)},{enabled:a&&void 0!==t,...n})},m=e=>{var t;let{projectRef:a,enabled:i=!0}=e,{data:n,isLoading:l,isError:d,isSuccess:c,error:m}=u({projectRef:a},{enabled:i}),p=s()(null!==(t=null==n?void 0:n.last_modified_at)&&void 0!==t?t:"").utc(),f=Math.max(0,s()().utc().diff(s()(p).utc(),"second")),x=(0,r.useMemo)(()=>void 0===p||o.Xr-f<0?0:o.Xr-f,[p,f]);return(null==n?void 0:n.last_modified_at)===void 0?{remainingDuration:0,isWithinCooldownWindow:!1,isLoading:l,isError:d,error:m,isSuccess:c}:{remainingDuration:x,isWithinCooldownWindow:x>0,isLoading:l,isError:d,error:m,isSuccess:c}}},36096:function(e,t,a){"use strict";a.d(t,{H$:function(){return c},Xr:function(){return o}});var i=a(36457),n=a(64618),s=a(34549),r=a(68503),l=a(83804);let o=21600;async function d(e){let{ref:t,storageType:a,provisionedIOPS:i,throughput:n,totalSize:s}=e;if(!t)throw Error("ref is required");let{data:l,error:o}=await (0,r.v_)("/platform/projects/{ref}/disk",{params:{path:{ref:t}},body:{attributes:"gp3"===a?{iops:i,throughput_mbps:n,size_gb:s,type:a}:{iops:i,size_gb:s,type:a}}});return o&&(0,r.S3)(o),l}let c=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,i.NL)();return(0,n.D)(e=>d(e),{async onSuccess(t,a,i){let{ref:n}=a;await r.invalidateQueries(l.U.diskAttributes(n)),await (null==e?void 0:e(t,a,i))},async onError(e,a,i){void 0===t?s.Am.error("Failed to update disk attributes: ".concat(e.message)):t(e,a,i)},...a})}},57290:function(e,t,a){"use strict";a.d(t,{b:function(){return d}});var i=a(36457),n=a(64618),s=a(34549),r=a(68503),l=a(9571);async function o(e){let{projectRef:t,variant:a,type:i}=e;if(!t)throw Error("projectRef is required");if(!a)throw Error("variant is required");if(!i)throw Error("type is required");let{data:n,error:s}=await (0,r.v_)("/platform/projects/{ref}/billing/addons",{params:{path:{ref:t}},body:{addon_type:i,addon_variant:a}});return s&&(0,r.S3)(s),n}let d=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,i.NL)();return(0,n.D)(e=>o(e),{async onSuccess(t,a,i){let{projectRef:n}=a;await r.invalidateQueries(l.U.addons(n)),await (null==e?void 0:e(t,a,i))},async onError(e,a,i){void 0===t?s.Am.error("Failed to update addon: ".concat(e.message)):t(e,a,i)},...a})}},32787:function(e,t,a){"use strict";a.d(t,{p:function(){return n}});var i=a(29784);function n(e){switch(e){case i.aA.AWS.id:return"ARM";case i.aA.FLY.id:return"x86 64-bit";default:return""}}},30534:function(e,t,a){"use strict";var i,n;a.d(t,{Hb:function(){return i},Li:function(){return p},Pc:function(){return m},Qq:function(){return u},TV:function(){return l},UT:function(){return d},gP:function(){return f},kI:function(){return s},lB:function(){return o},oc:function(){return r},sS:function(){return c}});let s=.9;(n=i||(i={})).GP3="gp3",n.IO2="io2";let r={growthPercent:50,minIncrementSize:4,maxSizeGb:6e4},l={gp3:{storage:.125,iops:.024,throughput:.095},io2:{storage:.195,iops:.119}},o={gp3:{minStorage:1,maxStorage:16384,minIops:3e3,maxIops:16e3,minThroughput:125,maxThroughput:1e3,includedIops:3e3,includedThroughput:125},io2:{minStorage:4,maxStorage:61440,minIops:1500,maxIops:256e3,includedIops:0,includedThroughput:0}},d={free:{includedDiskGB:{gp3:1,io2:0}},pro:{includedDiskGB:{gp3:8,io2:0}},team:{includedDiskGB:{gp3:8,io2:0}},enterprise:{includedDiskGB:{gp3:8,io2:0}}},c={ci_nano:250,ci_micro:500,ci_small:1e3,ci_medium:2e3,ci_large:3600,ci_xlarge:6e3,ci_2xlarge:12e3,ci_4xlarge:2e4,ci_8xlarge:4e4,ci_12xlarge:5e4,ci_16xlarge:8e4},u={ci_nano:43,ci_micro:87,ci_small:174,ci_medium:347,ci_large:630,ci_xlarge:1188,ci_2xlarge:2375,ci_4xlarge:4750,ci_8xlarge:9500,ci_12xlarge:14250,ci_16xlarge:19e3},m=["ci_nano","ci_micro","ci_small","ci_medium"],p=["ci_nano","ci_micro","ci_small","ci_medium"],f=[{type:"gp3",name:"General Purpose SSD",description:"Balance between price and performance"},{type:"io2",name:"High Performance SSD",description:"High performance for mission critical applications"}]},18291:function(e,t,a){"use strict";a.d(t,{P:function(){return l}});var i=a(97458),n=a(59171),s=a(16402),r=a(23046);function l(e){let{visible:t,description:a,actions:l,...o}=e;return(0,i.jsx)(n.M,{"data-sentry-element":"AnimatePresence","data-sentry-component":"NoticeBar","data-sentry-source-file":"NoticeBar.tsx",children:t&&(0,i.jsx)(s.E.div,{initial:{opacity:0,height:0,y:4},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:4},transition:{duration:.15},children:(0,i.jsxs)(r.J,{...o,children:[a,(0,i.jsx)("div",{className:"flex flex-col gap-2",children:l&&(0,i.jsx)("div",{className:"mt-2",children:l})})]})})})}},34507:function(e,t,a){"use strict";var i=a(97458),n=a(48426),s=a(52983),r=a(65483),l=a(4785),o=a(77595),d=a(97167),c=a(45524),u=a(90013),m=a(49319),p=a(29784),f=a(67788),x=a(50883);t.Z=(0,u.Q)(e=>{let{title:t,children:a}=e,u=(0,n.useRouter)(),{ref:h}=(0,r.UO)(),g=(0,c.Vm)(),v=(0,d.l)();(0,s.useEffect)(()=>{p.Qy||u.push("/project/default")},[u]);let y=u.pathname.includes("billing")?u.pathname.split("/")[5]:u.pathname.split("/")[4],{projectAuthAll:b,projectEdgeFunctionAll:j,projectStorageAll:S,billingInvoices:w}=(0,o.N)(["project_auth:all","project_edge_function:all","project_storage:all","billing:invoices"]),N=(0,m.P)("newApiKeys"),z=(0,x.E)(h,g,v,{auth:b,edgeFunctions:j,storage:S,invoices:w,newApiKeys:N});return(0,i.jsx)(f.Z,{isBlocking:!1,title:t||"Settings",product:"Settings",productMenu:(0,i.jsx)(l.Q,{page:y,menu:z}),"data-sentry-element":"ProjectLayout","data-sentry-component":"SettingsLayout","data-sentry-source-file":"SettingsLayout.tsx",children:a})})},43391:function(e,t,a){"use strict";a.d(t,{CG:function(){return j},FW:function(){return u},I7:function(){return p},Lc:function(){return g},RN:function(){return x},Wv:function(){return y},_S:function(){return o},g$:function(){return h},gW:function(){return S},jX:function(){return m},q7:function(){return c},qw:function(){return f},s_:function(){return l},tM:function(){return v},tU:function(){return d},ur:function(){return b},y:function(){return r}});var i=a(97458),n=a(52983),s=a(28453);let r="mx-auto w-full max-w-[1200px]",l="px-4 @lg:px-6 @xl:px-12 @2xl:px-20 @3xl:px-24",o=(0,n.forwardRef)((e,t)=>{let{className:a,bottomPadding:n,size:r="default",...o}=e;return(0,i.jsx)("div",{ref:t,...o,className:(0,s.cn)("mx-auto w-full",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[r],l,n&&"pb-16",a)})}),d=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("header",{...n,ref:t,className:(0,s.cn)("w-full","flex-col gap-3 py-6",a)})}),c=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("h1",{ref:t,...n,className:(0,s.cn)("text-2xl",a)})}),u=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("p",{ref:t,...n,className:(0,s.cn)("text-sm text-foreground-light",a)})}),m=(0,n.forwardRef)((e,t)=>{let{className:a,isFullWidth:n,topPadding:r,...l}=e;return(0,i.jsx)("div",{ref:t,...l,className:(0,s.cn)("flex flex-col first:pt-12 py-6",n?"w-full":"gap-3 lg:grid md:grid-cols-12",a)})}),p=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{ref:t,...n,className:(0,s.cn)("w-full h-px bg-border",a)})}),f=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("h3",{ref:t,...n,className:(0,s.cn)("text-foreground text-xl",a)})}),x=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("p",{ref:t,...n,className:(0,s.cn)("text-sm text-foreground-light",a)})}),h=(0,n.forwardRef)((e,t)=>{let{className:a,children:n,title:r,...l}=e;return(0,i.jsxs)("div",{ref:t,...l,className:(0,s.cn)("col-span-4 xl:col-span-5 prose text-sm",a),children:[r&&(0,i.jsx)("h2",{children:r}),n]})}),g=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{ref:t,...n,className:(0,s.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",a)})}),v=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{ref:t,...n,className:(0,s.cn)("flex flex-col gap-3 items-center",a)})}),y=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{ref:t,...n,className:(0,s.cn)("flex w-full items-center",a)})}),b=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{ref:t,...n,className:(0,s.cn)("flex flex-row gap-3",a)})}),j=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{ref:t,...n,className:(0,s.cn)("flex flex-col gap-3","min-w-[420px]",a)})}),S=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{ref:t,...n,className:(0,s.cn)(r,l,"my-8 flex flex-col gap-8",a)})});d.displayName="ScaffoldHeader",c.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",o.displayName="ScaffoldContainer",p.displayName="ScaffoldDivider",m.displayName="ScaffoldSection",j.displayName="ScaffoldColumn",h.displayName="ScaffoldSectionDetail",g.displayName="ScaffoldSectionContent",v.displayName="ScaffoldFilterAndContent",y.displayName="ScaffoldActionsContainer",b.displayName="ScaffoldActionsGroup",S.displayName="ScaffoldContainerLegacy",f.displayName="ScaffoldSectionTitle",x.displayName="ScaffoldSectionDescription"},2791:function(e,t,a){"use strict";var i=a(97458),n=a(94497),s=a.n(n),r=a(2669),l=a(9085),o=a(97380);t.Z=e=>{let{name:t="",isActive:a,isExternal:n,icon:d,rightIcon:c,url:u="",target:m="_self",onClick:p,textClassName:f="",hoverText:x="",label:h}=e,g=(0,i.jsx)(r.ZP.Item,{icon:d,rounded:!0,active:a,onClick:p,children:(0,i.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,i.jsxs)("div",{title:x||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+f,children:[(0,i.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==h&&(0,i.jsx)(l.C,{variant:"warning",className:"py-0 px-1.5 capitalize",children:h})]}),c&&(0,i.jsx)("div",{children:c})]})});return u?n?(0,i.jsx)(o.z,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:d,children:(0,i.jsx)(s(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,i.jsx)(s(),{href:u,className:"block",target:m,children:g}):g}},32642:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ta}});var i=a(97458),n=a(90330),s=a(40540),r=a(36457),l=a(59171),o=a(16402),d=a(80858),c=a(94497),u=a.n(c),m=a(52983),p=a(86848),f=a(34549),x=a(65483),h=a(59185),g=a(43391),v=a(44658),y=a(20624),b=a(36096),j=a(28894),S=a(68503),w=a(83804);async function N(e,t){let{projectRef:a}=e;if(!a)throw Error("Project ref is required");let{data:i,error:n}=await (0,S.U2)("/platform/projects/{ref}/disk/custom-config",{params:{path:{ref:a}},signal:t});return n&&(0,S.S3)(n),i}let z=function(e){let{projectRef:t}=e,{enabled:a=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,j.a)(w.U.diskAutoscaleConfig(t),e=>{let{signal:a}=e;return N({projectRef:t},a)},{enabled:a&&void 0!==t,...i})};var P=a(64618);async function k(e){let{projectRef:t,growthPercent:a,maxSizeGb:i,minIncrementGb:n}=e;if(!t)throw Error("projectRef is required");let{data:s,error:r}=await (0,S.v_)("/platform/projects/{ref}/disk/custom-config",{params:{path:{ref:t}},body:{growth_percent:a,max_size_gb:i,min_increment_gb:n}});return r&&(0,S.S3)(r),s}let _=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,r.NL)();return(0,P.D)(e=>k(e),{async onSuccess(t,a,n){let{projectRef:s}=a;await i.invalidateQueries(w.U.diskAutoscaleConfig(s)),await (null==e?void 0:e(t,a,n))},async onError(e,a,i){void 0===t?f.Am.error("Failed to update disk autoscale config: ".concat(e.message)):t(e,a,i)},...a})};async function I(e,t){let{projectRef:a}=e;if(!a)throw Error("Project ref is required");let{data:i,error:n}=await (0,S.U2)("/platform/projects/{ref}/disk/util",{params:{path:{ref:a}},signal:t});return n&&(0,S.S3)(n),i}let T=function(e){let{projectRef:t}=e,{enabled:a=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,j.a)(w.U.diskUtilization(t),e=>{let{signal:a}=e;return I({projectRef:t},a)},{enabled:a&&void 0!==t,...i})};var D=a(6076),C=a(45143),M=a(92693),V=a(57290),R=a(11584),B=a(60221),O=a(66092),G=a(97167),F=a(29784),A=a(2765),E=a(97380),L=a(42738),Z=a(31258),U=a(28453),H=a(23046),W=a(9085);let q=e=>{let{formState:t}=e;return(0,i.jsx)(l.M,{mode:"wait","data-sentry-element":"AnimatePresence","data-sentry-component":"FormFooterChangeBadge","data-sentry-source-file":"FormFooterChangeBadge.tsx",children:Object.keys(t.dirtyFields).length>0&&(0,i.jsx)(o.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:(0,i.jsx)(o.E.div,{animate:{scale:[1,1.05,1],transition:{duration:.3}},children:(0,i.jsx)(W.C,{variant:"default",children:(0,i.jsx)(o.E.span,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},className:"text-sm",children:1===Object.keys(t.dirtyFields).length?"1 change to review":"".concat(Object.keys(t.dirtyFields).length," changes to review")},Object.keys(t.dirtyFields).length)})})})})};var Y=a(5394),X=a(85812),J=a(30534);let Q=Y.z.object({storageType:Y.z.enum(["io2","gp3"]).describe("Type of storage: io2 or gp3"),totalSize:Y.z.number().int("Value must be an integer").describe("Allocated disk size in GB"),provisionedIOPS:Y.z.number().describe("Provisioned IOPS for storage type"),throughput:Y.z.number().optional().describe("Throughput in MB/s for gp3"),computeSize:Y.z.custom(e=>!0).describe("Compute size"),growthPercent:Y.z.number().int("Value must be an integer").min(10,"Growth percent must be at least 10%").max(100,"Growth percent cannot exceed 100%").optional().nullable(),minIncrementGb:Y.z.number().int("Value must be an integer").min(1,"Minimum increment must be at least 1 GB").max(200,"Minimum increment cannot exceed 200 GB").optional().nullable(),maxSizeGb:Y.z.number().int("Value must be an integer").max(6e4,"Maximum size cannot exceed 60TB").optional().nullable()}),$=(e,t)=>{let a="FLY"===t;return Q.superRefine((t,i)=>{let{storageType:n,totalSize:s,provisionedIOPS:r,throughput:l,maxSizeGb:o}=t;if(!a&&s<8&&i.addIssue({code:Y.z.ZodIssueCode.custom,message:"Allocated disk size must be at least 8 GB.",path:["totalSize"]}),!a&&s<e&&i.addIssue({code:Y.z.ZodIssueCode.custom,message:"Disk size cannot be reduced in size. Reduce your database size and then head to the Infrastructure settings and go through a Postgres version upgrade to right-size your disk.",path:["totalSize"]}),!a&&o&&o<s&&i.addIssue({code:Y.z.ZodIssueCode.custom,message:"Max disk size cannot be lower than the current disk size. Must be at least ".concat((0,X.uf)(s)," GB."),path:["maxSizeGb"]}),!a&&"io2"===n){r>J.lB[J.Hb.IO2].maxIops&&i.addIssue({code:Y.z.ZodIssueCode.custom,message:"IOPS can not exceed ".concat((0,X.uf)(J.lB[J.Hb.IO2].maxIops)," for io2 Disk type. Please reach out to support if you need higher IOPS than this."),path:["provisionedIOPS"]});let e=(0,X._z)(s);if(r<J.lB[J.Hb.IO2].minIops)i.addIssue({code:Y.z.ZodIssueCode.custom,message:"Provisioned IOPS must be at least ".concat((0,X.uf)(J.lB[J.Hb.IO2].minIops)),path:["provisionedIOPS"]});else if(r>e){if(s>=8){let t=(0,X.Ec)(r);t>s&&i.addIssue({code:Y.z.ZodIssueCode.custom,message:"Larger Disk size of at least ".concat((0,X.uf)(t)," GB required. Current max is ").concat((0,X.uf)(e)," IOPS."),path:["provisionedIOPS"]})}else i.addIssue({code:Y.z.ZodIssueCode.custom,message:"Invalid IOPS value due to small disk size",path:["provisionedIOPS"]})}void 0!==l&&i.addIssue({code:Y.z.ZodIssueCode.custom,message:"Throughput is not configurable for io2.",path:["throughput"]}),s>J.lB[J.Hb.IO2].maxStorage&&i.addIssue({code:Y.z.ZodIssueCode.custom,message:"Allocated disksize must not exceed ".concat((0,X.uf)(J.lB[J.Hb.IO2].maxStorage)," GB "),path:["totalSize"]})}if(!a&&"gp3"===n){let e=(0,X.DB)(s);if(r>J.lB[J.Hb.GP3].maxIops&&i.addIssue({code:Y.z.ZodIssueCode.custom,message:"IOPS can not exceed ".concat((0,X.uf)(J.lB[J.Hb.GP3].maxIops)," for GP3 Disk. Change the Disk type to io2 for higher IOPS support."),path:["provisionedIOPS"]}),r<J.lB[J.Hb.GP3].minIops)i.addIssue({code:Y.z.ZodIssueCode.custom,message:"IOPS must be at least ".concat((0,X.uf)(J.lB[J.Hb.GP3].minIops)),path:["provisionedIOPS"]});else if(r>e){if(s>=8){let t=(0,X.G1)(r);i.addIssue({code:Y.z.ZodIssueCode.custom,message:"Larger Disk size of at least ".concat((0,X.uf)(t)," GB required. Current max is ").concat((0,X.uf)(e)," IOPS."),path:["provisionedIOPS"]})}else i.addIssue({code:Y.z.ZodIssueCode.custom,message:"Invalid IOPS value due to invalid disk size",path:["provisionedIOPS"]})}if(void 0!==l){let e=Math.min(.25*r,1e3);if(l>J.lB.gp3.maxThroughput&&i.addIssue({code:Y.z.ZodIssueCode.custom,message:"Throughput can not exceed ".concat((0,X.uf)(e)," MB/s"),path:["throughput"]}),l>e){let e=(0,X.Vn)(l);i.addIssue({code:Y.z.ZodIssueCode.custom,message:"Need at least ".concat((0,X.uf)(e)," IOPS to support ").concat((0,X.uf)(l)," MB/s."),path:["throughput"]})}l<J.lB[J.Hb.GP3].minThroughput&&i.addIssue({code:Y.z.ZodIssueCode.custom,message:"Throughput must be at least ".concat((0,X.uf)(J.lB[J.Hb.GP3].minThroughput)," MB/s"),path:["throughput"]})}s>J.lB[J.Hb.GP3].maxStorage&&i.addIssue({code:Y.z.ZodIssueCode.custom,message:"Allocated disksize must not exceed ".concat((0,X.uf)(J.lB[J.Hb.GP3].maxStorage)," GB"),path:["totalSize"]})}})};var K=a(54507),ee=a(76594),et=a(33471);let ea=e=>{let{visible:t,title:a,description:n}=e;return(0,i.jsx)(l.M,{"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskMangementRestartRequiredSection","data-sentry-source-file":"DiskManagementRestartRequiredSection.tsx",children:t&&(0,i.jsx)(o.E.div,{initial:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},className:"w-full",children:(0,i.jsxs)(ee.VO,{className:"bg-surface-100 text-sm text-foreground-light flex items-center gap-4 relative w-full rounded-md border-spacing-0 border",children:[(0,i.jsx)("div",{className:"w-12 h-12",children:(0,i.jsxs)("div",{className:"relative w-10 h-10 m-1 bg-alternative text-foreground border rounded-full flex items-center justify-center",children:[(0,i.jsx)(K.Z,{strokeWidth:1}),(0,i.jsx)(et.aN,{className:"absolute -right-1.5 -top-1.5"})]})}),(0,i.jsxs)("div",{className:"flex flex-col gap-0 flex-grow",children:[(0,i.jsx)("p",{className:"text-sm text-foreground",children:a}),(0,i.jsx)("p",{className:"text-sm text-foreground-light",children:n})]})]})})})};var ei=a(556),en=a(46382),es=a(89059),er=a(19570),el=a(76028);let eo=e=>{let{beforePrice:t,afterPrice:a,show:n,tooltip:s,className:r,free:c}=e;return(0,i.jsx)(l.M,{"data-sentry-element":"AnimatePresence","data-sentry-component":"BillingChangeBadge","data-sentry-source-file":"BillingChangeBadge.tsx",children:void 0!==t&&void 0!==a&&n&&(0,i.jsx)(o.E.div,{initial:{opacity:0,x:-4,height:0},animate:{opacity:1,x:0,height:"auto"},exit:{opacity:0,x:-4,height:0},transition:{type:"spring",stiffness:800,damping:40,duration:.3},children:(0,i.jsx)(W.C,{variant:"default",className:(0,U.cn)(c?"bg-violet-200 border-violet-900 text-violet-1100":"bg-alternative","bg-opacity-100 text-warning",r),children:(0,i.jsxs)(el.u,{children:[(0,i.jsx)(el.aJ,{asChild:!0,children:(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("span",{className:"text-xs font-mono text-foreground-muted",children:(0,en.xG)(t)}),(0,i.jsx)(d.Z,{size:12,strokeWidth:2,className:"text-foreground-muted"}),(0,i.jsx)(o.E.span,{className:(0,U.cn)(c?"text-violet-1100":"text-foreground","text-xs font-mono"),animate:{scale:[1,1.1,1]},transition:{duration:.12},children:"".concat((0,en.xG)(a),"/month")},a)]})}),void 0!==s&&(0,i.jsx)(el._v,{side:"bottom",children:s})]})})})})};var ed=a(74042),ec=a(82920),eu=a(2723),em=a(55827);let ep={timeRemaining:{label:"timeRemaining",color:"hsl(var(--warning-default))"},hand:{label:"hand",color:"hsl(var(--warning-default))"}};var ef=e=>{let{progress:t}=e;return(0,i.jsxs)("div",{className:"relative w-12 h-12","data-sentry-component":"CountdownTimerRadial","data-sentry-source-file":"CountdownTimerRadial.tsx",children:[(0,i.jsx)(em.BO,{config:ep,className:"absolute w-12 h-12","data-sentry-element":"ChartContainer","data-sentry-source-file":"CountdownTimerRadial.tsx",children:(0,i.jsxs)(ed.B,{data:[{timeRemaining:100,fill:"var(--color-timeRemaining)"}],startAngle:90,endAngle:90-360*t/100,innerRadius:21,outerRadius:14,"data-sentry-element":"RadialBarChart","data-sentry-source-file":"CountdownTimerRadial.tsx",children:[(0,i.jsx)(ec.n,{gridType:"circle",radialLines:!1,stroke:"none",className:"first:fill-foreground-muted/50 last:fill-background-200",polarRadius:[16,11],"data-sentry-element":"PolarGrid","data-sentry-source-file":"CountdownTimerRadial.tsx"}),(0,i.jsx)(eu.G,{dataKey:"timeRemaining",cornerRadius:2,"data-sentry-element":"RadialBar","data-sentry-source-file":"CountdownTimerRadial.tsx"})]})}),(0,i.jsx)(em.BO,{config:ep,className:"absolute top-1 left-1 w-10 h-10","data-sentry-element":"ChartContainer","data-sentry-source-file":"CountdownTimerRadial.tsx",children:(0,i.jsx)(ed.B,{data:[{hand:100,fill:"var(--color-hand)"}],startAngle:80-360*t/100,endAngle:140-360*t/100,innerRadius:14,outerRadius:5,"data-sentry-element":"RadialBarChart","data-sentry-source-file":"CountdownTimerRadial.tsx",children:(0,i.jsx)(eu.G,{dataKey:"hand",cornerRadius:2,isAnimationActive:!0,"data-sentry-element":"RadialBar","data-sentry-source-file":"CountdownTimerRadial.tsx"})})})]})};let ex=e=>{let{visible:t}=e,[a,n]=(0,m.useState)(100),[s,r]=(0,m.useState)(!1),[d,c]=(0,m.useState)(!1);return(0,m.useEffect)(()=>{let e=()=>{r(!0),n(100);let t=setInterval(()=>{n(a=>a<=0?(clearInterval(t),c(!0),setTimeout(()=>{c(!1),n(100),e()},300),0):a-1)},100);return()=>clearInterval(t)},t=setTimeout(e,1e3);return()=>clearTimeout(t)},[]),(0,i.jsx)(l.M,{"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskMangementCoolDownSection","data-sentry-source-file":"DiskManagementCoolDownSection.tsx",children:t&&(0,i.jsx)(o.E.div,{initial:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},className:"w-full",children:(0,i.jsxs)(ee.VO,{className:"bg-surface-100 text-sm text-foreground-light flex items-center gap-4 relative w-full border rounded-md",children:[(0,i.jsx)("div",{className:"w-12 h-12",children:(0,i.jsx)(l.M,{children:s&&(0,i.jsx)(o.E.div,{initial:{scale:.8,opacity:0,y:-8},animate:{scale:d?1.2:1,opacity:1,y:d?-8:0},exit:{scale:.8,opacity:0,y:-8},transition:{duration:d?.3:.8,type:"spring",bounce:.6},children:(0,i.jsx)(ef,{progress:a})},"countdown-timer")})}),(0,i.jsxs)("div",{className:"flex flex-col gap-0 flex-grow",children:[(0,i.jsx)("p",{className:"text-sm text-foreground",children:"For 6 hours you will not be able to change any disk attributes."}),(0,i.jsx)("p",{className:"text-sm text-foreground-light",children:"There is a cooldown period enforced for any disk attribute modifications"})]})]})})})},eh=()=>(0,i.jsxs)(es.SC,{"data-sentry-element":"TableRow","data-sentry-component":"TableHeaderRow","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,i.jsx)(es.ss,{className:"w-[140px] pl-5","data-sentry-element":"TableHead","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Disk attribute"}),(0,i.jsx)(es.ss,{className:"text-right","data-sentry-element":"TableHead","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"-"}),(0,i.jsx)(es.ss,{className:"w-[100px]","data-sentry-element":"TableHead","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Unit"}),(0,i.jsx)(es.ss,{className:"text-right pr-5","data-sentry-element":"TableHead","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Price Change"})]}),eg=e=>{let{attribute:t,defaultValue:a,newValue:n,unit:s,beforePrice:r,afterPrice:l,hidePrice:o=!1,priceTooltip:c,upgradeIncluded:u=!1}=e;return(0,i.jsxs)(es.SC,{"data-sentry-element":"TableRow","data-sentry-component":"TableDataRow","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,i.jsx)(es.pj,{className:"pl-5","data-sentry-element":"TableCell","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:(0,i.jsx)("div",{className:"flex flex-row gap-2 items-center",children:(0,i.jsx)("span",{children:t})})}),(0,i.jsx)(es.pj,{className:"text-right font-mono","data-sentry-element":"TableCell","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:a!==n?(0,i.jsx)(W.C,{variant:"default",className:"bg-alternative bg-opacity-100",children:(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("span",{className:"text-xs font-mono text-foreground-muted",children:a.toString()}),(0,i.jsx)(d.Z,{size:12,strokeWidth:2,className:"text-foreground-muted"}),(0,i.jsx)("span",{className:"text-xs font-mono text-foreground",children:n.toString()})]})}):(0,i.jsxs)("span",{className:"text-xs font-mono",children:[(0,i.jsx)("span",{className:"text-foreground-muted"}),a]})}),(0,i.jsx)(es.pj,{className:"text-xs font-mono","data-sentry-element":"TableCell","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:s}),(0,i.jsx)(es.pj,{className:"text-right pr-5","data-sentry-element":"TableCell","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:!u&&o?(0,i.jsx)("span",{className:"text-xs font-mono",children:"-"}):r!==l||u?(0,i.jsx)(eo,{show:!0,beforePrice:r,afterPrice:l,tooltip:c,free:u}):(0,i.jsx)("span",{className:"text-xs font-mono",children:(0,en.xG)(r)})})]})},ev=e=>{var t,a,n,r,l,o,d,c,u,p,f,x,g,v,y,b,j,S,w,N,z,P,k,_,I,T,D,C,V,B,F,A,L,Z,U,H,W,q,Y,Q,$,K,en,el;let{isDialogOpen:eo,setIsDialogOpen:ed,disabled:ec,form:eu,numReplicas:em,loading:ep,onSubmit:ef,message:ev,buttonSize:ey="medium"}=e,{project:eb}=(0,h.d2)(),ej=(0,G.l)(),{formState:eS,getValues:ew}=eu,eN=(0,O.Xo)(s.KA.UPDATE,"projects",{resource:{project_id:null==eb?void 0:eb.id}}),{data:ez}=(0,M.Gl)({orgSlug:null==ej?void 0:ej.slug}),{data:eP}=(0,R.F)({projectRef:null==eb?void 0:eb.ref}),ek=null!==(F=null==ez?void 0:ez.plan.id)&&void 0!==F?F:"free",e_=!!Object.keys(eu.formState.dirtyFields).length,eI="Price change includes primary database and ".concat(em," replica").concat(em>1?"s":""),eT=(0,m.useMemo)(()=>{var e;return null!==(e=null==eP?void 0:eP.available_addons)&&void 0!==e?e:[]},[eP]),eD=(0,m.useMemo)(()=>(0,X.uV)(eT,null==eb?void 0:eb.cloud_provider),[eT,null==eb?void 0:eb.cloud_provider]),eC=(0,X.yg)({availableOptions:eD,oldComputeSize:(null===(t=eu.formState.defaultValues)||void 0===t?void 0:t.computeSize)||"ci_micro",newComputeSize:eu.getValues("computeSize"),plan:null!==(A=null==ez?void 0:ez.plan.id)&&void 0!==A?A:"free"}),eM=(0,X.Pl)({planId:ek,oldSize:(null===(a=eS.defaultValues)||void 0===a?void 0:a.totalSize)||0,oldStorageType:null===(n=eS.defaultValues)||void 0===n?void 0:n.storageType,newSize:ew("totalSize"),newStorageType:ew("storageType"),numReplicas:em}),eV=(0,X.G0)({oldStorageType:null===(r=eu.formState.defaultValues)||void 0===r?void 0:r.storageType,oldProvisionedIOPS:(null===(l=eu.formState.defaultValues)||void 0===l?void 0:l.provisionedIOPS)||0,newStorageType:eu.getValues("storageType"),newProvisionedIOPS:eu.getValues("provisionedIOPS"),numReplicas:em}),eR=(0,X.r8)({storageType:eu.getValues("storageType"),newThroughput:eu.getValues("throughput")||0,oldThroughput:(null===(o=eu.formState.defaultValues)||void 0===o?void 0:o.throughput)||0,numReplicas:em}),eB=(null===(d=eu.formState.defaultValues)||void 0===d?void 0:d.computeSize)!==eu.getValues("computeSize"),eO=(null===(c=eu.formState.defaultValues)||void 0===c?void 0:c.totalSize)!==eu.getValues("totalSize"),eG=(null===(u=eu.formState.defaultValues)||void 0===u?void 0:u.storageType)!==eu.getValues("storageType"),eF=(null===(p=eu.formState.defaultValues)||void 0===p?void 0:p.throughput)!==eu.getValues("throughput"),eA=(null===(f=eu.formState.defaultValues)||void 0===f?void 0:f.provisionedIOPS)!==eu.getValues("provisionedIOPS"),eE=(null===(x=eu.formState.defaultValues)||void 0===x?void 0:x.growthPercent)!==eu.getValues("growthPercent"),eL=(null===(g=eu.formState.defaultValues)||void 0===g?void 0:g.minIncrementGb)!==eu.getValues("minIncrementGb"),eZ=(null===(v=eu.formState.defaultValues)||void 0===v?void 0:v.maxSizeGb)!==eu.getValues("maxSizeGb"),eU=eA||eF&&"gp3"===eu.getValues("storageType")||eO;return(0,i.jsxs)(ee.Vq,{open:eo,onOpenChange:ed,"data-sentry-element":"Dialog","data-sentry-component":"DiskManagementReviewAndSubmitDialog","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,i.jsx)(ee.hg,{asChild:!0,"data-sentry-element":"DialogTrigger","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:(0,i.jsx)(ei.u,{size:ey,htmlType:"submit",type:"primary",onClick:async e=>{e.preventDefault(),await eu.trigger()&&ed(!0)},disabled:ec||!e_,tooltip:{content:{side:"bottom",text:eN?ec?"Current form values are invalid":void 0:"You need additional permissions to update disk configuration"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Review changes"})}),(0,i.jsxs)(ee.cZ,{className:"min-w-[620px]","data-sentry-element":"DialogContent","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,i.jsxs)(ee.fK,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,i.jsx)(ee.$N,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Review changes"}),(0,i.jsx)(ee.Be,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Changes will be applied shortly once confirmed."})]}),(0,i.jsx)(ee.P3,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx"}),(eB||eU)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-col gap-2 p-5",children:[(0,i.jsx)(ea,{visible:eB,title:"Resizing your Compute will trigger a project restart",description:"Project will restart automatically on confirmation."}),(0,i.jsx)(ex,{visible:eU})]}),(0,i.jsx)(ee.P3,{})]}),(0,i.jsxs)(es.iA,{"data-sentry-element":"Table","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,i.jsx)(es.xD,{className:"font-mono uppercase text-xs [&_th]:h-auto [&_th]:pb-2 [&_th]:pt-4","data-sentry-element":"TableHeader","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:(0,i.jsx)(eh,{"data-sentry-element":"TableHeaderRow","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx"})}),(0,i.jsxs)(es.RM,{className:"[&_td]:py-0 [&_tr]:h-[50px] [&_tr]:border-dotted","data-sentry-element":"TableBody","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[eB&&(0,i.jsx)(eg,{attribute:"Compute size",defaultValue:(0,X.kW)(null!==(L=null===(y=eu.formState.defaultValues)||void 0===y?void 0:y.computeSize)&&void 0!==L?L:"ci_nano"),newValue:(0,X.kW)(eu.getValues("computeSize")),unit:"-",beforePrice:Number(eC.oldPrice),afterPrice:Number(eC.newPrice),upgradeIncluded:(null==ez?void 0:ez.plan.id)!=="free"&&(null==eb?void 0:eb.infra_compute_size)==="nano"&&"ci_micro"===eu.getValues("computeSize")}),eG&&(0,i.jsx)(eg,{hidePrice:!0,attribute:"Storage Type",defaultValue:null!==(Z=null===(b=eu.formState.defaultValues)||void 0===b?void 0:b.storageType)&&void 0!==Z?Z:"",newValue:eu.getValues("storageType"),unit:"-",beforePrice:0,afterPrice:0}),(eA||eG)&&(0,i.jsx)(eg,{attribute:"IOPS",defaultValue:null!==(U=null===(S=eu.formState.defaultValues)||void 0===S?void 0:null===(j=S.provisionedIOPS)||void 0===j?void 0:j.toLocaleString())&&void 0!==U?U:0,newValue:null===(w=eu.getValues("provisionedIOPS"))||void 0===w?void 0:w.toLocaleString(),unit:"IOPS",beforePrice:Number(eV.oldPrice),afterPrice:Number(eV.newPrice),priceTooltip:em>0?eI:void 0}),"gp3"===eu.getValues("storageType")&&eF&&(0,i.jsx)(eg,{attribute:"Throughput",defaultValue:null!==(H=null===(z=eu.formState.defaultValues)||void 0===z?void 0:null===(N=z.throughput)||void 0===N?void 0:N.toLocaleString())&&void 0!==H?H:0,newValue:null!==(W=null===(P=eu.getValues("throughput"))||void 0===P?void 0:P.toLocaleString())&&void 0!==W?W:0,unit:"MB/s",beforePrice:Number(eR.oldPrice),afterPrice:Number(eR.newPrice),priceTooltip:em>0?eI:void 0}),(eO||eG)&&(0,i.jsx)(eg,{attribute:"Disk size",defaultValue:null!==(q=null===(_=eu.formState.defaultValues)||void 0===_?void 0:null===(k=_.totalSize)||void 0===k?void 0:k.toLocaleString())&&void 0!==q?q:0,newValue:null===(I=eu.getValues("totalSize"))||void 0===I?void 0:I.toLocaleString(),unit:"GB",beforePrice:Number(eM.oldPrice),afterPrice:Number(eM.newPrice),priceTooltip:em>0?eI:void 0}),eE&&(0,i.jsx)(eg,{attribute:"Growth percent",defaultValue:null!==(Y=null===(T=eu.formState.defaultValues)||void 0===T?void 0:T.growthPercent)&&void 0!==Y?Y:J.oc.growthPercent,newValue:null!==(Q=eu.getValues("growthPercent"))&&void 0!==Q?Q:J.oc.growthPercent,unit:"%",beforePrice:0,afterPrice:0}),eL&&(0,i.jsx)(eg,{attribute:"Min increment",defaultValue:null!==($=null===(D=eu.formState.defaultValues)||void 0===D?void 0:D.minIncrementGb)&&void 0!==$?$:J.oc.minIncrementSize,newValue:null!==(K=eu.getValues("minIncrementGb"))&&void 0!==K?K:J.oc.minIncrementSize,unit:"GB",beforePrice:0,afterPrice:0}),eZ&&(0,i.jsx)(eg,{attribute:"Max disk size",defaultValue:null!==(en=null===(V=eu.formState.defaultValues)||void 0===V?void 0:null===(C=V.maxSizeGb)||void 0===C?void 0:C.toLocaleString())&&void 0!==en?en:J.oc.maxSizeGb,newValue:null!==(el=null===(B=eu.getValues("maxSizeGb"))||void 0===B?void 0:B.toLocaleString())&&void 0!==el?el:J.oc.maxSizeGb,unit:"GB",beforePrice:0,afterPrice:0})]})]}),em>0&&(0,i.jsx)("div",{className:"border-t px-4 py-2 text-sm text-foreground-lighter",children:eI}),(0,i.jsxs)(ee.cN,{"data-sentry-element":"DialogFooter","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,i.jsx)(E.z,{block:!0,size:"large",type:"default",onClick:()=>ed(!1),"data-sentry-element":"Button","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Cancel"}),(0,i.jsx)(E.z,{block:!0,type:"warning",size:"large",htmlType:"submit",loading:ep,onClick:async()=>{await ef(eu.getValues())},"data-sentry-element":"Button","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Confirm changes"})]}),ev&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ee.P3,{}),(0,i.jsx)(ee.VO,{children:(0,i.jsxs)(er.bZ,{variant:"error"===ev.type?"destructive":"default",className:"",children:[(0,i.jsx)(et.aN,{}),(0,i.jsx)(er.Cd,{children:ev.message})]})})]})]})]})};var ey=a(96990),eb=a(7456),ej=a(92641),eS=function(e){let{message:t="error",type:a,children:n}=e;return(0,i.jsx)(l.M,{"data-sentry-element":"AnimatePresence","data-sentry-component":"FormMessage","data-sentry-source-file":"FormMessage.tsx",children:t&&(0,i.jsx)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:(0,i.jsx)(H.J,{type:"error"===a?"destructive":"default",className:"mt-2",title:t,children:n})})})};let ew=(0,m.forwardRef)((e,t)=>{let{children:a,label:n}=e;return(0,i.jsxs)("div",{ref:t,className:"flex -space-x-px",children:[a,(0,i.jsx)("div",{className:"border border-strong bg-surface-300 rounded-r-md px-3 flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-foreground-lighter text-xs font-mono",children:n})})]})});ew.displayName="InputPostTab";let eN=e=>{let{form:t}=e,{ref:a}=(0,x.UO)(),{control:n,setValue:s,formState:{errors:r}}=t,{totalSize:l,growthPercent:o,maxSizeGb:d,minIncrementGb:c}=t.watch(),{error:u,isLoading:m,isError:p}=z({projectRef:a}),f=null!=o?o:J.oc.growthPercent,h=null!=c?c:J.oc.minIncrementSize,g=r.maxSizeGb?J.oc.maxSizeGb:null!=d?d:J.oc.maxSizeGb,v=Math.floor(f/100*l),y=Math.min(Math.max(Math.floor(l*f/100),h),200)+l,b=y<g?y:g,j=b-l;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(A.Wi,{name:"growthPercent",control:n,render:e=>{var t;let{field:a}=e;return(0,i.jsxs)(ej.E,{layout:"horizontal",label:"Autoscale growth percent",id:a.name,labelOptional:"Percentage of current disk size to grow",description:r.growthPercent?void 0:"This amounts to ".concat(v," GB based on the current disk size of ").concat(l," GB"),className:"[&>div>span]:text-foreground-lighter",children:[(0,i.jsx)(ew,{label:"%",children:m?(0,i.jsx)("div",{className:(0,U.cn)((0,ey.h)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(eb.O,{className:"w-10 h-4"})}):(0,i.jsx)(A.NI,{children:(0,i.jsx)(ey.I,{...a,type:"number",className:"flex-grow font-mono rounded-r-none max-w-20",value:null!==(t=a.value)&&void 0!==t?t:void 0,disabled:p,onChange:e=>{s("growthPercent",""===e.target.value?null:e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},placeholder:String(J.oc.growthPercent)})})}),u&&(0,i.jsx)(eS,{type:"error",message:u.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"AutoScaleFields.tsx"}),(0,i.jsx)(A.Wi,{name:"minIncrementGb",control:n,render:e=>{var t;let{field:a}=e;return(0,i.jsxs)(ej.E,{layout:"horizontal",label:"Minimum increment",id:a.name,labelOptional:"Minimum value to autoscale disk size by",description:c&&c>v&&!r.minIncrementGb?"This value takes precedence as the minimum increment is larger than the growth percent":void 0,className:"[&>div>span]:text-foreground-lighter",children:[(0,i.jsx)(ew,{label:"GB",children:m?(0,i.jsx)("div",{className:(0,U.cn)((0,ey.h)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(eb.O,{className:"w-10 h-4"})}):(0,i.jsx)(A.NI,{children:(0,i.jsx)(ey.I,{...a,type:"number",className:"flex-grow font-mono rounded-r-none max-w-32",value:null!==(t=a.value)&&void 0!==t?t:void 0,disabled:p,onChange:e=>{s("minIncrementGb",""===e.target.value?null:e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},placeholder:String(J.oc.minIncrementSize)})})}),u&&(0,i.jsx)(eS,{type:"error",message:u.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"AutoScaleFields.tsx"}),(0,i.jsx)(A.Wi,{name:"maxSizeGb",control:n,render:e=>{var t;let{field:a}=e;return(0,i.jsxs)(ej.E,{layout:"horizontal",label:"Maximum disk size",id:a.name,labelOptional:"Maximum size that the disk can grow to",className:"[&>div>span]:text-foreground-lighter",children:[(0,i.jsx)(ew,{label:"GB",children:m?(0,i.jsx)("div",{className:(0,U.cn)((0,ey.h)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(eb.O,{className:"w-10 h-4"})}):(0,i.jsx)(A.NI,{children:(0,i.jsx)(ey.I,{...a,type:"number",className:"flex-grow font-mono rounded-r-none max-w-32",value:null!==(t=a.value)&&void 0!==t?t:void 0,disabled:p,onChange:e=>{s("maxSizeGb",""===e.target.value?null:e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},placeholder:String(J.oc.maxSizeGb)})})}),u&&(0,i.jsx)(eS,{type:"error",message:u.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"AutoScaleFields.tsx"}),(0,i.jsxs)(H.J,{type:"default",showIcon:!1,className:"[&>div]:text-foreground-light",children:["Disk size will automatically be expanded by"," ",(0,i.jsxs)("span",{className:"text-foreground",children:[String(j).length>4?j.toFixed(2):j," ","GB"]})," ","to a total of ",(0,i.jsxs)("span",{className:"text-foreground",children:[b," GB"]})," ","when the database reaches 90% of the disk size"]})]})};var ez=a(4413),eP=a(44459),ek=a(55705),e_=a(32787),eI=a(55458),eT=a(65287),eD=a(18291);function eC(e){var t,a,n,s;let{form:r,disabled:l}=e,{ref:o}=(0,x.UO)(),d=(0,G.l)(),{control:c,formState:p,setValue:f,trigger:g}=r,{data:y}=(0,M.Gl)({orgSlug:null==d?void 0:d.slug}),{project:b,isLoading:j}=(0,h.d2)(),{data:S,isLoading:w,error:N}=(0,R.F)({projectRef:o}),z=j||w,P=(0,m.useMemo)(()=>{var e;return null!==(e=null==S?void 0:S.available_addons)&&void 0!==e?e:[]},[S]),k=(0,m.useMemo)(()=>(0,X.uV)(P,null==b?void 0:b.cloud_provider),[P,null==b?void 0:b.cloud_provider]),_=(0,X.yg)({availableOptions:k,oldComputeSize:(null===(t=r.formState.defaultValues)||void 0===t?void 0:t.computeSize)||"ci_micro",newComputeSize:r.getValues("computeSize"),plan:null!==(a=null==y?void 0:y.plan.id)&&void 0!==a?a:"free"}),I=(0,X.gS)(null!==(n=null==y?void 0:y.plan.id)&&void 0!==n?n:"free",null!==(s=null==b?void 0:b.infra_compute_size)&&void 0!==s?s:"nano");return(0,i.jsx)(A.Wi,{name:"computeSize",control:c,render:e=>{let{field:t}=e;return(0,i.jsx)(eI.W,{...t,onValueChange:e=>{f("computeSize",e,{shouldDirty:!0,shouldValidate:!0}),g("provisionedIOPS"),g("throughput")},defaultValue:t.value,disabled:l,children:(0,i.jsx)(ej.E,{layout:"horizontal",label:"Compute size",id:t.name,className:"gap-5",labelOptional:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eo,{className:"mb-2",show:p.isDirty&&p.dirtyFields.computeSize&&!p.errors.computeSize,beforePrice:Number(_.oldPrice),afterPrice:Number(_.newPrice),free:!!I&&"ci_micro"===r.watch("computeSize")}),(0,i.jsx)("p",{className:"text-foreground-lighter",children:"Hardware resources allocated to your Postgres database"}),(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)(v.G,{abbrev:!1,href:"https://supabase.com/docs/guides/platform/compute-and-disk"})}),(0,i.jsx)(eD.P,{showIcon:!1,type:"default",className:"mt-3 border-violet-900 bg-violet-200 [&_h5]:text-violet-1100",visible:I&&"ci_nano"===r.watch("computeSize"),title:"Upgrade to Micro Compute",description:"This Project is already paying for Micro Compute. You can upgrade to Micro Compute at any time when convenient."})]}),children:(0,i.jsx)("div",{className:N?"":"grid gap-4 grid-cols-[repeat(auto-fit,minmax(min(100%,13em),1fr))]",children:z?Array(10).fill(0).map((e,t)=>(0,i.jsx)(eb.O,{className:"w-full h-[110px] rounded-md"},t)):N?(0,i.jsx)(eS,{message:"Failed to load Compute size options",type:"error",children:(0,i.jsx)("p",{children:null==N?void 0:N.message})}):(0,i.jsxs)(i.Fragment,{children:[k.map(e=>{var t,a,n,s,r,o;let d=(0,e_.p)(null==b?void 0:b.cloud_provider),c=(null==y?void 0:y.plan.id)!=="free"&&(null==b?void 0:b.infra_compute_size)!=="nano"&&"ci_nano"===e.identifier,u=(null==y?void 0:y.plan.id)!=="free"&&(null==b?void 0:b.infra_compute_size)==="nano"&&"ci_nano"===e.identifier?null===(t=k.find(e=>"ci_micro"===e.identifier))||void 0===t?void 0:t.price:e.price;return(0,i.jsx)(eI.Y,{id:e.identifier,showIndicator:!1,value:e.identifier,className:(0,U.cn)("relative text-sm text-left flex flex-col gap-0 px-0 py-3 [&_label]:w-full group] w-full h-[110px]",c&&"opacity-50"),disabled:l||c,label:(0,i.jsxs)(i.Fragment,{children:[I&&"ci_micro"===e.identifier&&(0,i.jsx)("div",{className:"absolute -top-4 -right-3 text-violet-1100 flex items-center gap-1 bg-surface-75 py-0.5 px-2 rounded-full border border-violet-900",children:(0,i.jsx)("span",{children:"No additional charge"})}),(0,i.jsxs)("div",{className:"w-full flex flex-col gap-3 justify-between",children:[(0,i.jsxs)("div",{className:"relative px-3 opacity-50 group-data-[state=checked]:opacity-100 flex justify-between",children:[(0,i.jsx)(eT.e,{className:"inline-flex font-semibold",infraComputeSize:e.name}),(0,i.jsx)("div",{className:"flex items-center space-x-1",children:c?(0,i.jsx)("div",{className:"bg border rounded-lg h-7 w-7 flex items-center justify-center",children:(0,i.jsx)(ez.Z,{size:14})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{className:"text-foreground text-sm font-semibold",children:["$",u]}),(0,i.jsxs)("span",{className:"text-foreground-light translate-y-[1px]",children:[" ","/ ","monthly"===e.price_interval?"month":"hour"]})]})})]}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)("div",{className:"px-3 text-sm flex flex-col gap-1",children:[(0,i.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,i.jsx)(eP.Z,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,i.jsxs)("span",{children:["ci_nano"===e.identifier&&"Up to ",null!==(r=null===(a=e.meta)||void 0===a?void 0:a.memory_gb)&&void 0!==r?r:0," GB memory"]})]}),(0,i.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,i.jsx)(ek.Z,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,i.jsxs)("span",{children:[null!==(o=null===(n=e.meta)||void 0===n?void 0:n.cpu_cores)&&void 0!==o?o:0,(null===(s=e.meta)||void 0===s?void 0:s.cpu_cores)!=="Shared"&&"-core ".concat(d)," ","CPU"]})]})]})})]})]})},e.identifier)}),(0,i.jsx)(eI.Y,{id:"larger-compute",showIndicator:!1,value:"larger-compute",onClick:e=>e.preventDefault(),className:(0,U.cn)("relative text-sm text-left flex flex-col gap-0 px-0 py-3 [&_label]:w-full group] w-full h-[110px]"),label:(0,i.jsx)(u(),{href:"/support/new?ref=".concat(o,"&category=sales&subject=Enquiry%20about%20larger%20instance%20sizes"),children:(0,i.jsxs)("div",{className:"w-full flex flex-col gap-3 justify-between",children:[(0,i.jsxs)("div",{className:"relative px-3 flex justify-between",children:[(0,i.jsx)(eT.e,{infraComputeSize:">16XL"}),(0,i.jsx)("div",{className:"flex items-center space-x-1 opacity-50 ",children:(0,i.jsx)("span",{className:"text-foreground-light text-sm",children:"Contact Us"})})]}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)("div",{className:"px-3 text-sm flex flex-col gap-1",children:[(0,i.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,i.jsx)(eP.Z,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,i.jsx)("span",{children:"Custom memory"})]}),(0,i.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,i.jsx)(ek.Z,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,i.jsx)("span",{children:"Custom CPU"})]})]})})]})})},"larger-compute")]})})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"ComputeSizeField","data-sentry-source-file":"ComputeSizeField.tsx"})}var eM=a(28977),eV=a.n(eM),eR=a(45524),eB=a(33260);let eO=e=>{var t,a;let{isDirty:n,totalSize:s,usedSize:r,newTotalSize:d,oldStorageType:c,newStorageType:u}=e,{ref:m}=(0,x.UO)(),{data:p}=(0,C.bN)({projectRef:m}),f=(null!=p?p:[]).filter(e=>e.identifier!==m),h=s*(null===(t=J.TV[c])||void 0===t?void 0:t.storage),g=d*(null===(a=J.TV[u])||void 0===a?void 0:a.storage);return 0===f.length?null:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l.M,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"DiskManagementReadReplicas.tsx",children:n&&(0,i.jsx)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,i.jsxs)(er.bZ,{variant:"default",className:"bg-transparent",children:[(0,i.jsx)(et.sz,{}),(0,i.jsx)(er.Cd,{children:"Read replicas are provisioned with extra 25% disk size to account for WAL files"}),(0,i.jsxs)(er.X,{children:["Each replica will have a disk size of ",d,"GB, and are billed separately",(0,i.jsx)("ul",{className:"list-disc pl-4 my-3 flex flex-col gap-2",children:f.map((e,t)=>(0,i.jsx)("li",{className:"marker:text-foreground-light",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{children:["ID: ",(0,eB.U)(e.identifier)," (",e.region,"):"]}),(0,i.jsx)(eo,{show:!0,beforePrice:h,afterPrice:g})]})},t))})]})]})})})})},eG=e=>{var t,a,n,s;let{isDirty:r,oldIOPS:d,newIOPS:c,oldStorageType:u,newStorageType:m}=e,{ref:p}=(0,x.UO)(),{data:f}=(0,C.bN)({projectRef:p}),h=(null!=f?f:[]).filter(e=>e.identifier!==p),g=(d-(null===(t=J.lB[u])||void 0===t?void 0:t.includedIops))*(null===(a=J.TV[u])||void 0===a?void 0:a.iops),v=(c-(null===(n=J.lB[m])||void 0===n?void 0:n.includedIops))*(null===(s=J.TV[m])||void 0===s?void 0:s.iops);return 0===h.length?null:(0,i.jsx)(l.M,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskManagementIOPSReadReplicas","data-sentry-source-file":"DiskManagementReadReplicas.tsx",children:r&&(0,i.jsx)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,i.jsxs)(er.bZ,{variant:"default",className:"bg-transparent",children:[(0,i.jsx)(et.sz,{}),(0,i.jsx)(er.Cd,{children:"Read replica IOPS will also be updated to the same value"}),(0,i.jsx)(er.X,{children:(0,i.jsx)("ul",{className:"list-disc pl-4 my-3 flex flex-col gap-2",children:h.map((e,t)=>(0,i.jsx)("li",{className:"marker:text-foreground-light",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{children:["ID: ",(0,eB.U)(e.identifier)," (",e.region,"):"]}),(0,i.jsx)(eo,{show:!0,beforePrice:g,afterPrice:v})]})},t))})})]})})})},eF=e=>{var t,a;let{isDirty:n,oldThroughput:s,newThroughput:r,oldStorageType:d,newStorageType:c}=e,{ref:u}=(0,x.UO)(),{data:m}=(0,C.bN)({projectRef:u}),p=(null!=m?m:[]).filter(e=>e.identifier!==u),f=d===J.Hb.GP3?(s-J.lB[d].includedThroughput)*(null===(t=J.TV[d])||void 0===t?void 0:t.throughput):0,h=c===J.Hb.GP3?(r-J.lB[c].includedThroughput)*(null===(a=J.TV[c])||void 0===a?void 0:a.throughput):0;return 0===p.length?null:(0,i.jsx)(l.M,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskManagementThroughputReadReplicas","data-sentry-source-file":"DiskManagementReadReplicas.tsx",children:n&&(0,i.jsx)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,i.jsxs)(er.bZ,{variant:"default",className:"bg-transparent",children:[(0,i.jsx)(et.sz,{}),(0,i.jsx)(er.Cd,{children:"Read replica throughput will also be updated to the same value"}),(0,i.jsx)(er.X,{children:(0,i.jsx)("ul",{className:"list-disc pl-4 my-3 flex flex-col gap-2",children:p.map((e,t)=>(0,i.jsx)("li",{className:"marker:text-foreground-light",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{children:["ID: ",(0,eB.U)(e.identifier)," (",e.region,"):"]}),(0,i.jsx)(eo,{show:!0,beforePrice:f,afterPrice:h})]})},t))})})]})})})};var eA=a(77687),eE=a(706),eL=a(98809),eZ=a(66822);async function eU(e,t){let{projectRef:a,connectionString:i}=e;if(!a)throw Error("Project ref is required");if(!i)throw Error("Connection string is required");let{result:n}=await (0,eZ.R)({projectRef:a,connectionString:i,sql:"\n    SELECT\n  (\n    SELECT\n      SUM(pg_database_size(pg_database.datname)) AS db_size_bytes\n    FROM\n      pg_database\n  ),\n  (\n    SELECT SUM(size)\n    FROM\n      pg_ls_waldir()\n  ) AS wal_size_bytes"},t);return n[0]}let eH=function(e){let{projectRef:t,connectionString:a}=e,{enabled:i=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,j.a)(w.U.diskBreakdown(t),e=>{let{signal:i}=e;return eU({projectRef:t,connectionString:a},i)},{enabled:i&&void 0!==t,...n})};function eW(e){var t,a,n,s,r;let{form:d}=e,{ref:c}=(0,x.UO)(),{resolvedTheme:u}=(0,eL.F)(),{formState:p,watch:f}=d,h=null==u?void 0:u.includes("dark"),g=(0,eR.Vm)(),{data:v}=T({projectRef:c}),{data:y}=eH({projectRef:c,connectionString:null==g?void 0:g.connectionString}),b=(0,m.useMemo)(()=>{var e,t,a,i,n,s,r;return{availableBytes:null!==(e=null==v?void 0:v.metrics.fs_avail_bytes)&&void 0!==e?e:0,totalUsedBytes:null!==(t=null==v?void 0:v.metrics.fs_used_bytes)&&void 0!==t?t:0,totalDiskSizeBytes:null==v?void 0:v.metrics.fs_size_bytes,dbSizeBytes:Math.max(0,null!==(a=null==y?void 0:y.db_size_bytes)&&void 0!==a?a:0),walSizeBytes:Math.max(0,null!==(i=null==y?void 0:y.wal_size_bytes)&&void 0!==i?i:0),systemBytes:Math.max(0,(null!==(n=null==v?void 0:v.metrics.fs_used_bytes)&&void 0!==n?n:0)-(null!==(s=null==y?void 0:y.db_size_bytes)&&void 0!==s?s:0)-(null!==(r=null==y?void 0:y.wal_size_bytes)&&void 0!==r?r:0))}},[v,y]),j=void 0!==p.dirtyFields.totalSize&&y,S=f("totalSize"),w=(null===(t=p.defaultValues)||void 0===t?void 0:t.totalSize)||0,N=Math.round((null!==(a=null==b?void 0:b.totalUsedBytes)&&void 0!==a?a:0)/F.GB*100)/100,z=Math.min(N/w*100,100),P=Math.round((null!==(n=null==b?void 0:b.dbSizeBytes)&&void 0!==n?n:0)/F.GB*100)/100,k=Math.min(P/S*100,100),_=Math.round((null!==(s=null==b?void 0:b.walSizeBytes)&&void 0!==s?s:0)/F.GB*100)/100,I=Math.min(_/S*100,100),D=Math.round((null!==(r=null==b?void 0:b.systemBytes)&&void 0!==r?r:0)/F.GB*100)/100,C=Math.min(D/S*100,100),M=100*J.kI,V=100*J.kI;return(0,i.jsxs)("div",{className:"flex flex-col gap-2","data-sentry-component":"DiskSpaceBar","data-sentry-source-file":"DiskSpaceBar.tsx",children:[(0,i.jsx)("div",{className:"flex items-center h-6 gap-3",children:(0,i.jsxs)("span",{className:"text-foreground-light text-sm font-mono flex items-center gap-2",children:[N.toFixed(2),(0,i.jsx)("span",{children:"GB used of "}),(0,i.jsx)("span",{className:"text-foreground font-semibold -mt-[2px]",children:(0,i.jsx)(eA.ZP,{value:S,style:{lineHeight:.8},className:"font-mono","data-sentry-element":"MotionNumber","data-sentry-source-file":"DiskSpaceBar.tsx"})})," ","GB"]})}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("div",{className:(0,U.cn)("h-[35px] relative border rounded-sm w-full transition",j?"bg-selection border border-brand-button":"bg-surface-300"),children:[(0,i.jsx)(l.M,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"DiskSpaceBar.tsx",children:(0,i.jsx)(o.E.div,{initial:{rotateY:90,zIndex:2},animate:{rotateY:0,zIndex:1},exit:{rotateY:-90,zIndex:2},transition:{duration:.3},style:{transformOrigin:"left center",backfaceVisibility:"hidden"},className:"absolute inset-0 rounded-sm overflow-hidden","data-sentry-element":"unknown","data-sentry-source-file":"DiskSpaceBar.tsx",children:(0,i.jsxs)("div",{className:"h-full flex",children:[(0,i.jsx)("div",{className:"relative overflow-hidden transition-all duration-500 ease-in-out bg-foreground",style:{width:"".concat(j?k:0===w?0:Math.min(P/w*100,100),"%")},children:(0,i.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"repeating-linear-gradient(\n                            -45deg,\n                            ".concat(h?"rgba(0,0,0,0.1)":"rgba(255,255,255,0.1)",",\n                            ").concat(h?"rgba(0,0,0,0.1) 1px":"rgba(255,255,255,0.1) 1px",",\n                            transparent 1px,\n                            transparent 4px\n                          )")}})}),(0,i.jsx)("div",{className:"relative overflow-hidden transition-all duration-500 ease-in-out bg-_secondary",style:{width:"".concat(j?I:0===w?0:Math.min(_/w*100,100),"%")}}),(0,i.jsx)("div",{className:"relative overflow-hidden transition-all duration-500 ease-in-out bg-destructive-500",style:{width:"".concat(j?C:0===w?0:Math.min(D/w*100,100),"%")}}),!j&&(0,i.jsx)("div",{className:"bg-transparent-800 border-r transition-all duration-500 ease-in-out",style:{width:"".concat(M-z<=0?0:M-z,"%")}})]})},"currentBar")}),(0,i.jsx)(l.M,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"DiskSpaceBar.tsx",children:j&&(0,i.jsx)(o.E.span,{initial:{opacity:0,x:4},animate:{opacity:1,x:0},exit:{opacity:0,x:4},transition:{duration:.12,delay:.12},className:(0,U.cn)((0,W.t)({variant:"success"}),"absolute right-1 top-[5px]"),children:"New disk size"})})]}),(0,i.jsx)(l.M,{initial:!0,"data-sentry-element":"AnimatePresence","data-sentry-source-file":"DiskSpaceBar.tsx",children:!j&&(0,i.jsx)(o.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.1},className:"absolute h-8 w-full -mx-[2px]",children:(0,i.jsxs)("div",{className:"absolute top-0 -left-0 h-full flex items-center transition-all duration-500 ease-in-out",style:{left:"".concat(j?V:M,"%")},children:[(0,i.jsxs)(el.u,{children:[(0,i.jsx)(el.aJ,{asChild:!0,children:(0,i.jsxs)("div",{className:"absolute right-full bottom-0 border mr-2 px-2 py-1 bg-surface-400 rounded text-xs text-foreground-light whitespace-nowrap flex items-center gap-x-1",children:["Autoscaling ",(0,i.jsx)(eE.Z,{size:12})]})}),(0,i.jsxs)(el._v,{side:"bottom",className:"w-[310px] flex flex-col gap-y-1",children:[(0,i.jsx)("p",{children:"Supabase expands your disk storage automatically when the database reached 90% of the disk size. However, any disk modifications, including auto-scaling, can only take place once every 6 hours."}),(0,i.jsxs)("p",{children:["If within those 6 hours you reach 95% of the disk space, your project"," ",(0,i.jsx)("span",{className:"text-destructive-600",children:"will enter read-only mode."})]})]})]}),(0,i.jsx)("div",{className:"w-px h-full bg-border"})]})},"currentSize")})]}),!j&&(0,i.jsxs)("div",{className:"flex items-center space-x-3 text-xs text-foreground-lighter",children:[(0,i.jsx)(eq,{name:"Database",size:b.dbSizeBytes,color:"bg-foreground",description:"Total space on disk used by your database (tables, indexes, data, ...)."}),(0,i.jsx)(eq,{name:"WAL",size:b.walSizeBytes,color:"bg-_secondary",description:"Total space on disk used by the write-ahead log."}),(0,i.jsx)(eq,{name:"System",size:b.systemBytes,color:"bg-destructive-500",description:"Reserved space for the system to ensure your database runs smoothly. You cannot modify this."}),(0,i.jsx)(eq,{name:"Available space",size:b.availableBytes,color:"bg-border",description:"Total available space on the disk left."})]}),(0,i.jsxs)("p",{className:"text-xs text-foreground-lighter my-4",children:[(0,i.jsx)("span",{className:"font-semibold",children:"Note:"})," Disk Size refers to the total space your project occupies on disk, including the database itself (currently"," ",(0,i.jsx)("span",{children:(0,en.td)(null==b?void 0:b.dbSizeBytes,2,"GB")}),"), additional files like the write-ahead log (currently"," ",(0,i.jsx)("span",{children:(0,en.td)(null==b?void 0:b.walSizeBytes,2,"GB")}),"), and other system resources (currently ",(0,i.jsx)("span",{children:(0,en.td)(null==b?void 0:b.systemBytes,2,"GB")}),"). Data can take 5 minutes to refresh."]})]})}let eq=e=>{let{name:t,description:a,color:n,size:s}=e;return(0,i.jsxs)(el.u,{"data-sentry-element":"Tooltip","data-sentry-component":"LegendItem","data-sentry-source-file":"DiskSpaceBar.tsx",children:[(0,i.jsx)(el.aJ,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"DiskSpaceBar.tsx",children:(0,i.jsxs)("div",{className:"flex items-center hover:cursor-help z-10",children:[(0,i.jsx)("div",{className:(0,U.cn)("w-2 h-2 rounded-full mr-2",n)}),(0,i.jsx)("span",{children:t})]})}),(0,i.jsxs)(el._v,{side:"bottom",className:"flex flex-col gap-y-1 max-w-xs","data-sentry-element":"TooltipContent","data-sentry-source-file":"DiskSpaceBar.tsx",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:(0,U.cn)("w-2 h-2 rounded-full mr-2",n)}),(0,i.jsxs)("span",{children:[t," - ",(0,en.td)(s,2,"GB")]})]}),(0,i.jsx)("p",{children:a})]})]})};function eY(e){let{actions:t,form:a}=e,{watch:n}=a,s=n("totalSize"),r=n("storageType")===J.Hb.GP3&&s>J.lB[J.Hb.GP3].maxStorage,d=J.gP.find(e=>e.type===J.Hb.IO2);return(0,i.jsx)(l.M,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskTypeRecommendationSection","data-sentry-source-file":"DiskTypeRecommendationSection.tsx",children:r&&(0,i.jsx)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},children:(0,i.jsx)(H.J,{type:"default",title:"You will need to use ".concat(null==d?void 0:d.name," to use a larger Disk size"),children:(0,i.jsx)("div",{className:"flex flex-col gap-2",children:t&&(0,i.jsx)("div",{children:t})})})})})}function eX(e){let{isDirty:t,onClick:a}=e;return(0,i.jsx)(l.M,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"InputResetButton","data-sentry-source-file":"InputResetButton.tsx",children:t&&(0,i.jsx)(o.E.div,{initial:{opacity:0,scale:.95,x:-2},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.95,x:-2},transition:{duration:.12},children:(0,i.jsx)(E.z,{htmlType:"button",type:"default",size:"small",className:"px-2 text-foreground-light",onClick:a,children:(0,i.jsx)(K.Z,{className:"h-4 w-4","aria-hidden":"true"})})},"reset-disksize")})}function eJ(e){var t,a,n,s,r,l,o;let{form:d,disableInput:c,setAdvancedSettingsOpenState:u}=e,{ref:m}=(0,x.UO)(),{control:p,formState:f,setValue:h,trigger:g,getValues:b,resetField:j,watch:S}=d,w=(0,G.l)(),N=(0,eR.Vm)(),{isLoading:z,error:P,isError:k}=(0,y.IG)({projectRef:m},{enabled:N&&"FLY"!==N.cloud_provider}),{data:_,error:I,isError:D}=(0,M.Gl)({orgSlug:null==w?void 0:w.slug}),{data:C,error:V,isError:R}=T({projectRef:m},{enabled:N&&"FLY"!==N.cloud_provider}),B=I||V||P,O=D||R||k,L=10>eV().utc().diff(eV().utc(null==N?void 0:N.inserted_at),"minute")||(null==N?void 0:N.status)==="COMING_UP",Z=S("storageType"),H=S("totalSize"),W=null!==(r=null==_?void 0:_.plan.id)&&void 0!==r?r:"free",{includedDiskGB:q}=null!==(l=null===J.UT||void 0===J.UT?void 0:J.UT[W])&&void 0!==l?l:{},Y=q[Z],Q=(0,X.Pl)({planId:W,oldSize:(null===(t=f.defaultValues)||void 0===t?void 0:t.totalSize)||0,oldStorageType:null===(a=f.defaultValues)||void 0===a?void 0:a.storageType,newSize:b("totalSize"),newStorageType:b("storageType")}),$=!!f.dirtyFields.totalSize,K=Math.round((null!==(o=null==C?void 0:C.metrics.fs_used_bytes)&&void 0!==o?o:0)/F.GB*100)/100;return(0,i.jsxs)("div",{className:"grid @xl:grid-cols-12 gap-5","data-sentry-component":"DiskSizeField","data-sentry-source-file":"DiskSizeField.tsx",children:[(0,i.jsxs)("div",{className:"col-span-4",children:[(0,i.jsx)(A.Wi,{name:"totalSize",control:p,render:e=>{let{field:t}=e;return(0,i.jsx)(ej.E,{label:"Disk Size",layout:"vertical",id:t.name,children:(0,i.jsxs)("div",{className:"relative flex gap-2 items-center",children:[(0,i.jsx)(ew,{label:"GB",children:z?(0,i.jsx)("div",{className:(0,U.cn)((0,ey.h)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(eb.O,{className:"w-10 h-4"})}):(0,i.jsx)(A.NI,{children:(0,i.jsx)(ey.I,{type:"number",id:t.name,...t,disabled:c||O,className:"w-32 font-mono rounded-r-none",onWheel:e=>e.currentTarget.blur(),onChange:e=>{h("totalSize",e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0}),g("provisionedIOPS"),g("throughput")},min:Y})})}),(0,i.jsx)(eX,{isDirty:$,onClick:()=>{j("totalSize"),g("provisionedIOPS")}})]})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"DiskSizeField.tsx"}),(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,i.jsx)(eo,{className:"mt-1",beforePrice:Number(Q.oldPrice),afterPrice:Number(Q.newPrice),show:f.isDirty&&!f.errors.totalSize&&Q.oldPrice!==Q.newPrice,"data-sentry-element":"BillingChangeBadge","data-sentry-source-file":"DiskSizeField.tsx"}),(0,i.jsxs)("span",{className:"text-foreground-lighter text-sm",children:[Y>0&&(null==_?void 0:_.plan.id)&&"Your plan includes ".concat(Y," GB of disk size for ").concat(Z,"."),(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)(v.G,{abbrev:!1,href:"https://supabase.com/docs/guides/platform/database-size","data-sentry-element":"DocsButton","data-sentry-source-file":"DiskSizeField.tsx"})})]}),(0,i.jsx)(eY,{form:d,actions:(0,i.jsx)(E.z,{type:"default",onClick:()=>{h("storageType","io2"),g("provisionedIOPS"),g("totalSize"),u(!0)},children:"Change to High Performance SSD"}),"data-sentry-element":"DiskTypeRecommendationSection","data-sentry-source-file":"DiskSizeField.tsx"})]})]}),(0,i.jsxs)("div",{className:"col-span-8",children:[(0,i.jsx)(eW,{form:d,"data-sentry-element":"DiskSpaceBar","data-sentry-source-file":"DiskSizeField.tsx"}),L?(0,i.jsx)(eS,{message:"Disk size data is not available for ~10 minutes after project creation",type:"error"}):B&&(0,i.jsx)(eS,{message:"Failed to load disk size data",type:"error",children:null==B?void 0:B.message}),(0,i.jsx)(eO,{isDirty:void 0!==f.dirtyFields.totalSize,totalSize:1.25*((null===(n=f.defaultValues)||void 0===n?void 0:n.totalSize)||0),usedSize:K,newTotalSize:1.25*H,oldStorageType:null===(s=f.defaultValues)||void 0===s?void 0:s.storageType,newStorageType:b("storageType"),"data-sentry-element":"DiskManagementDiskSizeReadReplicas","data-sentry-source-file":"DiskSizeField.tsx"})]})]})}function eQ(e){let{actions:t,form:a}=e,{watch:n}=a,s=n("computeSize"),r=n("provisionedIOPS"),d=(0,X.b4)(r),c=r>(0,X.vf)(null!=s?s:"ci_micro")&&!J.Pc.includes(s);return(0,i.jsx)(l.M,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"ComputeSizeRecommendationSection","data-sentry-source-file":"ComputeSizeRecommendationSection.tsx",children:c&&(0,i.jsx)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},children:(0,i.jsx)(H.J,{type:"default",title:"Your Compute size can only support a baseline IOPS of ".concat(J.sS[s]),children:(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm text-foreground-light",children:["To achieve sustained IOPS performance we recommend using the"," ",(0,i.jsx)("span",{className:"text-foreground",children:(0,X.kW)(d)})," ","compute size."]})}),t&&(0,i.jsx)("div",{children:t})]})})})})}function e$(e){var t,a,n;let{form:s,disableInput:r}=e,{ref:l}=(0,x.UO)(),{control:o,formState:d,setValue:c,trigger:u,getValues:m,watch:p}=s,f=p("storageType"),h=p("computeSize"),g=null!==(n=p("provisionedIOPS"))&&void 0!==n?n:0,{isLoading:v,error:b,isError:j}=(0,y.IG)({projectRef:l}),S=(0,X.G0)({oldStorageType:null===(t=d.defaultValues)||void 0===t?void 0:t.storageType,oldProvisionedIOPS:(null===(a=d.defaultValues)||void 0===a?void 0:a.provisionedIOPS)||0,newStorageType:m("storageType"),newProvisionedIOPS:m("provisionedIOPS")}),w=J.Pc.includes(h)&&"gp3"===f;return(0,i.jsx)(A.Wi,{control:o,name:"provisionedIOPS",render:e=>{var t,a,n,l,o;let{field:p}=e,x=(0,X.b4)(g);return(0,i.jsxs)(ej.E,{layout:"horizontal",label:"IOPS",id:p.name,description:(0,i.jsxs)("span",{className:"flex flex-col gap-y-2",children:[(0,i.jsx)("p",{children:"Use higher IOPS for high-throughput apps."}),(0,i.jsx)(eQ,{form:s,actions:(0,i.jsxs)(E.z,{type:"default",onClick:()=>{c("computeSize",null!=x?x:"ci_nano"),u("provisionedIOPS")},children:["Update to ",(0,X.kW)(x)]})}),!d.errors.provisionedIOPS&&(0,i.jsx)(eG,{isDirty:void 0!==d.dirtyFields.provisionedIOPS,oldIOPS:null!==(o=null===(t=d.defaultValues)||void 0===t?void 0:t.provisionedIOPS)&&void 0!==o?o:0,newIOPS:p.value,oldStorageType:null===(a=d.defaultValues)||void 0===a?void 0:a.storageType,newStorageType:m("storageType")})]}),labelOptional:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eo,{show:(f!==(null===(n=d.defaultValues)||void 0===n?void 0:n.storageType)||"gp3"===f&&p.value!==(null===(l=d.defaultValues)||void 0===l?void 0:l.provisionedIOPS))&&!d.errors.provisionedIOPS&&!w,beforePrice:Number(S.oldPrice),afterPrice:Number(S.newPrice),className:"mb-2"}),(0,i.jsx)("p",{className:"text-foreground-lighter",children:"Input/output operations per second."})]}),children:[(0,i.jsx)(ew,{label:"IOPS",children:v?(0,i.jsx)("div",{className:(0,U.cn)((0,ey.h)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(eb.O,{className:"w-10 h-4"})}):(0,i.jsx)(A.NI,{children:(0,i.jsx)(ey.I,{type:"number",className:"flex-grow font-mono rounded-r-none max-w-32",...p,value:w?J.sS[h]:p.value,disabled:r||w||j,onChange:e=>{c("provisionedIOPS",e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})}})})}),b&&(0,i.jsx)(eS,{type:"error",message:b.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"IOPSField","data-sentry-source-file":"IOPSField.tsx"})}var eK=a(53823),e0=a(83);let e1=["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","us-east-1","us-east-2","us-west-1","us-west-2"];function e2(e){var t;let{form:a,disableInput:n}=e,{control:s,trigger:r}=a,l=(0,eR.Vm)(),{ref:o}=(0,x.UO)(),d=e1.includes(null!==(t=null==l?void 0:l.region)&&void 0!==t?t:""),{isLoading:c,error:u,isError:m}=(0,y.IG)({projectRef:o});return(0,i.jsx)(A.Wi,{name:"storageType",control:s,render:e=>{let{field:t}=e;return(0,i.jsxs)(ej.E,{layout:"horizontal",label:"Storage type",children:[(0,i.jsxs)(e0.Ph,{...t,onValueChange:async e=>{t.onChange(e),"gp3"===e?!a.getFieldState("provisionedIOPS").isDirty&&(!a.getValues("provisionedIOPS")||a.getValues("provisionedIOPS")<J.lB[J.Hb.GP3].minIops)&&a.setValue("provisionedIOPS",J.lB[J.Hb.GP3].minIops):!a.getFieldState("provisionedIOPS").isDirty&&(!a.getValues("provisionedIOPS")||a.getValues("provisionedIOPS")<J.lB[J.Hb.IO2].minIops)&&a.setValue("provisionedIOPS",J.lB[J.Hb.IO2].minIops),await r("provisionedIOPS"),await r("totalSize")},defaultValue:t.value,disabled:n||m,children:[c?(0,i.jsx)(eb.O,{className:(0,U.cn)((0,E.d)({size:"small"}),"h-14 min-w-[420px] duration-[2s]")}):(0,i.jsx)(A.NI,{children:(0,i.jsx)(e0.i4,{className:"h-14 max-w-[420px]",children:(0,i.jsx)(e0.ki,{})})}),(0,i.jsx)(e0.Bw,{children:(0,i.jsx)(i.Fragment,{children:J.gP.map(e=>{let t="io2"===e.type&&!d;return(0,i.jsxs)(el.u,{children:[(0,i.jsx)(el.aJ,{asChild:!0,children:(0,i.jsx)(e0.Ql,{disabled:n||t,value:e.type,className:(0,U.cn)(t&&"!pointer-events-auto"),children:(0,i.jsxs)("div",{className:"flex flex-col gap-0 items-start",children:[(0,i.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,i.jsx)("span",{className:"text-sm text-foreground",children:e.name})," ",(0,i.jsx)("div",{children:(0,i.jsx)(W.C,{variant:"outline",className:"font-mono bg-alternative bg-opacity-100",children:e.type})})]}),(0,i.jsx)("p",{className:"text-foreground-light",children:e.description})]})},e.type)}),t&&(0,i.jsxs)(el._v,{side:"right",className:"w-64",children:["IO2 Volume Type is not available in your project's region (",null==l?void 0:l.region,"). More information available"," ",(0,i.jsx)(eK.U,{href:"https://docs.aws.amazon.com/ebs/latest/userguide/provisioned-iops.html#io2-bx-considerations",children:"here"}),"."]})]},e.type)})})})]}),u&&(0,i.jsx)(eS,{type:"error",message:u.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"StorageTypeField","data-sentry-source-file":"StorageTypeField.tsx"})}function e3(e){var t,a;let{form:n,disableInput:s}=e,{ref:r}=(0,x.UO)(),{control:d,formState:c,setValue:u,getValues:p,watch:f}=n,h=f("storageType"),g=f("totalSize"),v=f("computeSize"),b=null===(t=c.defaultValues)||void 0===t?void 0:t.throughput,{isLoading:j,error:S}=(0,y.IG)({projectRef:r}),w=(0,X.r8)({storageType:n.getValues("storageType"),newThroughput:n.getValues("throughput")||0,oldThroughput:(null===(a=n.formState.defaultValues)||void 0===a?void 0:a.throughput)||0}),N=J.Pc.includes(v)&&"gp3"===h;return(0,m.useEffect)(()=>{if("io2"===h)u("throughput",void 0);else if("gp3"===h){let e=n.getValues("throughput"),{minThroughput:t,maxThroughput:a}=J.lB[J.Hb.GP3];(!e||e<t||e>a)&&u("throughput",t)}},[h,g,u,n]),(0,i.jsx)(l.M,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"ThroughputField","data-sentry-source-file":"ThroughputField.tsx",children:"gp3"===p("storageType")&&(0,i.jsx)(o.E.div,{initial:{opacity:0,x:-4,height:0},animate:{opacity:1,x:0,height:"auto"},exit:{opacity:0,x:-4,height:0},transition:{duration:.1},style:{overflow:"hidden"},children:(0,i.jsx)(A.Wi,{name:"throughput",control:d,render:e=>{var t,a;let{field:n}=e;return(0,i.jsxs)(ej.E,{label:"Throughput",layout:"horizontal",description:(0,i.jsxs)("span",{className:"flex flex-col gap-y-2",children:[(0,i.jsx)("p",{children:"Higher throughput suits applications with high data transfer needs."}),!c.errors.throughput&&(0,i.jsx)(eF,{isDirty:void 0!==c.dirtyFields.throughput,oldThroughput:null!=b?b:0,newThroughput:null!==(a=n.value)&&void 0!==a?a:0,oldStorageType:null===(t=c.defaultValues)||void 0===t?void 0:t.storageType,newStorageType:p("storageType")})]}),labelOptional:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eo,{show:c.isDirty&&c.dirtyFields.throughput&&!c.errors.throughput,beforePrice:Number(w.oldPrice),afterPrice:Number(w.newPrice),className:"mb-2"}),(0,i.jsx)("p",{className:"text-foreground-lighter",children:"Amount of data read/written per second."})]}),children:[(0,i.jsx)(ew,{label:"MB/s",children:j?(0,i.jsx)("div",{className:(0,U.cn)((0,ey.h)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(eb.O,{className:"w-10 h-4"})}):(0,i.jsx)(A.NI,{children:(0,i.jsx)(ey.I,{type:"number",...n,value:N?J.Qq[v]:n.value,onChange:e=>{u("throughput",e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},className:"flex-grow font-mono rounded-r-none max-w-32",disabled:s||N||"io2"===h})})}),S&&(0,i.jsx)(eS,{type:"error",message:S.message})]})}})},"throughPutContainer")})}var e5=e=>{let{seconds:t}=e,a={minimumIntegerDigits:2},n=e=>e.toString().padStart(2,"0");return(0,i.jsxs)("span",{className:"inline-flex gap-2","data-sentry-component":"CountdownTimerSpan","data-sentry-source-file":"CountdownTimerSpan.tsx",children:[(0,i.jsx)("span",{className:"text-foreground-lighter text-sm p-0",children:"Time remaining: "}),(0,i.jsxs)("span",{className:"text-foreground text-sm font-mono flex items-center gap-0",children:[(0,i.jsx)(eA.ZP,{format:a,value:Number(n(Math.floor(t/3600))),"data-sentry-element":"MotionNumber","data-sentry-source-file":"CountdownTimerSpan.tsx"}),"hr",(0,i.jsx)(eA.ZP,{format:a,value:Number(n(Math.floor(t%3600/60))),"data-sentry-element":"MotionNumber","data-sentry-source-file":"CountdownTimerSpan.tsx"}),"m",(0,i.jsx)(eA.ZP,{format:a,value:Number(n(t%60)),"data-sentry-element":"MotionNumber","data-sentry-source-file":"CountdownTimerSpan.tsx"})]})]})},e4=a(49584);function e8(){let{ref:e}=(0,x.UO)(),[t,a]=(0,m.useState)(0),{remainingDuration:n,error:s,isSuccess:r}=(0,y.WU)({projectRef:e}),d=t/b.Xr*100;return(0,m.useEffect)(()=>{n>0&&a(n)},[n]),(0,m.useEffect)(()=>{if(t<=0)return;let e=setInterval(()=>{a(Math.max(0,t-1))},1e3);return()=>clearInterval(e)},[t]),(0,i.jsxs)(l.M,{"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskCountdownRadial","data-sentry-source-file":"DiskCountdownRadial.tsx",children:[t>0&&r&&(0,i.jsx)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:(0,i.jsx)(e4.Zb,{className:"px-2 rounded bg-surface-100",children:(0,i.jsxs)(e4.aY,{className:"py-3 flex gap-3 px-3 items-start",children:[(0,i.jsx)(ef,{progress:d}),(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-foreground text-sm p-0",children:"6-hour cooldown period is in progress"}),(0,i.jsx)("p",{className:"text-foreground-lighter text-sm p-0",children:"You can't modify your disk configuration again until the 6-hour cool down period ends."})]}),(0,i.jsx)(e5,{seconds:t})]})]})})}),s&&(0,i.jsx)(eS,{message:s.message,type:"error"})]})}function e6(){let e=(0,G.l)(),t=(0,eR.Vm)(),{data:a,isSuccess:n}=(0,M.Gl)({orgSlug:null==e?void 0:e.slug}),s=n&&(null==a?void 0:a.plan.id)!=="free"&&!(null==a?void 0:a.usage_billing_enabled)&&(null==t?void 0:t.cloud_provider)!=="FLY";return(0,i.jsx)(l.M,{"data-sentry-element":"AnimatePresence","data-sentry-component":"SpendCapDisabledSection","data-sentry-source-file":"SpendCapDisabledSection.tsx",children:s&&(0,i.jsx)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:(0,i.jsxs)(H.J,{type:"default",children:[(0,i.jsx)(er.Cd,{children:"Disable spend cap to manage Disk configuration"}),(0,i.jsx)(er.X,{children:"To access disk management features, you need to disable your spend cap. These features offer more flexibility and control over your database disk size."}),(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)(u(),{href:"/org/".concat(null==e?void 0:e.slug,"/billing?panel=costControl"),className:(0,U.cn)((0,E.d)({type:"default",size:"tiny"})),children:"Disable spend cap"})})]})})})}function e9(){var e,t,a,c;let{project:j,isLoading:S}=(0,h.d2)(),w=(0,G.l)(),{ref:N}=(0,x.UO)(),P=(0,r.NL)(),{data:k}=(0,B.q)(),I=null===(e=null!=k?k:[])||void 0===e?void 0:e.find(e=>e.project===(null==j?void 0:j.ref)),W=null==I?void 0:I.is_readonly_mode_enabled,Y=(null==j?void 0:j.cloud_provider)==="FLY",Q=(0,O.N4)(),K=(0,O.Xo)(s.KA.UPDATE,"projects",{resource:{project_id:null==j?void 0:j.id}}),[ee,et]=(0,m.useState)(!1),[ei,en]=(0,m.useState)(!1),[es,er]=(0,m.useState)(null),[el,eo]=(0,m.useState)(!1),{data:ed,isSuccess:ec}=(0,C.bN)({projectRef:N}),{data:eu,isSuccess:em}=(0,y.IG)({projectRef:N},{refetchInterval:ei,refetchOnWindowFocus:!1,onSuccess:e=>{var t;let{type:a,iops:i,throughput_mbps:n,size_gb:s}=null!==(t=null==e?void 0:e.attributes)&&void 0!==t?t:{size_gb:0};"requested_modification"in e||!1===ei||(eV.reset({storageType:a,provisionedIOPS:i,throughput:n,totalSize:s}),en(!1),f.Am.success("Disk configuration changes have been successfully applied!"))},enabled:null!=j&&!Y}),{isSuccess:ep}=(0,R.F)({projectRef:N}),{isWithinCooldownWindow:ef,isSuccess:ex}=(0,y.WU)({projectRef:N,enabled:null!=j&&!Y}),{data:eh,isSuccess:eg}=T({projectRef:N},{enabled:null!=j&&!Y}),{data:ey,isSuccess:eb}=(0,M.Gl)({orgSlug:null==w?void 0:w.slug}),{data:ej,isSuccess:eS}=z({projectRef:N},{enabled:null!=j&&!Y}),{type:ew,iops:ez,throughput_mbps:eP,size_gb:ek}=null!==(a=null==eu?void 0:eu.attributes)&&void 0!==a?a:{size_gb:0,iops:0},{growth_percent:e_,max_size_gb:eI,min_increment_gb:eT}=null!=ej?ej:{},eM={storageType:null!=ew?ew:J.Hb.GP3,provisionedIOPS:ez,throughput:eP,totalSize:ek,computeSize:(null==j?void 0:j.infra_compute_size)?(0,X.jV)(null==j?void 0:j.infra_compute_size):void 0,growthPercent:e_,minIncrementGb:eT,maxSizeGb:eI},eV=(0,p.cI)({resolver:(0,n.F)($(eM.totalSize,null==j?void 0:j.cloud_provider)),defaultValues:eM,mode:"onBlur",reValidateMode:"onChange"}),eR=ep&&em&&eg&&ec&&eb&&eS&&ex,eB=(null==eu?void 0:eu.requested_modification)!==void 0,eO=(null!=ed?ed:[]).filter(e=>e.identifier!==N),eG=(null==ey?void 0:ey.plan.id)==="free",{formState:eF}=eV,eA=Math.round((null!==(c=null==eh?void 0:eh.metrics.fs_used_bytes)&&void 0!==c?c:0)/F.GB*100)/100,eE=(null===(t=eF.defaultValues)||void 0===t?void 0:t.totalSize)||0,eL=J.Li.includes(eV.watch("computeSize"))&&(null==ey?void 0:ey.plan.id)!=="free",eZ=(null==j?void 0:j.parent_project_ref)!==void 0,eU=eB||eG||ef||!K||Y,eH=!!Object.keys(eV.formState.dirtyFields).length,eW=(null==j?void 0:j.status)===F.S.RESIZING,eq=eB&&!eW,eY=Q&&!K&&!S,{mutateAsync:eX,isLoading:eQ}=(0,b.H$)({onError:()=>{},onSuccess:()=>en(2e3)}),{mutateAsync:eK,isLoading:e0}=(0,V.b)({onError:()=>{},onSuccess:()=>{(0,D.k7)(P,N,F.S.RESIZING)}}),{mutateAsync:e1,isLoading:e5}=_({onError:()=>{}}),e4=async e=>{let t=!1;er(null);try{var a,i,n,s,r,l,o,d;(e.storageType!==(null===(a=eV.formState.defaultValues)||void 0===a?void 0:a.storageType)||e.provisionedIOPS!==(null===(i=eV.formState.defaultValues)||void 0===i?void 0:i.provisionedIOPS)||e.throughput!==(null===(n=eV.formState.defaultValues)||void 0===n?void 0:n.throughput)||e.totalSize!==(null===(s=eV.formState.defaultValues)||void 0===s?void 0:s.totalSize))&&(t=!0,await eX({ref:N,provisionedIOPS:e.provisionedIOPS,storageType:e.storageType,totalSize:e.totalSize,throughput:e.throughput})),(e.growthPercent!==(null===(r=eV.formState.defaultValues)||void 0===r?void 0:r.growthPercent)||e.minIncrementGb!==(null===(l=eV.formState.defaultValues)||void 0===l?void 0:l.minIncrementGb)||e.maxSizeGb!==(null===(o=eV.formState.defaultValues)||void 0===o?void 0:o.maxSizeGb))&&await e1({projectRef:N,growthPercent:e.growthPercent,minIncrementGb:e.minIncrementGb,maxSizeGb:e.maxSizeGb}),e.computeSize!==(null===(d=eV.formState.defaultValues)||void 0===d?void 0:d.computeSize)&&await eK({projectRef:N,variant:e.computeSize,type:"compute_instance",suppressToast:!0}),et(!1),eV.reset(e),f.Am.success("Successfully updated disk settings!".concat(t?" The requested changes will be applied to your disk shortly.":""))}catch(e){er({message:e instanceof Error?e.message:"An unknown error occurred",type:"error"})}};return(0,m.useEffect)(()=>{(em||eR)&&eV.reset(eM,{})},[eR,em]),(0,i.jsx)(A.l0,{...eV,"data-sentry-element":"Form_Shadcn_","data-sentry-component":"DiskManagementForm","data-sentry-source-file":"DiskManagementForm.tsx",children:(0,i.jsxs)("form",{onSubmit:eV.handleSubmit(e4),className:"flex flex-col gap-8",children:[(0,i.jsxs)(g._S,{className:"relative flex flex-col gap-10",bottomPadding:!0,"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"DiskManagementForm.tsx",children:[(0,i.jsx)(eD.P,{type:"default",visible:eG,title:"Compute and Disk configuration is not available on the Free Plan",actions:(0,i.jsx)(E.z,{type:"default",asChild:!0,children:(0,i.jsx)(u(),{href:"/org/".concat(null==w?void 0:w.slug,"/billing?panel=subscriptionPlan&source=diskManagementConfigure"),children:"Upgrade plan"})}),description:"You will need to upgrade to at least the Pro Plan to configure compute and disk","data-sentry-element":"NoticeBar","data-sentry-source-file":"DiskManagementForm.tsx"}),eW||eq||eY?(0,i.jsxs)("div",{className:"relative flex flex-col gap-10",children:[(0,i.jsx)(ea,{visible:eW,title:"Your project will now automatically restart.",description:"Your project will be unavailable for up to 2 mins."}),(0,i.jsx)(eD.P,{type:"default",visible:eq,title:"Disk configuration changes have been requested",description:"The requested changes will be applied to your disk shortly"}),(0,i.jsx)(eD.P,{type:"default",visible:eY,title:"You do not have permission to update disk configuration",description:"Please contact your organization administrator to update your disk configuration"})]}):null,(0,i.jsx)(L.Z,{"data-sentry-element":"Separator","data-sentry-source-file":"DiskManagementForm.tsx"}),(0,i.jsx)(eC,{form:eV,disabled:eG,"data-sentry-element":"ComputeSizeField","data-sentry-source-file":"DiskManagementForm.tsx"}),(0,i.jsx)(L.Z,{"data-sentry-element":"Separator","data-sentry-source-file":"DiskManagementForm.tsx"}),(0,i.jsx)(e6,{"data-sentry-element":"SpendCapDisabledSection","data-sentry-source-file":"DiskManagementForm.tsx"}),(0,i.jsx)(eD.P,{type:"default",visible:Y,title:"Disk configuration is not available on Fly Postgres",description:eZ?"Delete and recreate your Preview Branch to configure disk size. It was deployed on an older branching infrastructure.":"The Fly Postgres offering is deprecated - please migrate your instance to Supabase to configure your disk.","data-sentry-element":"NoticeBar","data-sentry-source-file":"DiskManagementForm.tsx"}),!Y&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,i.jsx)(e8,{}),!W&&eA/eE*100>=90&&ef&&(0,i.jsx)(H.J,{type:"destructive",title:"Database size is currently over 90% of disk size",description:"Your project will enter read-only mode once you reach 95% of the disk space to prevent your database from exceeding the disk limitations",children:(0,i.jsx)(v.G,{abbrev:!1,className:"mt-2",href:"https://supabase.com/docs/guides/platform/database-size#read-only-mode"})}),W&&(0,i.jsx)(H.J,{type:"destructive",title:"Project is currently in read-only mode",description:"You will need to manually override read-only mode and reduce the database size to below 95% of the disk size",children:(0,i.jsx)(v.G,{abbrev:!1,className:"mt-2",href:"https://supabase.com/docs/guides/platform/database-size#disabling-read-only-mode"})})]}),(0,i.jsx)(eJ,{form:eV,disableInput:eU,setAdvancedSettingsOpenState:eo}),(0,i.jsx)(L.Z,{}),(0,i.jsxs)(Z.zF,{className:"-space-y-px",open:el,onOpenChange:()=>eo(e=>!e),children:[(0,i.jsxs)(Z.wy,{className:"px-8 py-3 w-full border flex items-center gap-6 rounded-t data-[state=closed]:rounded-b group justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-col items-start",children:[(0,i.jsx)("span",{className:"text-sm text-foreground",children:"Advanced disk settings"}),(0,i.jsx)("span",{className:"text-sm text-foreground-light text-left",children:"Specify additional settings for your disk, including autoscaling configuration, IOPS, throughput, and disk type."})]}),(0,i.jsx)(d.Z,{size:16,className:"text-foreground-light transition-all group-data-[state=open]:rotate-90",strokeWidth:1})]}),(0,i.jsxs)(Z.Fw,{className:(0,U.cn)("flex flex-col gap-8 py-8 transition-all","data-[state=open]:border data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down"),children:[(0,i.jsx)("div",{className:"px-8 flex flex-col gap-y-8",children:(0,i.jsx)(eN,{form:eV})}),(0,i.jsx)(L.Z,{}),(0,i.jsxs)("div",{className:"px-8 flex flex-col gap-y-8",children:[(0,i.jsx)(eD.P,{type:"default",visible:eL,title:"Adjusting disk configuration requires LARGE Compute size or above",description:"Increase your compute size to adjust your disk's storage type, ".concat("gp3"===eV.getValues("storageType")?"IOPS, ":""," and throughput"),actions:(0,i.jsx)(E.z,{type:"default",onClick:()=>{eV.setValue("computeSize","ci_large")},children:"Change to LARGE Compute"})}),(0,i.jsx)(e2,{form:eV,disableInput:eL||eU}),(0,i.jsx)(e$,{form:eV,disableInput:eL||eU}),(0,i.jsx)(e3,{form:eV,disableInput:eL||eU})]})]})]})]})]}),(0,i.jsx)(l.M,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"DiskManagementForm.tsx",children:eH?(0,i.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.1,delay:.2},className:"z-10 w-full left-0 right-0 sticky bottom-0 bg-surface-100 border-t h-16 items-center flex",children:(0,i.jsxs)("div",{className:(0,U.cn)(g.y,g.s_,"flex items-center gap-3 justify-end"),children:[(0,i.jsx)(q,{formState:eF}),(0,i.jsx)(E.z,{type:"default",onClick:()=>eV.reset(),disabled:!eH,size:"medium",children:"Cancel"}),(0,i.jsx)(ev,{loading:eQ||e0||e5,disabled:eY,form:eV,numReplicas:eO.length,isDialogOpen:ee,onSubmit:e4,setIsDialogOpen:et,message:es})]})}):null})]})})}var e7=a(30578),te=a(34507);let tt=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g._S,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"compute-and-disk.tsx",children:(0,i.jsxs)(g.tU,{"data-sentry-element":"ScaffoldHeader","data-sentry-source-file":"compute-and-disk.tsx",children:[(0,i.jsx)(g.q7,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"compute-and-disk.tsx",children:"Compute and Disk"}),(0,i.jsx)(g.FW,{"data-sentry-element":"ScaffoldDescription","data-sentry-source-file":"compute-and-disk.tsx",children:"Configure the compute and disk settings for your project."})]})}),(0,i.jsx)(e9,{"data-sentry-element":"DiskManagementForm","data-sentry-source-file":"compute-and-disk.tsx"})]});tt.getLayout=e=>(0,i.jsx)(e7.Z,{children:(0,i.jsx)(te.Z,{children:e})});var ta=tt},65287:function(e,t,a){"use strict";a.d(t,{e:function(){return r}});var i=a(97458),n=a(9085),s=a(28453);function r(e){let{infraComputeSize:t,className:a,...r}=e,l=(null==t?void 0:t.toLocaleLowerCase())==="micro"||(null==t?void 0:t.toLocaleLowerCase())==="nano";return(0,i.jsx)(n.C,{className:(0,s.cn)("rounded-md text-center flex justify-center font-mono uppercase","group-data-[state=open]:bg-opacity-20 group-data-[state=open]:ring-2 group-data-[state=open]:ring-opacity-20","transition-all",l?"group-data-[state=open]:ring-foreground-muted bg-opacity-50 group-data-[state=open]:bg-opacity-75":"group-data-[state=open]:ring-brand",a),variant:t?l?"default":"brand":"default",...r,"data-sentry-element":"Badge","data-sentry-component":"ComputeBadge","data-sentry-source-file":"index.tsx",children:t})}},2669:function(e,t,a){"use strict";a.d(t,{ZP:function(){return m}});var i=a(97458),n=a(52983),s=a(63805),r=a(28453);function l(e){let{children:t,className:a,tag:n="div",style:s}=e;return(0,i.jsx)("".concat(n),{style:s,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}l.Title=function(e){let{className:t,level:a=1,children:n,style:s}=e;return(0,i.jsx)("h".concat(a),{style:s,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:n})},l.Text=function(e){let{className:t,children:a,style:n,type:s,disabled:r,mark:l,code:o,keyboard:d,underline:c,strikethrough:u,strong:m,small:p}=e;return o?(0,i.jsx)("code",{style:n,children:a}):l?(0,i.jsx)("mark",{style:n,children:a}):d?(0,i.jsx)("kbd",{style:n,children:a}):m?(0,i.jsx)("strong",{style:n,children:a}):(0,i.jsx)("span",{style:n,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:a})},l.Link=function(e){let{children:t,target:a="_blank",href:n,className:s,onClick:r,style:l}=e;return(0,i.jsx)("a",{onClick:r,href:n,target:a,rel:"noopener noreferrer",style:l,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let o=(0,n.createContext)({type:"text"}),d=e=>{let{type:t}=e;return(0,i.jsx)(o.Provider,{value:{type:t},"data-sentry-element":"unknown","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},c=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:t,className:a,ulClassName:n,style:s,type:r="text"}=e;return(0,i.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:a,style:s,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,i.jsx)(d,{type:r,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,i.jsx)("ul",{className:n,children:t})})})}u.Item=function(e){let{children:t,icon:a,active:n,rounded:l,onClick:o,doNotCloseOverlay:d=!1,showActiveBar:u=!1,style:m}=e,p=(0,s.Z)("menu"),{type:f}=c(),x=[p.item.base];x.push(p.item.variants[f].base),n?x.push(p.item.variants[f].active):x.push(p.item.variants[f].normal);let h=[p.item.content.base];n?h.push(p.item.content.active):h.push(p.item.content.normal);let g=[p.item.icon.base];return n?g.push(p.item.icon.active):g.push(p.item.icon.normal),(0,i.jsxs)("li",{role:"menuitem",className:(0,r.cn)("outline-none",x),style:m,onClick:o,"aria-current":n?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[a&&(0,i.jsx)("div",{className:"".concat(g.join(" ")," min-w-fit"),children:a}),(0,i.jsx)("span",{className:h.join(" "),children:t})]})},u.Group=function(e){let{children:t,icon:a,title:n}=e,r=(0,s.Z)("menu"),{type:l}=c();return(0,i.jsxs)("div",{className:[r.group.base,r.group.variants[l]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[a&&(0,i.jsx)("span",{className:r.group.icon,children:a}),(0,i.jsx)("span",{className:r.group.content,children:n}),t]})},u.Misc=function(e){let{children:t}=e;return(0,i.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,i.jsx)(l.Text,{"data-sentry-element":"unknown","data-sentry-source-file":"Menu.tsx",children:(0,i.jsx)("span",{children:t})})})};var m=u},55458:function(e,t,a){"use strict";a.d(t,{W:function(){return o},Y:function(){return d}});var i=a(97458),n=a(11908),s=a(91487),r=a(52983),l=a(28453);let o=r.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)(n.fC,{className:(0,l.cn)("grid gap-2",a),...s,ref:t})});o.displayName=n.fC.displayName;let d=r.forwardRef((e,t)=>{let{image:a,label:r,showIndicator:o=!0,...d}=e;return(0,i.jsxs)(n.ck,{ref:t,...d,className:(0,l.cn)("flex flex-col gap-2","w-48","bg-overlay","rounded-md","border","p-2","hover:border-foreground-muted","hover:z-[1] focus-visible:z-[1]","data-[state=checked]:z-[1]","data-[state=checked]:ring-2 data-[state=checked]:ring-border","data-[state=checked]:bg-surface-200 dark:data-[state=checked]:bg-surface-300","data-[state=checked]:border-foreground/50","transition-colors","group",d.className),children:[d.children,(0,i.jsxs)("label",{className:"flex gap-2 w-full",id:d.id,htmlFor:d.value,children:[o&&(0,i.jsx)("div",{className:" aspect-square h-4 w-4  rounded-full border group-data-[state=checked]:border-foreground-muted group-focus:border-foreground-muted group-hover:border-foreground-muted ring-offset-background  group-focus:outline-none  group-focus-visible:ring-2 group-focus-visible:ring-ring group-focus-visible:ring-offset-2  group-disabled:cursor-not-allowed group-disabled:opacity-50 flex items-center justify-center transition ",children:(0,i.jsx)(n.z$,{className:"flex items-center justify-center",children:(0,i.jsx)(s.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})}),(0,i.jsx)("div",{className:(0,l.cn)("w-full","text-xs transition-colors text-left","text-light","group-hover:text-foreground group-data-[state=checked]:text-foreground",d.disabled?"cursor-not-allowed":"cursor-pointer"),children:r})]})]})});d.displayName=n.ck.displayName},49584:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},Zb:function(){return r},aY:function(){return d},eW:function(){return c},ll:function(){return o}});var i=a(97458),n=a(52983),s=a(28453);let r=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-surface-100 text-card-foreground shadow-sm",a),...n})});r.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 py-4 px-6 border-b",a),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("h3",{ref:t,className:(0,s.cn)("text-xs font-mono uppercase",a),...n})});o.displayName="CardTitle",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-foreground-muted",a),...n})}).displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{ref:t,className:(0,s.cn)("py-4 px-6 border-b last:border-none",a),...n})});d.displayName="CardContent";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{ref:t,className:(0,s.cn)(" flex items-center py-4 px-6",a),...n})});c.displayName="CardFooter"},89059:function(e,t,a){"use strict";a.d(t,{RM:function(){return o},Rn:function(){return m},SC:function(){return d},iA:function(){return r},pj:function(){return u},ss:function(){return c},xD:function(){return l}});var i=a(97458),n=a(52983),s=a(28453);let r=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{className:"w-full overflow-auto",children:(0,i.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",a),...n})})});r.displayName="Table";let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",a),...n})});l.displayName="TableHeader";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",a),...n})});o.displayName="TableBody",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("tfoot",{ref:t,className:(0,s.cn)("bg-primary font-medium text-primary-foreground",a),...n})}).displayName="TableFooter";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...n})});d.displayName="TableRow";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-foreground-muted [&:has([role=checkbox])]:pr-0",a),...n})});c.displayName="TableHead";let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...n})});u.displayName="TableCell";let m=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-foreground-muted",a),...n})});m.displayName="TableCaption"}},function(e){e.O(0,[6665,3856,6664,588,7037,4605,950,292,2433,7639,3662,436,5582,2585,3356,2269,2019,4637,3545,1500,9788,3829,578,28,7788,9774,2888,179],function(){return e(e.s=85751)}),_N_E=e.O()}]);